

мќґлІ€ л‹Ёкі„м—ђм„  User нЃґлћмЉ¤лҐј мњ„н•њ м—”н„°н‹°л¶Ђн„° мѓќм„±н•кІ л‹¤ 

----------------------------------------------------------------------------------------------------------------------------------


вЏє User нЃґлћмЉ¤нЊЊмќј


package com.in28minutes.rest.webservices.restfulwebservices.user;

import java.time.*;

import com.fasterxml.jackson.annotation.*;

import jakarta.persistence.*;
import jakarta.validation.constraints.*;

//1: JPAк°Ђ мќґк±ё кґЂл¦¬н•кІЊ н•л ¤л©ґ @Entity м–ґл…ён…Њмќґм…мќ„ м¶”к°Ђн•ґм•ј н•њл‹¤, ctrl+1мќ„ н•ґм„њ import 'Entity' (jakarta.persistence)лҐј м„ нѓќн•кІ л‹¤
//ліґл‹¤м‹њн”ј import jakarta.persistence.Entity;лЏ„ м¶”к°Ђлђњл‹¤, мў‹л‹¤, к·ёл¦¬кі //1-1: м•„лћлЎњ..
@Entity
public class User {

  //1-1: @IdлҐј м¶”к°Ђн•кІ л‹¤ мќґ idн•„л“њлЉ” м‹ќлі„мћђм—¬м•ј н•лЇЂлЎњ @IdлҐј м¶”к°Ђн•кі  Ctrl+1м—ђм„њ import 'Id' (jakarta.persistence)лҐј м„ нѓќн•њл‹¤, мў‹л‹¤
  //import jakarta.persistence.Id;лЏ„ м¶”к°Ђлђђл‹¤, мќґм њ id к°’мќґ мѓќм„±лЏјм•ј н•лЇЂлЎњ м—¬кё°м—ђ @GeneratedValueлҐј л„ЈкІ л‹¤, private Integer id н•„л“њк°Ђ мѓќм„±лЏјм•ј н•кё° л•Њл¬ёмќґл‹¤
	@Id
	@GeneratedValue
	private Integer id;
	
	@Size(min=2, message = "Name should have atleast 2 characters")
	@JsonProperty("user_name")
	private String name;
	
	@Past(message = "Birth Date should be in the past")
	@JsonProperty("birth_date")
	private LocalDate birthDate;
	
	public User(Integer id, String name, LocalDate birthDate) {
		super();
		this.id = id;
		this.name = name;
		this.birthDate = birthDate;
	}

	public Integer getId() {
		return id;
	}

	public void setId(Integer id) {
		this.id = id;
	}

	public String getName() {
		return name;
	}

	public void setName(String name) {
		this.name = name;
	}

	public LocalDate getBirthDate() {
		return birthDate;
	}

	public void setBirthDate(LocalDate birthDate) {
		this.birthDate = birthDate;
	}

	@Override
	public String toString() {
		return "User [id=" + id + ", name=" + name + ", birthDate=" + birthDate + "]";
	}
	
}

----------------------------------------------------------------------------------------------------------------------------------

к·јлЊЂ лЎњк·ёлҐј ліґл‹€ м¤лҐк°Ђ мћ€л‹¤
exception accepting command : Error executing DDL "drop table if exists user cascade " via JDBC [Syntax error in SQL statement "drop table if exists [*]user cascade "; expected "identifier";]

org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "drop table if exists user cascade " via JDBC [Syntax error in SQL statement "drop table if exists [*]user cascade "; expected "identifier";]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
....
SQLл¬ём—ђ м‹ нѓќмЉ¤ м¤лҐк°Ђ мћ€л‹¤кі  л‚мЁл‹¤, "identifier"к°Ђ м™Ђм•ј н•њл‹Ёл‹¤
м™њ мќґлџ° л¬ём њк°Ђ мѓќкё°лѓђл©ґ, H2м—ђм„  userк°Ђ н‚¤м›Њл“њмќґкё° л•Њл¬ёмќґл‹¤ 
л”°лќјм„њ н…Њмќґлё” мќґл¦„мќ„ м€м •н•ґм•ј н•њл‹¤

----------------------------------------------------------------------------------------------------------------------------------


вЏє User нЃґлћмЉ¤нЊЊмќј



package com.in28minutes.rest.webservices.restfulwebservices.user;

import java.time.*;

import com.fasterxml.jackson.annotation.*;

import jakarta.persistence.*;
import jakarta.validation.constraints.*;

//2: м—¬кё°м„њ м—”н„°н‹° мќґл¦„мќ„ м€м •н•кІ л‹¤ @Entity(name = "user_details")мІлџј, к·ёл¦¬кі  м ЂмћҐн•њл‹¤
@Entity(name = "user_details")
public class User {

	@Id
	@GeneratedValue
	private Integer id;
	
	@Size(min=2, message = "Name should have atleast 2 characters")
	@JsonProperty("user_name")
	private String name;
	
	@Past(message = "Birth Date should be in the past")
	@JsonProperty("birth_date")
	private LocalDate birthDate;
	
	public User(Integer id, String name, LocalDate birthDate) {
		super();
		this.id = id;
		this.name = name;
		this.birthDate = birthDate;
	}

	public Integer getId() {
		return id;
	}

	public void setId(Integer id) {
		this.id = id;
	}

	public String getName() {
		return name;
	}

	public void setName(String name) {
		this.name = name;
	}

	public LocalDate getBirthDate() {
		return birthDate;
	}

	public void setBirthDate(LocalDate birthDate) {
		this.birthDate = birthDate;
	}

	@Override
	public String toString() {
		return "User [id=" + id + ", name=" + name + ", birthDate=" + birthDate + "]";
	}
	
}
----------------------------------------------------------------------------------------------------------------------------------

мќґм њ м‹¤н–‰н•л©ґ м• н”Њл¦¬мјЂмќґм…мќґ м¤лҐ м—†мќґ м‹¤н–‰лђ  кІѓмќґл‹¤
лЎњк·ёлҐј ліґл©ґ H2 лЌ°мќґн„°лІ мќґмЉ¤ м—°кІ° URLмќґ н‘њм‹њлЏј мћ€л‹¤
connection conn0: url=jdbc:h2:mem:36d82570-3900-43a6-b8ad-41db912f18ea user=SA
лЏ™м Ѓ URLмќЂ м“°м§Ђ м•Љмќ„ кІѓмќґл‹¤
м •м Ѓ URLмќ„ м„¤м •н•ґм„њ м“°лЉ” нЋёмќґ л‚«л‹¤

application.propertiesлҐј м—ґм–ґ м •м • URLмќ„ м„¤м •н•кІ л‹¤

----------------------------------------------------------------------------------------------------------------------------------

вЏє application.properties



spring.application.name=restful-web-services

logging.level.org.springframework=info

management.endpoints.web.exposure.include=*

#3: spring.datasource.url=мќ„ мћ…л Ґн•кі  л‚лЁём§ЂлЉ” jdbc:h2:mem:мќ„ ліµм‚¬н•ґ к°Ђм ём¤мћђ jdbc:h2:mem:testdbмІлџј, к·ёл¦¬кі  м ЂмћҐн•њл‹¤
spring.datasource.url=jdbc:h2:mem:testdb
----------------------------------------------------------------------------------------------------------------------------------
мќґ URLлЎњ H2 DBм—ђ м ‘к·јн•лЉ” к±°л‹¤, мќґм њ H2 мЅм†”мќ„ м‹¤н–‰н•  м€ мћ€л‹¤ 

localhost:8080/h2-console лЎњ

----------------------------------------------------------------------------------------------------------------------------------


рџЊЋ localhost:8080/h2-console м‚¬мќґнЉён™”л©ґ ==>

  ______________________
 |English             v |  Preferences  Tools  Help
  вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ
  _______________________________________________________________________
 |  Login (нЊЊл°”нѓ•)                                                        | 
 |вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ|
 |                    ______________________________________________     |
 |  Saved Settings:  | Generic H2 (Embedded)                    v   |    |
 |                    вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ     |
 |                    ______________________________   ____   ______     |
 |  Setting Name :   | Generic H2 (Embedded)        | |Save| |Remove|    |
 |                     вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ   вЂѕвЂѕвЂѕвЂѕ   вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ     |
 |  вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ   |
 |                    ____________________________________________       |
 |  Driver Class:    |org.h2.Driver                               |      |
 |                    вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ       |
 |                    ____________________________________________       |
 |  JDBC URL:        |jdbc:h2:mem:testdb                          |      |
 |                    вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ       |
 |                    ________________________________                   |
 |  User Name:       |sa                              |                  |
 |                    вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ                   | 
 |                    ________________________________                   |
 |  Password:        | Generic H2 (Embedded)          |                  |
 |                    вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ                   |
 |                    _________   _________________                      |                               
 |                   | Connect | | Test Connection |                     |                                       
 |                    вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ   вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ                      |
  вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ

----------------------------------------------------------------------------------------------------------------------------------
JDBC URLмќґ м•ћмќ URLкіј мќјм№н•лЉ”м§Ђ н™•мќён•ґлќј, к·ёлЊЂлЎњ ліµм‚¬н•њ л’¤ ConnectлҐј нЃґл¦­

к·ёлџ¬л©ґ USER_DETAILS н…Њмќґлё”мќґ мѓќкёґл‹¤ 
----------------------------------------------------------------------------------------------------------------------------------
H2 Database м•€ ==>

рџ”‹ jdbc:h2:mem:testdb
 - рџ’· USER_DETAILS
   + рџ›ў BIRTH_DATE
   + рџ›ў ID
   + рџ›ў NAME
   + рџ”  indexes
 + рџ“Ѓ INFORMATION_SCHEMA
 + рџЋ« Sequences
 + рџ‘Є Users
 i H2 2.2.224 (2023-09-17)


л°”лЎњ SELECT * FROM USER_DETAILSлҐј н•л©ґ м•„л¬ґ м„ёл¶Ђ м •ліґлЏ„ л‚м¤м§Ђ м•ЉлЉ”л‹¤
----------------------------------------------------------------------

вЏє H2 Console 
 _____   ______________   _______________   _______
| Run | | Run Selected | | Auto complete | | Clear | SQL statement:
 вЂѕвЂѕвЂѕвЂѕвЂѕ   вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ   вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ   вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ 
 ___________________________________________________________________________________
| SELECT * FROM USER_DETAILS                                                        |
|                                                                                   |                     
|                                                                                   |                     
|                                                                                   |                     
|                                                                                   |                    
|                                                                                   |                     
 вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ
SELECT * FROM TODO;
 _____________________________________
|BIRTH_DATE     |ID       | NAME      |   
 вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ
(no row, 2 ms)
 ____
|Edit|
 вЂѕвЂѕвЂѕвЂѕ
----------------------------------------------------------------------------------------------------------------------------------

м–јлҐё лЌ°мќґн„°лҐј л„Јм–ґліґмћђ

src/main/resourcesм—ђ мѓ€ нЊЊмќјмќ„ мѓќм„±н•кІ л‹¤, Fileмќ„ м„ нѓќн•ґ мќґл¦„мќ„ data.sqlлЎњ н•кі  finishлҐј нЃґл¦­

----------------------------------------------------------------------------------------------------------------------------------


вЏє data.sql нЊЊмќј



--4: мќґм њ м—¬кё°м—ђ мїјл¦¬лҐј мћ…л Ґн•њл‹¤ INSERT INTO user_details() мІлџј мќґм њ м—ґ мќґл¦„мќ„ м€њм„њлЊЂлЎњ м ЃлЉ”л‹¤, (id, birth_date, name) 
-- к°’лЏ„ л„ЈкІ л‹¤ VALUSE idлЉ” 10001нё н•л“њмЅ”л”©н•кі , birth_dateлЉ” current_date()лЎњ н•кІ л‹¤ H2м—ђ мћ€лЉ” н•Ём€м§Ђ, nameмќЂ 'Ranga'лЎњ н•ґм„њ VALUES(10001,current_date(),'Ranga');мІлџј м Ѓкі  м ЂмћҐн•њл‹¤
INSERT INTO user_details(id,birth_date,name)
VALUES (10001, current_date(), 'Ranga');

----------------------------------------------------------------------------------------------------------------------------------

м ЂмћҐн•кі  л‚л‹€ лђ м¤лҐк°Ђ лњ¬л‹¤
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "USER_DETAILS" not found (this database is empty); SQL statement:
INSERT INTO user_details(id,birth_date,name) VALUES (10001, current_date(), 'Ranga') [42104-224]
....

"USER_DETAILS"н…Њмќґлё”мќ„ м°ѕмќ„ м€ м—†л‹¤кі  л‚мЁл‹¤ 
н…Њмќґлё”мќґ H2 DBм—ђ мѓќм„±лђкё° м „м—ђ data.sqlмќґ лЁјм Ђ м‹¤н–‰лЏјм„њ к·ёл ‡л‹¤ 

