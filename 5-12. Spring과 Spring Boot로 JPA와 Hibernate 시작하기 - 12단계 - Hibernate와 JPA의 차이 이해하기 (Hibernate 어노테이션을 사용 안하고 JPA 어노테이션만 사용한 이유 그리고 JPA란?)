

ì´ë²ˆ ì„¹ì…˜ ë§ˆì§€ë§‰ ë‹¨ê³„ì¸ë°, ê°€ì¥ ì¤‘ìš”í•œ ì§ˆë¬¸ì„ ì‚´í´ë³´ê¸°ë¡œí•˜ì
ë°”ë¡œ Hibernateì™€ JPAì˜ ì°¨ì´ì´ë‹¤ HibernateëŠ” ë­˜ê¹Œ? JPAëŠ”? ì´ ë‘˜ì˜ ì°¨ì´ì ì€ ë­ì§€?
ì§€ë‚œ ëª‡ ë‹¨ê³„ì—ì„œ JPAë¥¼ ì‚´í´ë´¤ëŠ”ë° JPAë¥¼ ì´ìš©í•˜ë©´ DBì—°ê²°ì´ ì•„ì£¼ ì‰¬ì›Œì¡Œë‹¤ 

CourseJpaRepositoryì—ì„œ ì‚¬ìš©í•œ ì„í¬íŠ¸ë¥¼ í•œë²ˆ ë³´ê³  ì„í¬íŠ¸ë¥¼ ì‚´í´ë³´ì 

--------------------------------------------------------


CourseJpaRepository í´ë˜ìŠ¤íŒŒì¼



package com.springstudy.springboot.learnjpaandhibernate.course.jpa;

import org.springframework.stereotype.*;

import com.springstudy.springboot.learnjpaandhibernate.course.*;

import jakarta.persistence.*;
import jakarta.transaction.*;

@Repository
@Transactional
public class CourseJpaRepository {

	@PersistenceContext 
	private EntityManager entityManager;
	
	public void insert (Course course) {	
		entityManager.merge(course);
	}
	
	public Course findById(long id) {
		return entityManager.find(Course.class, id);
	}
	
	public void deleteById(long id) {
		Course course = entityManager.find(Course.class, id);
		entityManager.remove(course);
	}
}


jakarta.persistence ì—¬ê¸°ë„ jakarta.persistenceì´ë‹¤ ê·¸ë‹¤ìŒ Courseë¡œ ê°€ë³´ì

--------------------------

Course í´ë˜ìŠ¤íŒŒì¼


package com.springstudy.springboot.learnjpaandhibernate.course;

import jakarta.persistence.*;

@Entity
public class Course {

	@Id
	private long id;
	
	private String name;
	
	private String author;

	public Course () {
		
	}
	
	public Course(long id, String name, String author) {
		super();
		this.id = id;
		this.name = name;
		this.author = author;
	}


	public long getId() {
		return id;
	}
	
	public String getName() {
		return name;
	}
	
	public String getAuthor() {
		return author;
	}
	
	
	public void setId(long id) {
		this.id = id;
	}


	public void setName(String name) {
		this.name = name;
	}


	public void setAuthor(String author) {
		this.author = author;
	}


	@Override
	public String toString() {
		return "Course [id=" + id + ", name=" + name + ", author=" + author + "]";
	}

}	

ìš°ë¦¬ê°€ ì‚¬ìš©í•˜ê³  ìˆëŠ” ì–´ë…¸í…Œì´ì…˜ì´ ë­ì§€? jakarta.persistence.Entityì™€ jakarta.persistence.Idì´ë‹¤
--------------------------------------------------------

ì´ë²ˆì„¹ì…˜ì—ì„  ì§€ê¸ˆê¹Œì§€ Hibernate ì–´ë…¸í…Œì´ì…˜ì€ ì „í˜€ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ëŠ”ë° 
Maven ì¢…ì†ì„±ìœ¼ë¡œ ë„˜ì–´ê°€ë³´ê² ë‹¤
ì™¼ìª½ì˜ Package Explorerì˜ Maven Dependenciesë¥¼ ì—´ì–´ë³´ì
Maven ì¢…ì†ì„±ì„ ë„“í˜€ë³´ë©´ jakarta.persistence-api-3.1.0.jarì´ ë³´ì´ëŠ”ë° ì´ê²Œ JPA JARì´ë‹¤
ì—¬ê¸°ì— hibernate.jarë„ ë³´ì¼ê²ƒì´ë‹¤ ìœ„ë¡œ ì˜¬ë¼ê°€ hibë¥¼ ì³ë³´ë©´ hibernate-core-6.4.4.Final.jarê°€ ë³´ì¸ë‹¤ Hibernateë„ í´ë˜ìŠ¤ ê²½ë¡œì— ìˆë‹¤ëŠ” ê±¸ ì•Œ ìˆ˜ ìˆë‹¤
ê·¸ëŸ¼ ì–´ë–»ê²Œ Hibernateì™€ JPA ì¢…ì†ì„±ì´ ë“¤ì–´ì™”ì„ê¹Œ? pom.xmlì„ ì—´ë©´ spring-boot-starter-data-jpaë¼ëŠ” ê²Œ ë³´ì¸ë‹¤
		<dependency>
			<groupId>org.springframework.boot</groupId>
			<artifactId>spring-boot-starter-data-jpa</artifactId>
		</dependency>
ì•„ë˜ì˜ Dependency Hierarchyë¥¼ ë“¤ì–´ê°€ë©´ Filterì— hibernateë¥¼ ì³ë³´ê² ë‹¤

â–¼ ğŸ§´ spring-boot-starter-data-jpa : 3.3.0-M3 [complile]
  â–¼ ğŸ§´ hibernate-core : 6.4.4.Final [compile]
    â–¼ ğŸ§´ hibernate-commons-annotations : 6.0.6 Final [runtime]
Hibernate ì¢…ì†ì„± ë‘ ê°€ì§€ê°€ ë³´ì¼ê±´ë°, spring-boot-starter-data-jpaë¡œ ë“¤ì–´ê°€ê³  ìˆëŠ” ê²ƒì´ë‹¤

ê·¸ë¦¬ê³  ì´ì œ jpaë¥¼ ê²€ìƒ‰í•´ì¤€ë‹¤ jakarta.persistence.apiì¸ë°
â–¼ ğŸ§´ spring-boot-starter-data-jpa : 3.3.0-M3 [complile]
  â–¼ ğŸ§´ hibernate-core : 6.4.4.Final [compile]
    â–¼ ğŸ§´ jakarta-persistence-api : 3.1.0 [complile]
Jakarta Persistence APIë‚˜ JPAê°€ ì–´ë–»ê²Œ ë“¤ì–´ì˜¤ì§€? 
ì—¬ê¸° ë³´ë©´ spring-boot-starter-data-jpaë¥¼ í†µí•´ ë“¤ì–´ì˜¤ëŠ” ê±¸ ì•Œ ìˆ˜ ìˆë‹¤ 

pom.xmlì—ì„  JPAì™€ Hibernate ë‘˜ ë‹¤ ì–»ì–´ì˜¤ê³  ìˆëŠ”ë° í•˜ì§€ë§Œ ì½”ë“œì—ì„  JPAë§Œ ì‚¬ìš©í•˜ê³  ìˆë‹¤ 
JPA ì–´ë…¸í…Œì´ì…˜ë§Œ ì‚¬ìš©í–ˆë‹¤ 






Hibernate vs JPA

                                                                                         ______________________                                                                                                                            
â— JPA defines the specification. It is an API.                                          |      Application     |                                                                                                                       
 â–  How do you define entities?                                                           â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾                                                                                                                             
 â–  How do you map attributes?                                                            ______________________                                                                                                                            
 â–  Who manages the entities?                                                            |   Spring Data JPA    |                                                                                                                   
â— Hibernate is one of the popular implementations of JPA                                 â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾                                                                                                                            
â— Using Hibernate directly would result in a lock in to Hibernate                        ______________________                                                                                                                             
 â–  There are other JPA implementations (Toplink, for example)                           |         JPA          |                                                                                                                      
                                                                                         â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾                                                                                                                            
                                                                                         ______________________                                                                                                                            
                                                                                        |       Database       |                                                                                                             
                                                                                         â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾            



ì´ëŸ° ë§¥ë½ì—ì„œ ë³´ë©´ Hibernateì™€ JPAì˜ ì°¨ì´ëŠ” ë¬´ì—‡ì¼ê¹Œ?
â— JPA defines the specification. It is an API. 
JPAëŠ” ê¸°ìˆ ëª…ì„¸ë¥¼ ì •ì˜í•œë‹¤ APIì´ë‹¤.
JPAëŠ” ì¸í„°í˜ì´ìŠ¤ì™€ ë¹„ìŠ·í•˜ë‹¤ 
 â–  How do you define entities?
ì—”í„°í‹°ê°€ ë¬´ì—‡ì¸ì§€ ì •ì˜í•˜ëŠ” ë°©ì‹ì„ ì •ì˜í•œë‹¤
ì—”í„°í‹°ë¥¼ ì •ì˜í•˜ëŠ” ë°©ë²•ì€ @Entity ì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•˜ëŠ” ê±´ë°
Course.javaì—ì„œ @Entity ì¦‰, jakarta.persistence.Entityë¥¼ í™œìš©í–ˆë‹¤ 
@Entity
public class Course {....
ê·¸ëŸ¬ë‹ˆê¹Œ JPA APIë¥¼ ì‚¬ìš©í•˜ê³  ìˆëŠ” ê²ƒì´ë‹¤ 
ê¸°ë³¸ í‚¤ëŠ” ì–´ë–»ê²Œ ì •ì˜í•˜ì§€? jakarta.persistence.Idë¥¼ ì‚¬ìš©í•œë‹¤ , 
	@Id
	private long id;
 â–  How do you map attributes? 
ì†ì„±ì€ ì–´ë–»ê²Œ ë§¤í•‘í• ê¹Œ?
@Columnì´ë¼ëŠ” ì–´ë…¸í…Œì´ì…˜ì„ ë°°ì› ë‹¤ @Column ì–´ë…¸í…Œì´ì…˜ì„ ë³´ë©´ ì´ê²Œ ì–´ë””ì„œ ì˜¤ê³  ìˆì§€? jakarta.persistence APIì—ì„œ ì˜¨ë‹¤ 

 â–  Who manages the entities? 
JPAë¥¼ ì´ìš©í•˜ë©´ ì—”í„°í‹° ì •ì˜, ì†ì„±ë§¤í•‘ ê·¸ë¦¬ê³  EntityManagerë¥¼ í™œìš©í•˜ëŠ” ê²ƒê¹Œì§€ ê°€ëŠ¥í•´ì§„ë‹¤ 
ì˜ˆë¥¼ ë“¤ì–´ EntityManagerì— ìˆëŠ” ë©”ì„œë“œë¥¼ ì •ì˜í•´ì¤€ë‹¤ 
â— Hibernate is one of the popular implementations of JPA
ê·¸ë¦¬ê³  HibernateëŠ” JPAì—ì„œ ë§¤ìš° ì¸ê¸° ìˆëŠ” êµ¬í˜„ì²´ì¸ë° JPAëŠ” APIë¥¼ ì •ì˜í•˜ê³  
JPAëŠ” ê°ì²´ë¥¼ í…Œì´ë¸”ë¡œ ë§¤í•‘í•˜ëŠ” ë°©ì‹ì„ ì •ì˜í•˜ê³  HibernateëŠ” ê·¸ê±¸ êµ¬í˜„í•œë‹¤, 
â— Using Hibernate directly would result in a lock in to Hibernate
HibernateëŠ” JPAì—ì„œ ê°€ì¥ ì¸ê¸° ìˆëŠ” êµ¬í˜„ì²´ì´ë‹¤

ì½”ë“œì—ì„œ Hibernateë¥¼ ì§ì ‘ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì˜µì…˜ì´ ìˆëŠ”ë° Hibernateë¥¼ ì–´ë–»ê²Œ ì§ì ‘ ì‚¬ìš©í• ê¹Œ? Hibernate ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤ 

package com.springstudy.springboot.learnjpaandhibernate.course;

import jakarta.persistence.*;

//ì˜ˆë¥¼ë“¤ì–´ Entityë¡œ ê°€ì„œ ctrl + ìŠ¤í˜ì´ìŠ¤ë¥¼ ëˆ„ë¥´ë©´ jakarta.persistence ì—”í„°í‹°ê°€ ë³´ì´ëŠ”ë°,org.hibernate.annotationsë¼ëŠ” ì—”í„°í‹°ë„ ìˆë‹¤ 
//org.hibernate.annotations ì—”í„°í‹°ë¥¼ ì‚¬ìš©í•˜ë©´ Hibernateë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ê²Œ ë˜ëŠ” ê²ƒì´ë‹¤ í•˜ì§€ë§Œ ìš°ë¦¬ëŠ” Hibernateë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ëŠ” ê²Œ ì•„ë‹ˆë¼ JPAë¥¼ ì‚¬ìš©í•˜ê³  ìˆëŠ” ê²ƒì´ë‹¤
//Hibernate JARë¥¼ í´ë˜ìŠ¤ ê²½ë¡œì— ì¶”ê°€í•´ì„œ Hibernateë¥¼ JPA êµ¬í˜„ì²´ë¡œ ì‚¬ìš©í•˜ê³  ìˆë‹¤
@Entity
public class Course {
.....
}

ì½”ë“œì—ì„œ Hibernate ì–´ë…¸í…Œì´ì…˜ì„ ì§ì ‘ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì´ìœ ëŠ” Hibernateë¡œë§Œ í•œì •í•´ì„œ ì“°ê³  ì‹¶ì§€ ì•Šê¸° ë•Œë¬¸ì´ë‹¤
 â–  There are other JPA implementations (Toplink, for example)      
ë‹¤ë¥¸ JPA êµ¬í˜„ì²´ë„ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ”ë° ê·¸ ì¤‘ í•˜ë‚˜ê°€ Toplinkë¼ê³  í•˜ëŠ” ê²ƒì´ë‹¤ 







ì´ë²ˆ ë‹¨ê³„ì—ì„œ ê°€ì¥ ì¤‘ìš”í•˜ê²Œ ë°°ìš¸ ì ì€ JPAê°€ APIë¼ëŠ” ê²ƒì´ë‹¤ 
ê¸°ìˆ  ëª…ì„¸ë¥¼ ì •ì˜í•˜ê³  ì—”í„°í‹°ë¥¼ ë§¤í•‘í•˜ëŠ” ë°©ë²•, ì†ì„±ì„ ë§¤í•‘í•˜ëŠ” ë°©ë²•, EntityManagerë¥¼ í™œìš©í•˜ëŠ” ë°©ë²•ì„ ì •ì˜í•œë‹¤
ì½”ë“œì—ì„œ í•­ìƒ JPAë¥¼ ì‚¬ìš©í•˜ëŠ” ê²Œ ì¢‹ë‹¤ 
JPAë¥¼ ì½”ë“œì—ì„œ ì‚¬ìš©í•˜ê³  ë‚˜ë©´ Hibernateë¥¼ JPA êµ¬í˜„ì²´ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ 
