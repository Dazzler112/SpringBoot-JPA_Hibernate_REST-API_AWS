

ì´ì „ ë‹¨ê³„ì—ì„  User ì—”í„°í‹°ë¥¼ ì„¤ì •í•˜ê³  H2 ì½˜ì†”ì—ì„œ ì„¸ë¶€ ì •ë³´ë¥¼ ì‚´í´ë´¤ë‹¤

ì´ë²ˆ ë‹¨ê³„ì—ì„  UserRepositoryìƒì„±ì„ ì¤‘ì ì ìœ¼ë¡œ ë³´ê² ë‹¤
UserResourceê°€ DBì™€ ì†Œí†µí•˜ê²Œ í•˜ë ¤ë©´ UserRepositoryë¥¼ ê±°ì¹˜ê²Œë” í•´ì•¼í•œë‹¤
ë°”ë¡œ UserRepositoryë¥¼ ìƒì„±í•´ë³´ì

ì—¬ê¸°ì„œ ìƒˆë¡œìš´ ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì„±í•˜ê² ë‹¤ ì´ë¦„ì€ UserRepositoryë¡œ í•˜ê² ë‹¤

------------------------------------------------------------------------------------------------------------------------


âº UserRepository ì¸í„°í˜ì´ìŠ¤ íŒŒì¼


package com.in28minutes.rest.webservices.restfulwebservices.jpa;

import org.springframework.data.jpa.repository.*;

import com.in28minutes.rest.webservices.restfulwebservices.user.*;

//1: ì—¬ê¸° extends JpaRepositoryë¥¼ ì…ë ¥í•˜ê³˜ë‹¤, JpaRepository ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì†ë°›ëŠ” ê²ƒì´ë‹¤ ì´ ì¸í„°í˜ì´ìŠ¤ëŠ” ì–´ë–¤ ì—”í„°í‹°ë¥¼ ê´€ë¦¬í• ê¹Œ? ë°”ë¡œ User ì—”í„°í‹°ì´ë‹¤, ID í•„ë“œ íƒ€ì…ì€ ë­ì§€? ì •ìˆ˜ì¸ Integerì´ë‹¤,
//ì„í¬íŠ¸ë¥¼ ì •ë¦¬í•˜ê² ë‹¤ ìš°ë¦¬ê°€ ì„í¬íŠ¸í•  ê±´ com.in28minutes.rest.webservices.restfulwebservices.user.Userì´ë‹¤ ì´ê±¸ ì„í¬íŠ¸ í•´ì•¼ í•œë‹¤, ë³´ë‹¤ì‹œí”¼ ì„í¬íŠ¸ëê³ , ì´ì œ ì €ì¥í•˜ê² ë‹¤
public interface UserRepository extends JpaRepository<T, ID> {

}

------------------------------------------------------------------------------------------------------------------------

ì´ì œ UserRepository í´ë˜ìŠ¤ê°€ ì¤€ë¹„ëë‹¤, ì´ì œ UserRepositoryëŠ” jpa íŒ¨í‚¤ì§€ì— ìˆë‹¤, 
ì´ì œ UserResourceì—ì„œ UserRepositoryë¥¼ ì´ìš©í•´ DBì™€ ì†Œí†µí•  ê²ƒì´ë‹¤

UserResourceì˜ ë³µì‚¬ë³¸ì„ ë§Œë“¤ê² ë‹¤
UserResourceë¥¼ ì§ì ‘ ìˆ˜ì •í•˜ëŠ” ëŒ€ì‹  ë³µì‚¬ë³¸ìœ¼ë¡œ ì‘ì—…í•  ê²ƒì´ë‹¤
ì—¬ê¸°ì— ì´ë¦„ì„ ë¶™ì—¬ ë„£ê³  UserJpaResourceë¼ê³  í•˜ê² ë‹¤
UserResourceì˜ ë³µì‚¬ë³¸ì„ ìƒì„±í•´ JPAë¥¼ ì´ìš©í•˜ë ¤ëŠ” ê²ƒì´ë‹¤ ìƒì„±í•˜ê² ë‹¤ 

ê·¸ëŸ¬ë©´ ì˜¤ë¥˜ê°€ ëª‡ ê°œ ëœ° ê²ƒì´ë‹¤
Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
[2m2024-06-07T18:18:45.235+09:00[0;39m [31mERROR[0;39m [35m4680[0;39m [2m---[0;39m [2m[restful-web-services] [  restartedMain][0;39m [2m[0;39m[36mo.s.boot.SpringApplication              [0;39m [2m:[0;39m Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'requestMappingHandlerMapping' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Ambiguous mapping. Cannot map 'userResource' method 
com.in28minutes.rest.webservices.restfulwebservices.user.UserResource#retrieveAllUsers()
to {GET [/users]}: There is already 'userJpaResource' bean method
com.in28minutes.rest.webservices.restfulwebservices.user.UserJpaResource#retrieveAllUsers() mapped.
	at 
....
ëª¨í˜¸í•œ ë§¤í•‘ì´ ìˆë‹¤ë©´ Consoleì— ë§ì€ ì˜¤ë¥˜ê°€ ë°œìƒí•  ê²ƒì´ë‹¤
ëª¨í˜¸í•œ ë§¤í•‘ì´ë€ ë¬´ì—‡ì¼ê¹Œ?
UserResourceì™€ UserJpaResourceë¥¼ ë³´ë©´ 
--------------------------------------------------------------------

âº UserResource í´ë˜ìŠ¤íŒŒì¼

package com.in28minutes.rest.webservices.restfulwebservices.user;

@RestController
public class UserResource {

	private UserDaoService service;
	
	public UserResource(UserDaoService service) {
		this.service = service;
	}

	@GetMapping("/users")
	public List<User> retrieveAllUsers() {
		
		return service.findAll();
	}
...

--------------------------------

âº UserJpaResource í´ë˜ìŠ¤íŒŒì¼

package com.in28minutes.rest.webservices.restfulwebservices.user;

@RestController
public class UserJpaResource {

	private UserDaoService service;
	
	public UserJpaResource(UserDaoService service) {
		this.service = service;
	}

	@GetMapping("/users")
	public List<User> retrieveAllUsers() {
		
		return service.findAll();
	}
...

--------------------------------------------------------------------

ë©”ì„œë“œë“¤ì´ "/user"ë¼ëŠ” ë™ì¼í•œ URLë¡œ ë§¤í•‘ë¼ ìˆì–´ ë°”ëŒì§í•˜ì§€ ì•Šë‹¤
ê·¸ëŸ¬ë‹ˆ UserJpaResourceë¡œ ê°€ì„œ

------------------------------------------------------------------------------------------------------------------------


âº UserJpaResource í´ë˜ìŠ¤íŒŒì¼ 


package com.in28minutes.rest.webservices.restfulwebservices.user;

import static org.springframework.hateoas.server.mvc.WebMvcLinkBuilder.*;

import java.net.*;
import java.util.*;

import org.springframework.hateoas.*;
import org.springframework.hateoas.server.mvc.*;
import org.springframework.http.*;
import org.springframework.web.bind.annotation.*;
import org.springframework.web.servlet.support.*;

import jakarta.validation.*;

@RestController
public class UserJpaResource {

	private UserDaoService service;
	
	public UserJpaResource(UserDaoService service) {
		this.service = service;
	}

  //2: "/users"ë¥¼ "/jpa/users"ë¡œ ë°”ê¿”ì£¼ê² ë‹¤
	@GetMapping("/jpa/users")
	public List<User> retrieveAllUsers() {
		
		return service.findAll();
	}
	
	//	http://localhost:8080/users
	
	//EntityModel
	//WebMvcLinkBuilder

  //2-1: ì´ê²ƒë„ /jpa/users/{id}ë¡œ ë°”ê¾¸ê³ 
	@GetMapping("/jpa/users/{id}")
	public EntityModel<User> retrieveUser(@PathVariable int id) {
		User user = service.findOne(id);
		
		if(user == null)
			throw new UserNotFoundException("id:"+id);
		
		EntityModel<User> entityModel = EntityModel.of(user);
		
		WebMvcLinkBuilder link = linkTo(methodOn(this.getClass()).retrieveAllUsers());
		entityModel.add(link.withRel("all-users"));
		
		return entityModel;

	}

  //2-2: ì—¬ê¸°ë„ /jpa/users/{id}ë¡œ ë°”ê¿”ì£¼ê² ë‹¤
	@DeleteMapping("/jpa/users/{id}")
	public void deleteUser(@PathVariable int id) {
		service.deleteById(id);
		
	}

  //2-3: createUserë©”ì†Œë“œë„ ë§ˆì°¬ê°€ì§€ë‹¤ "/jpa/users"ë¡œ , ì´ë ‡ê²Œ ë‹¤ë¥¸ URL, ì¦‰ /jpa/usersë¡œ ë§¤í•‘í–ˆìœ¼ë‹ˆ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë  ê²ƒì´ë‹¤
	@PostMapping("/jpa/users")
	public ResponseEntity<User> createUser(@Valid @RequestBody User user) {
		User savedUser = service.save(user);
		// /users/4 => /users /{id},  user.getID
		URI location = ServletUriComponentsBuilder.fromCurrentRequest()
						.path("{id}")
						.buildAndExpand(savedUser.getId())
						.toUri();  
		
		return ResponseEntity.created(location).build();
	}
}

------------------------------------------------------------------------------------------------------------------------

ì¢‹ë‹¤ ì´ë ‡ê²Œ UserJpaResourceë„ ì¤€ë¹„ëë‹¤

ì´ì œ UserJpaResourceì—ì„œ UserRepositoryë¥¼ ì‚¬ìš©í•  ê²ƒì´ë‹¤

------------------------------------------------------------------------------------------------------------------------


âº UserJpaResource í´ë˜ìŠ¤íŒŒì¼


package com.in28minutes.rest.webservices.restfulwebservices.user;

import static org.springframework.hateoas.server.mvc.WebMvcLinkBuilder.*;

import java.net.*;
import java.util.*;

import org.springframework.hateoas.*;
import org.springframework.hateoas.server.mvc.*;
import org.springframework.http.*;
import org.springframework.web.bind.annotation.*;
import org.springframework.web.servlet.support.*;

import com.in28minutes.rest.webservices.restfulwebservices.jpa.*;

import jakarta.validation.*;

@RestController
public class UserJpaResource {

	private UserDaoService service;
//3: UserDaoService ëŒ€ì‹  UserRepositoryë¥¼ ì‚¬ìš©í•˜ëŠ” ê±°ë‹¤, private UserRepository repository;ë¡œ ìˆ˜ì •í•˜ê² ë‹¤, ì„í¬íŠ¸ë¥¼ ì •ë¦¬í•˜ê³  ë¬´ì—‡ì´ ì„í¬íŠ¸ ëëŠ”ì§€ ì ê¹ ë³´ì
//ë³´ë‹¤ì‹œí”¼ import com.in28minutes.rest.webservices.restfulwebservices.jpa.UserRepository;ê°€ ì¶”ê°€ëë‹¤ ì¢‹ë‹¤, ì´ì œ UserRepositoryë¥¼ ì‚¬ìš©í•´ë³´ì
	private UserRepository repository;
	
//3-1:UserRepository repositoryë¥¼ ì—¬ê¸° ìˆëŠ” ìƒì„±ìì— ì¶”ê°€í•˜ê² ë‹¤, ì§€ê¸ˆ ì—¬ê¸° ìˆëŠ” ìˆ˜ ë§ì€ ë©”ì„œë“œê°€ ì „ë¶€ UserDaoServiceë¥¼ ì‚¬ìš©í•˜ê³  ìˆì–´ì„œ 
//ì¤‘ê°„ ë‹¨ê³„ì—ì„  ì¼ë¶€ ë©”ì„œë“œë§Œ UserRepositoryì™€ ì†Œí†µí•˜ê²Œ ë°”ê¾¸ê³  ë‚˜ë¨¸ì§€ëŠ” ê·¸ëŒ€ë¡œ ë‘ê² ë‹¤, í•˜ì§€ë§Œ UserDaoServiceì™€ ì†Œí†µí•˜ëŠ” ë©”ì„œë“œë“¤ë„ UserRepositoryì™€ ì†Œí†µí•˜ê²Œë” ì°¨ì°¨ ìˆ˜ì •í•  ê²ƒì´ë‹¤ ì´ì œ UserRepository repositoryì™€
	public UserJpaResource(UserDaoService service, UserRepository repository) {
		this.service = service;

    //3-2: this.repository = repository;ë¥¼ ì¶”ê°€í•˜ê² ë‹¤, UserRepositoryê°€ ì—°ê²°ëë‹¤ , ì´ì œ ì²« ë²ˆì§¸ ì„œë¹„ìŠ¤ê°€ DBë¥¼ ì‚¬ìš©í•˜ê²Œë” ì—…ê·¸ë ˆì´ë“œí•˜ì retrieveAllUser()ì„œë¹„ìŠ¤ê°€ ê°€ì¥ ì‰½ë‹¤//3-3: retrieveAllUser()ë©”ì„œë“œë¡œ..
		this.repository = repository;
	}

	@GetMapping("/jpa/users")
	public List<User> retrieveAllUsers() {
		
  //3-3: service.findAll()ì„ repository.findAll()ë¡œ ìˆ˜ì •í•˜ë©´ ëœë‹¤, ì–´ë–»ê²Œ ë˜ë‚˜ í™•ì¸í•´ ë³´ì
		return repository.findAll();
	}
	
	//	http://localhost:8080/users
	
	//EntityModel
	//WebMvcLinkBuilder
	
	@GetMapping("/jpa/users/{id}")
	public EntityModel<User> retrieveUser(@PathVariable int id) {
		User user = service.findOne(id);
		
		if(user == null)
			throw new UserNotFoundException("id:"+id);
		
		EntityModel<User> entityModel = EntityModel.of(user);
		
		WebMvcLinkBuilder link = linkTo(methodOn(this.getClass()).retrieveAllUsers());
		entityModel.add(link.withRel("all-users"));
		
		return entityModel;

	}

	@DeleteMapping("/jpa/users/{id}")
	public void deleteUser(@PathVariable int id) {
		service.deleteById(id);
		
	}
	
	@PostMapping("/jpa/users")
	public ResponseEntity<User> createUser(@Valid @RequestBody User user) {
		User savedUser = service.save(user);
		// /users/4 => /users /{id},  user.getID
		URI location = ServletUriComponentsBuilder.fromCurrentRequest()
						.path("{id}")
						.buildAndExpand(savedUser.getId())
						.toUri();  
		
		return ResponseEntity.created(location).build();
	}
}

------------------------------------------------------------------------------------------------------------------------

localhost:8080/usersë¡œ ì´ë™í•˜ë©´ í•˜ë“œì½”ë”©ëœ ì‚¬ìš©ìë¥¼ ë°˜í™˜í•  ê²ƒì´ë‹¤
                                                                            
------------------------------------------------------------------------------------------------------------------------

ğŸŒ localhost:8080/users ì‚¬ì´íŠ¸í™”ë©´ ==> 


[
  {
    "id": 1,
    "user_name": "Adam",
    "birth_date": "1994-06-07"
  },
  {
    "id": 2,
    "user_name": "Eve",
    "birth_date": "1999-06-07"
  },
  {
    "id": 3,
    "user_name": "Jim",
    "birth_date": "2004-06-07"
  }
]

------------------------------------------------------------------------------------------------------------------------

DBì™€ ì†Œí†µí•˜ë ¤ë©´ localhost:8080/jpa/usersë¡œ ì´ë™í•´ì•¼ í•œë‹¤
                                          |
                                          V
------------------------------------------------------------------------------------------------------------------------

ğŸŒ localhost:8080/jpa/users ì‚¬ì´íŠ¸í™”ë©´ ==> 


{
  "timestamp": "2024-06-07T19:18:07.5507246",
  "message": "No default constructor for entity 'com.in28minutes.rest.webservices.restfulwebservices.user.User'",
  "details": "uri=/jpa/users"
}

------------------------------------------------------------------------------------------------------------------------

ì—ëŸ¬ê°€ ë‚˜ì™”ë‹¤ ì—”í„°í‹° ì‚¬ìš©ìì— ëŒ€í•œ ê¸°ë³¸ ìƒì„±ìê°€ ì—†ë‹¤ê³ í•œë‹¤

User í´ë˜ìŠ¤ë¥¼ ì‚´í´ë³´ì
ì—¬ê¸°ì„œ JPAë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ê¸°ë³¸ ìƒì„±ìê°€ í•„ìš”í•˜ë‹¤ 

------------------------------------------------------------------------------------------------------------------------


âº User í´ë˜ìŠ¤íŒŒì¼


package com.in28minutes.rest.webservices.restfulwebservices.user;

import java.time.*;

import com.fasterxml.jackson.annotation.*;

import jakarta.persistence.*;
import jakarta.validation.constraints.*;

@Entity(name = "user_details")
public class User {

  //4: protected User() {} ì²˜ëŸ¼ ë¹ˆ ìƒì„±ìë¡œë„ ì¶©ë¶„í•˜ë‹¤
	protected User() {
		
	}

	@Id
	@GeneratedValue
	private Integer id;
	
	@Size(min=2, message = "Name should have atleast 2 characters")
	@JsonProperty("user_name")
	private String name;
	
	@Past(message = "Birth Date should be in the past")
	@JsonProperty("birth_date")
	private LocalDate birthDate;
	
	public User(Integer id, String name, LocalDate birthDate) {
		super();
		this.id = id;
		this.name = name;
		this.birthDate = birthDate;
	}

	public Integer getId() {
		return id;
	}

	public void setId(Integer id) {
		this.id = id;
	}

	public String getName() {
		return name;
	}

	public void setName(String name) {
		this.name = name;
	}

	public LocalDate getBirthDate() {
		return birthDate;
	}

	public void setBirthDate(LocalDate birthDate) {
		this.birthDate = birthDate;
	}

	@Override
	public String toString() {
		return "User [id=" + id + ", name=" + name + ", birthDate=" + birthDate + "]";
	}
	
}

------------------------------------------------------------------------------------------------------------------------
  
ë‹¤ì‹œ ìƒˆë¡œê³ ì¹¨ì„ í•˜ë©´ 
          |
          V
------------------------------------------------------------------------------------------------------------------------

ğŸŒ localhost:8080/jpa/users ì‚¬ì´íŠ¸í™”ë©´ ==> 


[
  {
    "id": 10001,
    "user_name": "Ranga",
    "birth_date": "2024-06-07"
  },
  {
    "id": 10002,
    "user_name": "Ravi",
    "birth_date": "2024-06-07"
  },
  {
    "id": 10003,
    "user_name": "Sathish",
    "birth_date": "2024-06-07"
  }
]

------------------------------------------------------------------------------------------------------------------------
ì´ë ‡ê²Œ ì„¸ë¶€ ì‚¬í•­ì´ ì œëŒ€ë¡œ í‘œì‹œëœë‹¤

ì´ë ‡ê²Œ ì²« ë²ˆì§¸ ì„ë¬´ëŠ” ì™„ë£Œí–ˆë‹¤
	@GetMapping("/jpa/users")
	public List<User> retrieveAllUsers() {
		
		return repository.findAll();
	}
retrieveAllUsers()ëŠ” DBì™€ ì†Œí†µí•˜ê³  ìˆë‹¤ 

ë‹¤ìŒìœ¼ë¡œ ë„˜ì–´ê°€ì„œ retrieveUser()ë¥¼ ë³´ì 

------------------------------------------------------------------------------------------------------------------------


âº UserJpaResource í´ë˜ìŠ¤íŒŒì¼


package com.in28minutes.rest.webservices.restfulwebservices.user;

import static org.springframework.hateoas.server.mvc.WebMvcLinkBuilder.*;

import java.net.*;
import java.util.*;

import org.springframework.hateoas.*;
import org.springframework.hateoas.server.mvc.*;
import org.springframework.http.*;
import org.springframework.web.bind.annotation.*;
import org.springframework.web.servlet.support.*;

import com.in28minutes.rest.webservices.restfulwebservices.jpa.*;

import jakarta.validation.*;

@RestController
public class UserJpaResource {

	private UserDaoService service;
	
	private UserRepository repository;
	
	public UserJpaResource(UserDaoService service, UserRepository repository) {
		this.service = service;
		this.repository = repository;
	}

	@GetMapping("/jpa/users")
	public List<User> retrieveAllUsers() {
		
		return repository.findAll();
	}
	
	//	http://localhost:8080/users
	
	//EntityModel
	//WebMvcLinkBuilder
	
	@GetMapping("/jpa/users/{id}")
	public EntityModel<User> retrieveUser(@PathVariable int id) {

    //5: service.findOne(id)ì—ì„œ serviceë¥¼ repositoryë¡¤ ë°”ê¾¸ê² ë‹¤, ê·¸ëŸ°ë° repositoryì—ëŠ” findOne()ì´ë¼ëŠ” ë©”ì„œë“œê°€ ì—†ë‹¤ findById()ë§Œ ìˆë‹¤ 
    //repository.findById(id)ë¡œ ë°”ê¾¸ë©´ ë³´ë‹¤ì‹œí”¼ Optional<User>ë¥¼ ë°˜í™˜í•œë‹¤ê³  ëœ¬ë‹¤ ( Type mismatch: cannot convert from Optional<User> to User ) 
    //Userì˜ íƒ€ì…ì„ Optional<User>ë¡œ ë°”ê¿”ì¤€ë‹¤ ( User user = service.findById(id); => Optional<User> user = repository.findById(id);)
    //ì´ë ‡ê²Œ Optional<User>ê°€ ëë‹¤
		Optional<User> user = repository.findById(id);

    //5-1: ì´ì œ ë°˜í™˜ë˜ëŠ” ê²Œ ì—†ëŠ”ì§€ í™•ì¸í•  ë•ŒëŠ” if(user==null)ëŒ€ì‹  if(user.isEmpty())ë¥¼ í•˜ë©´ ë˜ê² ì§€, userê°€ ë¹ˆ ê°’ì´ë©´ UserNotFoundExceptionì„ ë°œìƒì‹œí‚¬ ê²ƒì´ë‹¤
		if(user.isEmpty())
			throw new UserNotFoundException("id:"+id);

    //5-2: Optionalì—ì„œ User ê°ì²´ë¥¼ ê°€ì ¸ì˜¤ë ¤ë©´ user.get()ì„ í•˜ë©´ ëœë‹¤, 
		EntityModel<User> entityModel = EntityModel.of(user.get());
		
		WebMvcLinkBuilder link = linkTo(methodOn(this.getClass()).retrieveAllUsers());
		entityModel.add(link.withRel("all-users"));
		
		return entityModel;

	}
    //ë¡œì§ ì„¤ëª…: ê°„ë‹¨íˆ ìˆ˜ì •ë§Œ í•˜ê³  ìˆë‹¤ findById ë©”ì„œë“œë¥¼ ì¼ê³  user.isEmpty()ë¥¼ ì¨ì„œ íŠ¹ì • idì— í•´ë‹¹í•˜ëŠ” ì‚¬ìš©ìê°€ ì—†ëŠ”ì§€ í™•ì¸í•œë‹¤
    //ì°¸ì´ë©´ UserNotFoundExcptionì„ ë°œìƒì‹œí‚¤ê³  ê±°ì§“ì´ë©´ user.get()ì„ ì‹¤í–‰í•´ ëŠ˜ í•˜ë˜ ëŒ€ë¡œ entityModelì„ ìƒì„±í•œë‹¤

	@DeleteMapping("/jpa/users/{id}")
	public void deleteUser(@PathVariable int id) {
		service.deleteById(id);
		
	}
	
	@PostMapping("/jpa/users")
	public ResponseEntity<User> createUser(@Valid @RequestBody User user) {
		User savedUser = service.save(user);
		// /users/4 => /users /{id},  user.getID
		URI location = ServletUriComponentsBuilder.fromCurrentRequest()
						.path("{id}")
						.buildAndExpand(savedUser.getId())
						.toUri();  
		
		return ResponseEntity.created(location).build();
	}
}

------------------------------------------------------------------------------------------------------------------------

ì´ì œ localhost:8080/jpa/users/1 ì„ ì‹¤í–‰í•´ë³´ì

------------------------------------------------------------------------------------------------------------------------

ğŸŒ localhost:8080/jpa/users/1 ì‚¬ì´íŠ¸í™”ë©´ ==> 

{
  "timestamp": "2024-06-07T20:15:02.4589636",
  "message": "id:1",
  "details": "uri=/jpa/users/1"
}
------------------------------------------------------------------------------------------------------------------------
ì•—! ì˜¤ë¥˜ê°€ ë‚¬ë‹¤ ì™œì¼ê¹Œ?
id ê°€ 1ì¸ ì‚¬ìš©ìëŠ” ì—†ê¸°ë•Œë¬¸ì´ë‹¤

ì‚¬ìš©ì idëŠ” 10001ì´ì—ˆì§€

localhost:8080/jpa/users/10001ì„ ì…ë ¥í•˜ê² ë‹¤

------------------------------------------------------------------------------------------------------------------------

ğŸŒ localhost:8080/jpa/users/10001 ì‚¬ì´íŠ¸í™”ë©´ ==> 

{
  "user_name": "Ranga",
    "birth_date": "2024-06-07",
    "_links": {
      "all-users": {
      "href": "http://localhost:8080/jpa/users"
    }
  }
}
------------------------------------------------------------------------------------------------------------------------
ì´ì œ ì‘ë‹µì´ ì œëŒ€ë¡œ ë°˜í™˜í•œë‹¤ 


ì§€ê¸ˆ ê¹Œì§€ëŠ” UserRepositoryë¥¼ ìƒì„±í•˜ê³  ëª‡ëª‡ REST APIì—ì„œ ì‚¬ìš©í•´ë´¤ë‹¤

ì´ì œ deleteUser ë©”ì„œë“œë¥¼ ì‚´í´ë³´ë‹¤ ì•„ì£¼ ì‰¬ìš¸ê²ƒì´ë‹¤

------------------------------------------------------------------------------------------------------------------------



âº UserJpaResource í´ë˜ìŠ¤íŒŒì¼



package com.in28minutes.rest.webservices.restfulwebservices.user;

import static org.springframework.hateoas.server.mvc.WebMvcLinkBuilder.*;

import java.net.*;
import java.util.*;

import org.springframework.hateoas.*;
import org.springframework.hateoas.server.mvc.*;
import org.springframework.http.*;
import org.springframework.web.bind.annotation.*;
import org.springframework.web.servlet.support.*;

import com.in28minutes.rest.webservices.restfulwebservices.jpa.*;

import jakarta.validation.*;

@RestController
public class UserJpaResource {

	private UserDaoService service;
	
	private UserRepository repository;
	
	public UserJpaResource(UserDaoService service, UserRepository repository) {
		this.service = service;
		this.repository = repository;
	}

	@GetMapping("/jpa/users")
	public List<User> retrieveAllUsers() {
		
		return repository.findAll();
	}
	
	//	http://localhost:8080/users
	
	//EntityModel
	//WebMvcLinkBuilder
	
	@GetMapping("/jpa/users/{id}")
	public EntityModel<User> retrieveUser(@PathVariable int id) {
		Optional<User> user = repository.findById(id);
		
		if(user.isEmpty())
			throw new UserNotFoundException("id:"+id);
		
		EntityModel<User> entityModel = EntityModel.of(user.get());
		
		WebMvcLinkBuilder link = linkTo(methodOn(this.getClass()).retrieveAllUsers());
		entityModel.add(link.withRel("all-users"));
		
		return entityModel;

	}

  //6: service.deleteById(id)ë¥¼ repository.deleteById(id)ë¡œ ìˆ˜ì •í•˜ê¸°ë§Œ í•˜ë©´ ëœë‹¤ ì´ê±°ë§Œ ë°”ê¾¸ë©´ ë êº¼ ê°™ë‹¤ ê·¸ë¦¬ê³  ì´ì œ ì‹¤í–‰í•´ë³´ì
	@DeleteMapping("/jpa/users/{id}")
	public void deleteUser(@PathVariable int id) {
		repository.deleteById(id);
		
	}
	
	@PostMapping("/jpa/users")
	public ResponseEntity<User> createUser(@Valid @RequestBody User user) {
		User savedUser = service.save(user);
		// /users/4 => /users /{id},  user.getID
		URI location = ServletUriComponentsBuilder.fromCurrentRequest()
						.path("{id}")
						.buildAndExpand(savedUser.getId())
						.toUri();  
		
		return ResponseEntity.created(location).build();
	}
}
------------------------------------------------------------------------------------------------------------------------

Talend API Testerì—ì„œ ì‹¤í–‰í•´ë³´ê² ë‹¤

------------------------------------------------------------------------------------------------------------------------

ğŸ–‡ Talend API Tester í™”ë©´ ==>    (ë” ìì„¸í•œê±´ í¬ë¡¬ í™•ì¥í”„ë¡œê·¸ë¨ Talend API Tester ì‹¤í–‰í•´ì„œ í™•ì¸..)

  METHOD                SCHEME :// HOST [ ":" PORT ] [ PATH [ "?" QUERY ]]
  ______________      ____________________________________________________________    ___________________
 | DELETE  | â–¼  |    |    http://localhost:8080/jpa/users/10001                   |  |  âœˆ Send       | â–½ |
  â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾      â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾    â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
                        â–¶ QUERY PARAMETERS

  HEADERS   â¬‡                   | Form â–¼ |      â—€ | â–¶  BODY                                   | Text â–¼ |
â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾         |   â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
   ______________   ___________________________   |   
â˜‘ | Accept       |:| application/xml      | ğŸ§ª |  |       XHR does not allow payload for GET request.
   â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾   â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾   |
  ______________                                  |                              
 ( + Add header )   ğŸ— Add authorization     ğŸ—‘    |                                                          
  â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾                                  | 
                                                  |
 â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾   â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
                                                

------------------------------------------------------------------------------------------------------------------------

10001ì„ DELETE í•  ê²ƒì´ë‹¤                                          | 
ê·¸ê²Œ ìš°ë¦¬ê°€ í•  ì‘ì—…ì´ë‹¤ Sendë¥¼ í´ë¦­                                |
                                                                 V
------------------------------------------------------------------------------------------------------------------------

ğŸ–‡ Talend API Tester í™”ë©´ ==>    (ë” ìì„¸í•œê±´ í¬ë¡¬ í™•ì¥í”„ë¡œê·¸ë¨ Talend API Tester ì‹¤í–‰í•´ì„œ í™•ì¸..)


  Response
â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
  200                (ì´ˆë¡ ë°”íƒ•)
___________________________________________________________________________________________________

  HEADERS                     | pretty â–¼ |  â—€ | â–¶  BODY                                 | pretty â–¼ |
â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾     |   â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
                                              |
Content-Type:	application/xml;charset=UTF-8   |                                                                
Date: Fri, 07 Jun 2024 11:23:50 GMT 	        |                                                                                
Keep-Alive:	timeout=60                        |                       No Content                           
Connection:	keep-alive                        |                                       
                                              |                  
â–¶ COMPLETE REQUEST HEADERS                    |                                                                                                                    
                                              |                                                                                                                  
                                              |                                           
                                                                                                    
                                                 ğŸ“„ copy                                                          

------------------------------------------------------------------------------------------------------------------------
ì•„ë¬´ ì½˜í…ì¸ ë„ ë°˜í™˜ë˜ì§€ ì•ŠëŠ”ë‹¤

ëŒì•„ê°€ì„œ localhost:8080/jpa/usersë¡œ ë“¤ì–´ê°€ë©´

------------------------------------------------------------------------------------------------------------------------

ğŸŒ localhost:8080/jpa/users ì‚¬ì´íŠ¸í™”ë©´ ==> 


[
  {
    "id": 10002,
    "user_name": "Ravi",
    "birth_date": "2024-06-07"
  },
  {
    "id": 10003,
    "user_name": "Sathish",
    "birth_date": "2024-06-07"
  }
]

------------------------------------------------------------------------------------------------------------------------

10002ì™€ 10003ë°–ì— ì—†ë‹¤, 10001ì€ ì‚­ì œëë‹¤

ì•„ì£¼ ì¢‹ë‹¤

ë§ˆì§€ë§‰ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•  ê±´ service.save(user)ì´ë‹¤

------------------------------------------------------------------------------------------------------------------------


âº UserJpaResource í´ë˜ìŠ¤íŒŒì¼


package com.in28minutes.rest.webservices.restfulwebservices.user;

import static org.springframework.hateoas.server.mvc.WebMvcLinkBuilder.*;

import java.net.*;
import java.util.*;

import org.springframework.hateoas.*;
import org.springframework.hateoas.server.mvc.*;
import org.springframework.http.*;
import org.springframework.web.bind.annotation.*;
import org.springframework.web.servlet.support.*;

import com.in28minutes.rest.webservices.restfulwebservices.jpa.*;

import jakarta.validation.*;

@RestController
public class UserJpaResource {

	private UserDaoService service;
	
	private UserRepository repository;
	
	public UserJpaResource(UserDaoService service, UserRepository repository) {
		this.service = service;
		this.repository = repository;
	}

	@GetMapping("/jpa/users")
	public List<User> retrieveAllUsers() {
		
		return repository.findAll();
	}
	
	//	http://localhost:8080/users
	
	//EntityModel
	//WebMvcLinkBuilder
	
	@GetMapping("/jpa/users/{id}")
	public EntityModel<User> retrieveUser(@PathVariable int id) {
		Optional<User> user = repository.findById(id);
		
		if(user.isEmpty())
			throw new UserNotFoundException("id:"+id);
		
		EntityModel<User> entityModel = EntityModel.of(user.get());
		
		WebMvcLinkBuilder link = linkTo(methodOn(this.getClass()).retrieveAllUsers());
		entityModel.add(link.withRel("all-users"));
		
		return entityModel;

	}

	@DeleteMapping("/jpa/users/{id}")
	public void deleteUser(@PathVariable int id) {
		repository.deleteById(id);
		
	}
	
	@PostMapping("/jpa/users")
	public ResponseEntity<User> createUser(@Valid @RequestBody User user) {

    //7: service.save(user);ì—ì„œ repository.save(user);ë¡œ ìˆ˜ì •í•˜ê² ë‹¤, ì´ê±´ ìƒˆ ì‚¬ìš©ìë¥¼ ìƒì„±í•œë‹¤ 
		User savedUser = repository.save(user);

		URI location = ServletUriComponentsBuilder.fromCurrentRequest()
						.path("{id}")
						.buildAndExpand(savedUser.getId())
						.toUri();  
		
		return ResponseEntity.created(location).build();
	}
}

------------------------------------------------------------------------------------------------------------------------

Talend API Testerì—ì„œ ì‹¤ì œë¡œ POST ìš”ì²­ì„ í•´ë³´ì

------------------------------------------------------------------------------------------------------------------------

ğŸ–‡ Talend API Tester í™”ë©´ ==>    (ë” ìì„¸í•œê±´ í¬ë¡¬ í™•ì¥í”„ë¡œê·¸ë¨ Talend API Tester ì‹¤í–‰í•´ì„œ í™•ì¸..)

  METHOD                SCHEME :// HOST [ ":" PORT ] [ PATH [ "?" QUERY ]]
  ______________      ____________________________________________________________    ___________________
 | POST    | â–¼  |    |    http://localhost:8080/jpa/users                         |  |  âœˆ Send       | â–½ |
  â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾      â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾    â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
                        â–¶ QUERY PARAMETERS

  HEADERS   â¬‡                   | Form â–¼ |      â—€ | â–¶  BODY                                   | Text â–¼ |
â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾         |   â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
   ______________   ___________________________   |   
â˜‘ | Content-Type |:| application/json     | ğŸ§ª |  |     {
   â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾   â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾   |        "name": "Ravi v2",
  ______________                                  |        "birthDate": "1997-08-11"                         
 ( + Add header )   ğŸ— Add authorization     ğŸ—‘    |      }                                                    
  â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾                                  | 
                                                  |
 â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾   â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
                                                

------------------------------------------------------------------------------------------------------------------------
/jpa/usersì— í•  ê²ƒì´ë‹¤ localhost:8080/jpa/usersì§€
ì´ë¦„ê³¼ ìƒë…„ì›”ì¼ì„ ì§€ì •í•˜ê² ë‹¤ "name": "Ravi v2", "birthdate": "1997-08-11"ì²˜ëŸ¼
Content-Typeì€ application/json ì´ê³  ì´ë¦„ì€ "Ravi v2" ê·¸ë¦¬ê³  ìƒë…„ì›”ì¼ë„ ì§€ì •í–ˆë‹¤ 
                                                              |
                                                              V
------------------------------------------------------------------------------------------------------------------------

ğŸ–‡ Talend API Tester í™”ë©´ ==>    (ë” ìì„¸í•œê±´ í¬ë¡¬ í™•ì¥í”„ë¡œê·¸ë¨ Talend API Tester ì‹¤í–‰í•´ì„œ í™•ì¸..)


  Response
â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
  404                (ë¹¨ê°„ ë°”íƒ•)
___________________________________________________________________________________________________

  HEADERS                         | pretty â–¼ |    â—€ | â–¶  BODY                                 | pretty â–¼ |
â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾       |   â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
                                                    |                                                     
Vary:	             Origin                           |    {                                                         
Vary:              Access-Control-Request-Method    |      type": "about:blank",                                                                
Vary:	             Access-Control-Request-Headers   |      title": "Not Found",                                                   
Content-Type:	     application/problem+json         |      "status": 404,                                                 
Transfer-Encoding: chunked                          |      "detail": "No static resource jpa/users.",                                              
Date:	             Fri, 07 Jun 2024 15:38:16 GMT    |      "instance": "/jpa/users/"                                                                           
Keep-Alive:	       timeout=60                       |    }                                               
Connection:	       keep-alive                       |                                       
                                                    |                                                      
â–¶ COMPLETE REQUEST HEADERS                          |                                                                                                                    
                                                    |                                                                                                                  
                                                    |                                           
                                                                                                    
                                                      ğŸ“„ copy                                                          

------------------------------------------------------------------------------------------------------------------------

ì•ì„œ ë³´ë‚¸ POST ìš”ì²­ì„ ë³´ë©´, localhost:8080/jpa/usersì— ìš”ì²­ì„ ë³´ë‚¼ ë•Œ 
"name"ê³¼ "birthdate"ë¼ëŠ” ì†ì„± ì´ë¦„ì— ê°ê° ê°’ì„ ì§€ì •í–ˆë‹¤ 
ê·¸ë¦¬ê³  ì• ë‹¨ê³„ì—ì„œ 
--------------------------------------------------------

âº User í´ë˜ìŠ¤íŒŒì¼

@Entity(name = "user_details")
public class User {

	protected User() {
		
	}
	
	@Id
	@GeneratedValue
	private Integer id;
	
	@Size(min=2, message = "Name should have atleast 2 characters")
	@JsonProperty("user_name")
	private String name;
	
	@Past(message = "Birth Date should be in the past")
	@JsonProperty("birth_date")
	private LocalDate birthDate;
	....
--------------------------------------------------------
ì—¬ê¸°ì— @JsonPropertyë¥¼ ì¶”ê°€í•˜ëŠ” ì‘ì—…ì„ í–ˆë‹¤
@JsonProperty("user_name")ì™€ @JsonProperty("birth_date")ë¥¼ ì¶”ê°€í–ˆë‹¤ 
ë”°ë¼ì„œ ì˜µì…˜ì€ ë‘ ê°€ì§€ì´ë‹¤

POST ìš”ì²­ì„ ë³´ë‚¼ ë•Œ "user_name"ê³¼ "birth_date"ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜
@JsonPropertyë¥¼ ì£¼ì„ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ë‹¤
ìš°ë¦° ì—¬ê¸°ì„œ ì£¼ì„ ì²˜ë¦¬ë¥¼ í•˜ê² ë‹¤

------------------------------------------------------------------------------------------------------------------------


âº User í´ë˜ìŠ¤íŒŒì¼


package com.in28minutes.rest.webservices.restfulwebservices.user;

import java.time.*;

import com.fasterxml.jackson.annotation.*;

import jakarta.persistence.*;
import jakarta.validation.constraints.*;

@Entity(name = "user_details")
public class User {

	protected User() {
		
	}
	
	@Id
	@GeneratedValue
	private Integer id;
	
	@Size(min=2, message = "Name should have atleast 2 characters")
  //8: @JsonProperty ë¶€ë¶„ì„ ì£¼ì„ì²˜ë¦¬ í•˜ê² ë‹¤
//	@JsonProperty("user_name")
	private String name;
	
	@Past(message = "Birth Date should be in the past")
  //8 ê³„ì†: ì´ ê°’ë“¤ì„ ì£¼ì„ ì²˜ë¦¬í•œë‹¤, ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì¬ì‹œì‘ë  ê²ƒì´ë‹¤
//	@JsonProperty("birth_date")
	private LocalDate birthDate;
	
	public User(Integer id, String name, LocalDate birthDate) {
		super();
		this.id = id;
		this.name = name;
		this.birthDate = birthDate;
	}

	public Integer getId() {
		return id;
	}

	public void setId(Integer id) {
		this.id = id;
	}

	public String getName() {
		return name;
	}

	public void setName(String name) {
		this.name = name;
	}

	public LocalDate getBirthDate() {
		return birthDate;
	}

	public void setBirthDate(LocalDate birthDate) {
		this.birthDate = birthDate;
	}

	@Override
	public String toString() {
		return "User [id=" + id + ", name=" + name + ", birthDate=" + birthDate + "]";
	}
	
}
------------------------------------------------------------------------------------------------------------------------

ìƒˆë¡œ ê³ ì¹¨ í•˜ë©´ ì´ì „ ê°’ì¸ "name"ê³¼ "birthdate"ê°€ ê·¸ëŒ€ë¡œ ìˆë‹¤, ì¢‹ë‹¤

------------------------------------------------------------------------------------------------------------------------

ğŸŒ http://localhost:8080/jpa/users ì‚¬ì´íŠ¸í™”ë©´ ==>


[
  {
    "id": 10001,
    "name": "Ranga",
    "birthDate": "2024-06-08"
  },
  {
    "id": 10002,
    "name": "Ravi",
    "birthDate": "2024-06-08"
  },
  {
    "id": 10003,
    "name": "Sathish",
    "birthDate": "2024-06-08"
  }
]

------------------------------------------------------------------------------------------------------------------------

ì´ì œ Tallend API Testerë¡œ ê°€ì„œ ì•„ê¹Œ ì…ë ¥í•œ ë³¸ë¬¸ì„ ì‚¬ìš©í•˜ë©´ ëœë‹¤

------------------------------------------------------------------------------------------------------------------------

ğŸ–‡ Talend API Tester í™”ë©´ ==>    (ë” ìì„¸í•œê±´ í¬ë¡¬ í™•ì¥í”„ë¡œê·¸ë¨ Talend API Tester ì‹¤í–‰í•´ì„œ í™•ì¸..)

  METHOD                SCHEME :// HOST [ ":" PORT ] [ PATH [ "?" QUERY ]]
  ______________      ____________________________________________________________    ___________________
 | POST    | â–¼  |    |    http://localhost:8080/jpa/users                         |  |  âœˆ Send       | â–½ |
  â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾      â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾    â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
                        â–¶ QUERY PARAMETERS

  HEADERS   â¬‡                   | Form â–¼ |      â—€ | â–¶  BODY                                   | Text â–¼ |
â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾         |   â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
   ______________   ___________________________   |   
â˜‘ | Content-Type |:| application/json     | ğŸ§ª |  |     {
   â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾   â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾   |        "name": "Ravi v2",
  ______________                                  |        "birthDate": "1997-08-11"                         
 ( + Add header )   ğŸ— Add authorization     ğŸ—‘    |      }                                                    
  â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾                                  | 
                                                  |
 â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾   â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
                                                

------------------------------------------------------------------------------------------------------------------------
localhost:8080/jpa/usersì— POST ìš”ì²­ì„ ë³´ë‚¼ í…ë° 
Content-Typeì€ aplication/json, ì´ë¦„ì€ "Ravi v2" ìƒë…„ì›”ì¼ì€ 1997-08-11 ì´ë‹¤
Sendë¥¼ í´ë¦­í•˜ë©´ 
          |
          V
------------------------------------------------------------------------------------------------------------------------

ğŸ–‡ Talend API Tester í™”ë©´ ==>    (ë” ìì„¸í•œê±´ í¬ë¡¬ í™•ì¥í”„ë¡œê·¸ë¨ Talend API Tester ì‹¤í–‰í•´ì„œ í™•ì¸..)


  Response
â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
  201                (ì´ˆë¡ ë°”íƒ•)
___________________________________________________________________________________________________

  HEADERS                     | pretty â–¼ |  â—€ | â–¶  BODY                                 | pretty â–¼ |
â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾     |   â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
                                              |
Location:	http://localhost:8080/jpa/users1    |                                                                
Content-Length:	0 byte                        |
Date: Fri, 07 Jun 2024 11:23:50 GMT 	        |                                                                                
Keep-Alive:	timeout=60                        |                       No Content                           
Connection:	keep-alive                        |                                       
                                              |                  
â–¶ COMPLETE REQUEST HEADERS                    |                                                                                                                    
                                              |                                                                                                                  
                                              |                                           
                                                                                                    
                                                 ğŸ“„ copy                                                          

------------------------------------------------------------------------------------------------------------------------
201 ì‘ë‹µì´ ë°˜í™˜ëœë‹¤, ìƒˆë¡œê³ ì¹¨ í•˜ì
                            |
                            V
------------------------------------------------------------------------------------------------------------------------

ğŸŒ http://localhost:8080/jpa/users ì‚¬ì´íŠ¸í™”ë©´ ==>


[
  {
    "id": 1,
    "name": "Ravi v2",
    "birthDate": "1997-08-11"
  },
  {
    "id": 10001,
    "name": "Ranga",
    "birthDate": "2024-06-08"
  },
  {
    "id": 10002,
    "name": "Ravi",
    "birthDate": "2024-06-08"
  },
  {
    "id": 10003,
    "name": "Sathish",
    "birthDate": "2024-06-08"
  }
]

------------------------------------------------------------------------------------------------------------------------
ì¢‹ë‹¤ 
ìƒë…„ì›”ì¼ì´ "1997-08-11"ì¸ ìƒˆ ì‚¬ìš©ì "Ravi v2"ê°€ ìƒê²¼ë‹¤






ì´ë²ˆ ë‹¨ê³„ì—ì„  UserJpaResourceë¥¼ UserRpositoryë¡œ ì™„ì „íˆ ë°”ê¿¨ë‹¤
UserDaoServiceëŠ” ë”ëŠ” ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ 

------------------------------------------------------------------------------------------------------------------------


âºUserJpaResource í´ë˜ìŠ¤íŒŒì¼

package com.in28minutes.rest.webservices.restfulwebservices.user;

import static org.springframework.hateoas.server.mvc.WebMvcLinkBuilder.*;

import java.net.*;
import java.util.*;

import org.springframework.hateoas.*;
import org.springframework.hateoas.server.mvc.*;
import org.springframework.http.*;
import org.springframework.web.bind.annotation.*;
import org.springframework.web.servlet.support.*;

import com.in28minutes.rest.webservices.restfulwebservices.jpa.*;

import jakarta.validation.*;

@RestController
public class UserJpaResource {

//9: ì´ì¤„ì„ ì‚­ì œí•˜ê³  UserDaoService serviceë„ ì‚­ì œí•˜ê² ë‹¤ (ì—¬ê¸°ì„  ì£¼ì„ì²˜ë¦¬ í–ˆì§€ë§Œ IDEì—ì„  ì‚­ì œí•¨)
//	private UserDaoService service;
	
	private UserRepository repository;
	
	public UserJpaResource(UserDaoService service, UserRepository repository) {
//9-1: ì´ê²ƒë„ ì‚­ì œì²˜ë¦¬, ê·¸ë¦¬ê³  ì €ì¥
//		this.service = service;
		this.repository = repository;
	}
...
------------------------------------------------------------------------------------------------------------------------
ë³´ë‹¤ì‹œí”¼ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ê³  ëª¨ë“ ê²Œ ì»´íŒŒì¼ëœë‹¤
