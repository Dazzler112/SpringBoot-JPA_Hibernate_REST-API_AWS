

REST APIë¥¼ êµ¬í˜„í•  ë•Œ ì¤‘ìš”í•œ ê²ƒì€ ì•Œë§ëŠ” ì‘ë‹µ ìƒíƒœë¥¼ ë°˜í™˜í•˜ëŠ” ê²ƒì´ë‹¤
localhost:8080/users/1ìœ¼ë¡œ ê¸°ì¡´ ì‚¬ìš©ì ì •ë³´ë¥¼ ì¡°íšŒí•˜ë©´ ì•Œë§ëŠ” ì‘ë‹µì´ ë°˜í™˜ëœë‹¤

----------------------------------------------------------------------------------------------------------------------

ğŸŒ http://localhost:8080/users/1 ì‚¬ì´íŠ¸í™”ë©´ ==>

{
  "id": 1,
  "name": "Adam",
  "birthDate": "1994-05-22"
}

----------------------------------------------------------------------------------------------------------------------

ë°˜í™˜ë˜ëŠ” ì‘ë‹µ ìƒíƒœëŠ” 200ì¼ ê²ƒì´ê³ , ì¢‹ë‹¤ 

ë§Œì•½ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì‚¬ìš©ìë¥¼ ì¡°íšŒí•˜ë©´ ì–´ë–¨ê¹Œ?
http://localhost:8080/users/101 ë¡œ í•˜ë©´

----------------------------------------------------------------------------------------------------------------------


ğŸŒ http://localhost:8080/users/101 ì‚¬ì´íŠ¸í™”ë©´ ==>


Whitelabel Error Page
This application has no explicit mapping for /error, so you are seeing this as a fallback.

Wed May 22 17:38:10 KST 2024
There was an unexpected error (type=Internal Server Error, status=500).
No value present
java.util.NoSuchElementException: No value present
	at java.base/java.util.Optional.get(Optional.java:143)
	at com.in28minutes.rest.webservices.restfulwebservices.user.UserDaoService.findOne(UserDaoService.java:37)
	at com.in28minutes.rest.webservices.restfulwebservices.user.UserResource.retrieveUser(UserResource.java:28)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at........ 

----------------------------------------------------------------------------------------------------------------------

í™”ì´íŠ¸ë¼ë²¨ ì—ëŸ¬ í˜ì´ì§€ê°€ í‘œì‹œëœë‹¤
ì˜ˆì™¸ ì¶”ì  ë¡œê·¸ë„ ì°í˜€ ìˆê³ , ì¢‹ì§€ ì•Šë‹¤ 
ì´ë²ˆ ì‹œê°„ì—” ì´ ë¶€ë¶„ì„ ê°œì„ í•´ ë³´ë ¤ê³  í•œë‹¤

	public User findOne(int id) {
		Predicate<? super User> predicate = user -> user.getId().equals(id);
		return users.stream().filter(predicate).findFirst().get();
	}

ë¨¼ì € serviceì˜ findOne() ë©”ì†Œë“œë¥¼ í™•ì¸í•´ ë³´ëŠ”ë° ì˜ˆì™¸ê°€ ì–´ë””ì„œ ë°œìƒí•œ ê±°ì§€?
	at java.base/java.util.Optional.get(Optional.java:143)
Optional.getì´ë‹¤
ë°”ë¡œ ì´ ë©”ì†Œë“œì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí•œ ê²ƒì´ë‹¤ ( return users.stream().filter(predicate).findFirst().get(); )
ì¡°ê±´ì— ë§ëŠ” í•­ëª©ì´ ì—†ë‹¤ëŠ” ê²ƒì´ë‹¤, ê·¸ëŸ¬ë‹ˆ ì²« ë²ˆì§¸ì— í•´ë‹¹í•˜ëŠ” í•­ëª©ë„ ì—†ì§€
ì´ëŸ° ìƒí™©ì—ì„  ì´ ë©”ì†Œë“œì—ì„œ ì˜ˆì™¸ê°€ ë°œìƒí•œë‹¤ 
.get()ë©”ì†Œë“œ ìœ„ì— ë§ˆìš°ìŠ¤ë¥¼ ë‘ë©´ ì •ë³´ê°€ ë‚˜ì˜¤ëŠ”ë°
( If a value is present, returns the value, otherwise throws NoSuchElementException. )
ê°’ì´ ì¡´ì¬í•œë‹¤ë©´ ê°’ì„ ë°˜í™˜í•˜ê³  ì—†ë‹¤ë©´ NoSuchElementExceptionì´ ë°œìƒí•œë‹¤ê³  ë‚˜ì™€ìˆë‹¤
ì´ê±¸ ì˜ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ orElseë¥¼ ë¶™ì—¬ì£¼ê² ë‹¤

----------------------------------------------------------------------------------------------------------------------



âº UserDaoService í´ë˜ìŠ¤íŒŒì¼



package com.in28minutes.rest.webservices.restfulwebservices.user;

import java.time.*;
import java.util.*;
import java.util.function.*;

import org.springframework.stereotype.*;

@Component
public class UserDaoService {
    // JPA/Hibernate > Database
    // UserDaoService > Static List
	
	private static List<User> users = new ArrayList<>();
	
//	private static int usersCount = 3;
	private static int usersCount = 0;
	
	static {
		users.add(new User(++usersCount, "Adam", LocalDate.now().minusYears(30)));
		users.add(new User(++usersCount, "Eve", LocalDate.now().minusYears(25)));
		users.add(new User(++usersCount, "Jim", LocalDate.now().minusYears(20)));
	}
	
	public List<User> findAll() {
		return users;
	}
	
	public User save(User user) {
		user.setId(++usersCount);
		users.add(user);
		return user;
	}
	
	public User findOne(int id) {
		Predicate<? super User> predicate = user -> user.getId().equals(id);

    //1: ì²˜ë¦¬ë¥¼ ìœ„í•´ .get() => .orElse()ë¥¼ ë¶™ì—¬ì£¼ê² ë‹¤, orElseê°€ í•˜ëŠ” ì¼ì´ ë­ì§€? ( If a value is present, returns the value, otherwise returns other. ) ê°’ì´ ì¡´ì¬í•œë‹¤ë©´ ê°’ì„ ë°˜í™˜í•˜ê³  ì—†ìœ¼ë©´ ìš°ë¦¬ê°€ ì •ì˜í•˜ëŠ” ê·¸ ë‹¤ë¥¸ ê°’ì„ ë°˜í™˜í•œë‹¤
    //ê·¸ëŸ¼ ì—¬ê¸°ì„  orElseë¡œ nullì„ ë°˜í™˜í•˜ê²Œ í•˜ê² ë‹¤, findOne()ë©”ì†Œë“œì—ì„œ nullì„ ë°˜í™˜í•˜ê²Œ ëœë‹¤ ì´ëŸ¬ë©´ ëœ ê±¸ê¹Œ? í™•ì¸í•´ë³´ì
		return users.stream().filter(predicate).findFirst().orElse(null);
	}
	
}

----------------------------------------------------------------------------------------------------------------------
                                                                                      |
                                                                                      V
----------------------------------------------------------------------------------------------------------------------


ğŸŒ http://localhost:8080/users/101 ì‚¬ì´íŠ¸í™”ë©´ ==>





----------------------------------------------------------------------------------------------------------------------
ìƒˆë¡œ ê³ ì¹¨ì„ í•´ì„œ http://localhost:8080/users/101ì„ ì‹¤í–‰í•´ ë³´ë©´ 
í™”ë©´ì— ì•„ë¬´ ê²ƒë„ ë‚˜ì˜¤ì§€ ì•ŠëŠ”ë‹¤
ì‘ë‹µì´ ì—†ë‹¤ 

ê²€ì‚¬ë¥¼ í•´ì„œ í™•ì¸í•´ ë³´ì
ë„¤íŠ¸ì›Œí¬ë¥¼ ì„ íƒí•˜ê³  ìƒˆë¡œê³ ì¹¨ì„ í•˜ë©´ ì‘ë‹µ ìƒíƒœëŠ” 200ì´ë‹¤
ì„±ê³µì€ í–ˆë‹¤ê³  í•˜ëŠ”ë° ëŒì•„ì˜¨ ë°ì´í„°ëŠ” ì—†ë‹¤, ì´ê±´ ê³ ì³ì•¼ê² ì§€

