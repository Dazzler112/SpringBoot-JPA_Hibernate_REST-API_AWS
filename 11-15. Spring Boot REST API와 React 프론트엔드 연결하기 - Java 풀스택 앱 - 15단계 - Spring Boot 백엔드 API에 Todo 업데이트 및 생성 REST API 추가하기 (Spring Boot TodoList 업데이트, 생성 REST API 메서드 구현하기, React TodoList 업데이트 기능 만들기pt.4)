

ì´ë²ˆ í•™ìŠµì—” ë°±ì—”ë“œ API
ì¦‰ REST APIë¥¼ ë‹¤ì‹œ ê°€ì ¸ì™€ì„œ Todo ì„¸ë¶€ì •ë³´ë¥¼ ì—…ë°ì´íŠ¸í•´ë³´ì
ê·¸ëŸ¼ ìš°ë¦¬ëŠ” Todo ì„¸ë¶€ì •ë³´ë¥¼ ì—…ë°ì´íŠ¸í•˜ê¸° ìœ„í•´ PutMappingì„ ë§Œë“¤ê±°ê³ 
ë¨¼ì € PutMappingì„ ë§Œë“¤ê³  ìƒˆë¡œìš´ Todoë¥¼ ë§Œë“œëŠ” ë°©ë²•ë„ ì´ë²ˆ ë‹¨ê³„ì—ì„œ ì•Œì•„ë³¼ ê²ƒì´ë‹¤

ê·¸ëŸ¼ @PutMapping("/users/{username}/todos/{id}")ë¶€í„° ì‹œì‘í•´ë³´ì

------------------------------------------------------------------------------------------------------------------

âº sts


âº TodoResource.java




package com.in28minutes.rest.webservices.restfulwebservices.todo;

import java.util.*;

import org.springframework.http.*;
import org.springframework.web.bind.annotation.*;

@RestController
public class TodoResource {

	private TodoService todoService;
	
	public TodoResource(TodoService todoService) {
		this.todoService = todoService;
	}
	
	@GetMapping("/users/{username}/todos")
	public List<Todo> retrieveTodos(@PathVariable String username) {
		return todoService.findByUsername(username);
	}
	
	@GetMapping("/users/{username}/todos/{id}")
	public Todo retrieveTodo(@PathVariable String username,
								   @PathVariable int id) {
		return todoService.findById(id);
	}
	
	@DeleteMapping("/users/{username}/todos/{id}")
	public ResponseEntity<Void> deleteTodo(@PathVariable String username,
								   @PathVariable int id) {
		todoService.deleteById(id);
		return ResponseEntity.noContent().build();
	}

  //1:@PutMapping("/users/{username}/todos/{id}")
	@PutMapping("/users/{username}/todos/{id}")

  //1-1: ë©”ì†Œë“œëª…ì€ updateTodo()ê°€ ë  ê²ƒì´ë‹¤, ì—…ë°ì´íŠ¸ë¥¼ í•˜ë ¤ê³  í•  ë•Œ PutMappingì„ ì‚¬ìš©í•˜ê³ , ì„í¬íŠ¸ë¥¼ ì •ë¦¬í•´ë³´ì, ê·¸ëŸ¼ importì— PutMappingì´ ë“¤ì–´ì˜¤ëŠ” ê±¸ ë³¼ ìˆ˜ ìˆë‹¤, ì¢‹ë‹¤
	public ResponseEntity<Void> updateTodo(@PathVariable String username,
								   @PathVariable int id) {
		todoService.deleteById(id);
		return ResponseEntity.noContent().build();
	}
}

------------------------------------------------------------------------------------------------------------------

ë„ˆê°€ ì—…ë°ì´íŠ¸ ìš”ì²­ì„ ë°›ì„ ë•ŒëŠ” ê·¸ ì—…ë°ì´íŠ¸ ìš”ì²­ê³¼ í•¨ê»˜ ë³¸ë¬¸ë„ ë°›ëŠ”ë‹¤
ìš°ë¦¬ê°€ Todoë¡œ ì—…ë°ì´íŠ¸í•˜ë ¤ëŠ” JSON íŒŒì¼ì€ ë­˜ê¹Œ?

------------------------------------------------------------------------------------------------------------------

âº sts


âº TodoResource.java



package com.in28minutes.rest.webservices.restfulwebservices.todo;

import java.util.*;

import org.springframework.http.*;
import org.springframework.web.bind.annotation.*;

@RestController
public class TodoResource {

	private TodoService todoService;
	
	public TodoResource(TodoService todoService) {
		this.todoService = todoService;
	}
	
	@GetMapping("/users/{username}/todos")
	public List<Todo> retrieveTodos(@PathVariable String username) {
		return todoService.findByUsername(username);
	}
	
	@GetMapping("/users/{username}/todos/{id}")
	public Todo retrieveTodo(@PathVariable String username,
								   @PathVariable int id) {
		return todoService.findById(id);
	}
	
	@DeleteMapping("/users/{username}/todos/{id}")
	public ResponseEntity<Void> deleteTodo(@PathVariable String username,
								   @PathVariable int id) {
		todoService.deleteById(id);
		return ResponseEntity.noContent().build();
	}
	
	@PutMapping("/users/{username}/todos/{id}")
	public ResponseEntity<Void> updateTodo(@PathVariable String username,
                    //2: ê·¸ëŸ¼ ë„ˆëŠ” @RequestBodyë¥¼ ë°›ê³  @RequestBody Todo todo ë¼ê³  í•´ì¤€ë‹¤, RequestBodyì˜ í˜•ì‹ì€ Todo Beanê³¼ ë¹„ìŠ·í•  ê²ƒì´ë‹¤ ê·¸ëŸ¼ ì„í¬íŠ¸ë¥¼ ì •ë¦¬í•´ë³´ì
                    //ê·¸ëŸ¼ org.springframework.web.bind.annotation.RequestBodyê°€ ë“¤ì–´ì˜¤ëŠ”ê±¸ ë³¼ê²ƒì´ë‹¤
								   @PathVariable int id, @RequestBody Todo todo) {
		todoService.deleteById(id);
		return ResponseEntity.noContent().build();
	}
}

------------------------------------------------------------------------------------------------------------------

ê·¸ëŸ¼ ìš°ë¦¬ê°€ Todoë¥¼ ì—…ë°ì´íŠ¸í•  ë•Œ ìš°ë¦° ì´ URLì— ìš”ì²­ì„ ì „ì†¡í•˜ê³ 
Todoì˜ ì½˜í…ì¸ ë¥¼ í•¨ê»˜ ì „ì†¡í•œë‹¤
@PathVariable String username ì´ê²Œ íŒ¨ìŠ¤ë³€ìˆ˜ì— ë§¤í•‘ë  ê²ƒì´ê³ (<={username}) @PathVariable int id id íŒ¨ìŠ¤ì— ë§¤í•‘ë  ê²ƒì´ë‹¤ (<={id})
ê·¸ë¦¬ê³  ë„ˆê°€ ì „ì†¡í•˜ëŠ” ë³¸ë¬¸ì€ todoì— ë§¤í•‘ë˜ì§€ (<= @RequestBody Todo todo)

------------------------------------------------------------------------------------------------------------------

âº sts


âº TodoResource.java



package com.in28minutes.rest.webservices.restfulwebservices.todo;

import java.util.*;

import org.springframework.http.*;
import org.springframework.web.bind.annotation.*;

@RestController
public class TodoResource {

	private TodoService todoService;
	
	public TodoResource(TodoService todoService) {
		this.todoService = todoService;
	}
	
	@GetMapping("/users/{username}/todos")
	public List<Todo> retrieveTodos(@PathVariable String username) {
		return todoService.findByUsername(username);
	}
	
	@GetMapping("/users/{username}/todos/{id}")
	public Todo retrieveTodo(@PathVariable String username,
								   @PathVariable int id) {
		return todoService.findById(id);
	}
	
	@DeleteMapping("/users/{username}/todos/{id}")
	public ResponseEntity<Void> deleteTodo(@PathVariable String username,
								   @PathVariable int id) {
		todoService.deleteById(id);
		return ResponseEntity.noContent().build();
	}
	
	@PutMapping("/users/{username}/todos/{id}")
	public ResponseEntity<Void> updateTodo(@PathVariable String username,
			@PathVariable int id, @RequestBody Todo todo) {

    //3: ê·¸ë¦¬ê³  ì—¬ê¸°ì„œ ìš°ë¦¬ëŠ” todoServiceë¼ê³  í•˜ê³  .updateTodo()ë©”ì„œë“œë¥¼ ë„£ì„ ê±°ê³ 
    //ê·¸ëŸ¼ ë„ˆëŠ” todoë¥¼ ë„£ì–´ì„œ updateTodo()ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ê²ƒì´ë‹¤ 
		todoService.updateTodo(todo);
		return ResponseEntity.noContent().build();
	}
}

------------------------------------------------------------------------------------------------------------------

ê·¸ëŸ¼ updateTodo()ë©”ì„œë“œë¥¼ ë³´ë©´, ê·¸ê²Œ í•˜ëŠ” ì¼ì´ ë­˜ê¹Œ?
-----------------------------
âº TodoService.java
...
	public void updateTodo(Todo todo) {
		deleteById(todo.getId());
		todos.add(todo);
	}
-----------------------------
ì´ Todo idë¥¼ ì´ìš©í•´ì„œ ê¸°ì¡´ì˜ Todoë¥¼ ì‚­ì œí•  ê±°ê³ , ê°€ê¸°ì— ìƒˆë¡œìš´ Todoë¥¼ ì¶”ê°€í•  ê²ƒì´ë‹¤
ì¢‹ì•„ ë³´ì¸ë‹¤


ì´ì œ ì—…ë°ì´íŠ¸ê°€ ëë‚˜ë©´ ë„ˆëŠ” ë‹¤ì–‘í•œ ë°©ì‹ìœ¼ë¡œ ì‘ë‹µì„ í•  ìˆ˜ ìˆëŠ”ë° 
ë„ˆëŠ” Todoì˜ ì½˜í…ì¸ ì™€ í•¨ê»˜ ì„±ê³µ ì‘ë‹µì„ ë¦¬í„´í•˜ë ¤ê³  í•œë‹¤

------------------------------------------------------------------------------------------------------------------

âº sts


âº TodoResource.java



package com.in28minutes.rest.webservices.restfulwebservices.todo;

import java.util.*;

import org.springframework.http.*;
import org.springframework.web.bind.annotation.*;

@RestController
public class TodoResource {

	private TodoService todoService;
	
	public TodoResource(TodoService todoService) {
		this.todoService = todoService;
	}
	
	@GetMapping("/users/{username}/todos")
	public List<Todo> retrieveTodos(@PathVariable String username) {
		return todoService.findByUsername(username);
	}
	
	@GetMapping("/users/{username}/todos/{id}")
	public Todo retrieveTodo(@PathVariable String username,
								   @PathVariable int id) {
		return todoService.findById(id);
	}
	
	@DeleteMapping("/users/{username}/todos/{id}")
	public ResponseEntity<Void> deleteTodo(@PathVariable String username,
			@PathVariable int id, @RequestBody Todo todo) {
		todoService.updateTodo(todo);
		return ResponseEntity.noContent().build();
	}
	
	@PutMapping("/users/{username}/todos/{id}")

        //4-1: returnì´ todoë‹ˆ ë¦¬í„´íƒ€ì…ë„ Todoë¡œ ë³€ê²½ (ResponseEntity<Void>ì—ì„œ Todoë¡œ ë³€ê²½...) ë¬¸ì œ ì—†ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì´ê³ 
	public Todo updateTodo(@PathVariable String username,
			@PathVariable int id, @RequestBody Todo todo) {
		todoService.deleteById(id);

    //4: ì¦‰, ë„ˆëŠ” ì—…ë°ì´íŠ¸ëœ Todoë¥¼ ë¦¬í„´í•  ê±°ê³ , ê·¸ëŸ¼ ë„ˆëŠ” return todoë¼ê³  í•˜ê³  ì„í¬íŠ¸ë¥¼ ì •ë¦¬í•  ê²ƒì´ë‹¤
		return todo;
	}
}
------------------------------------------------------------------------------------------------------------------

ê·¸ëŸ¼ í…ŒìŠ¤íŠ¸ë¥¼ í•´ë³´ì
Talend API Testerë¡œ ê°€ì„œ
íŠ¹ì •í•œ Todoì˜ ì„¸ë¶€ì •ë³´ë¥¼ ë°›ì•„ë³´ì
ê°€ë ¹ 1ë²ˆì˜ ì„¸ë¶€ì •ë³´ë¥¼ ì—…ë°ì´íŠ¸í•˜ë ¤ í•œë‹¤ê³  í•´ë³´ì
ê·¸ë¦¬ê³  Sendë¥¼ í´ë¦­í•œë‹¤

--------------------------------------------------------------------------------------------------------------------------------

ğŸ–‡ Talend API Tester í™”ë©´ ==>    (ë” ìì„¸í•œê±´ í¬ë¡¬ í™•ì¥í”„ë¡œê·¸ë¨ Talend API Tester ì‹¤í–‰í•´ì„œ í™•ì¸..)

  METHOD                SCHEME :// HOST [ ":" PORT ] [ PATH [ "?" QUERY ]]
  ______________      ____________________________________________________________    ___________________
 | GET     | â–¼  |    |    http://localhost:8080/users/in28minutes/todos/1         |  |  âœˆ Send       | â–½ |
  â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾      â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾    â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
                        â–¶ QUERY PARAMETERS
  HEADERS   â¬‡                   | Form â–¼ |   â—€ | â–¶  BODY                                   | Text â–¼ |
â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾     |   â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
   _______________     __________________      |    
â˜‘ | Accept        | : |application/json  | x   |    XHR does not allow payload for GET request.                           
   â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾     â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾      |                                   
  ______________                               |                                
 ( + Add header )  ğŸ— Add authorization     ğŸ—‘  |                                    
  â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾                               |                                                                       
                                               |    â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
                                                   Text JSON XML HTML | Format Body |
                                                    â˜‘ Enable body evaluation

                                   

--------------------------------------------------------------------------------------------------------------------------------
                                          |
                                          V
--------------------------------------------------------------------------------------------------------------------------------

ğŸ–‡ Talend API Tester í™”ë©´ ==>    (ë” ìì„¸í•œê±´ í¬ë¡¬ í™•ì¥í”„ë¡œê·¸ë¨ Talend API Tester ì‹¤í–‰í•´ì„œ í™•ì¸..)


  Response
â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
  200                (ì´ˆë¡ ë°”íƒ•)
___________________________________________________________________________________________________

  HEADERS                     | pretty â–¼ |      â—€ | â–¶  BODY                                 | pretty â–¼ |
â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾         |   â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
                                                  |
Vary:	Origin                                      |
Vary:	Access-Control-Request-Method               |     {
Vary:	Access-Control-Request-Headers              |       "id": 1,
Content-Type:	application/json                    |       "username": "in28minutes",
Transfer-Encoding:	chunked                       |       "description": "Get AWS Certified",
Date: Sun, 04 Aug 2024 05:38:19 GMT               |       "targetDate": "2034-08-04",
Keep-Alive:	timeout=60                            |       "done": false
Connection:	keep-alive                            |      }                                 
                                                  |                                                                                                                                                 
                                                  |                  
â–¶ COMPLETE REQUEST HEADERS                        |                                              
                                                  |

                                                  lines nums  ğŸ“„ copy              length: 106 bytes                                                    

--------------------------------------------------------------------------------------------------------------------------------

ê·¸ëŸ¬ë©´ ìš”ì²­ì˜ ë³¸ë¬¸ì´ ë‚˜ì˜¤ê³ 
ì´ê²Œ ë°”ë¡œ ë„ˆê°€ ë³µì‚¬í•˜ë ¤ëŠ” ìš”ì²­ì˜ ë³¸ë¬¸ì´ë‹¤
ì´ ë³¸ë¬¸ì„ ë³µì‚¬í• ê±°ê³ 
ì—¬ê¸° ìˆëŠ” copyë¥¼ í´ë¦­í•˜ê³  ë™ì¼í•œ URLì— PUT ìš”ì²­ì„ ì „ì†¡í•˜ë ¤ê³  í•œë‹¤
ë°©ê¸ˆ ë³µì‚¬í•œ ì´ id 1ë²ˆì˜ ë³¸ë¬¸ì„ ì „ì†¡í•  ê²ƒì´ë‹¤

--------------------------------------------------------------------------------------------------------------------------------

ğŸ–‡ Talend API Tester í™”ë©´ ==>    (ë” ìì„¸í•œê±´ í¬ë¡¬ í™•ì¥í”„ë¡œê·¸ë¨ Talend API Tester ì‹¤í–‰í•´ì„œ í™•ì¸..)

  METHOD                SCHEME :// HOST [ ":" PORT ] [ PATH [ "?" QUERY ]]
  ______________      ____________________________________________________________    ___________________
 | PUT     | â–¼  |    |    http://localhost:8080/users/in28minutes/todos/1         |  |  âœˆ Send       | â–½ |
  â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾      â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾    â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
                        â–¶ QUERY PARAMETERS
  HEADERS   â¬‡                   | Form â–¼ |   â—€ | â–¶  BODY                                   | Text â–¼ |
â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾     |   â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
   _______________     __________________      |    
â˜‘ | Accept        | : |application/json  | x   |    {                          
   â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾     â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾      |       "id": 1,                              
  ______________                               |       "username": "in28minutes",                          
 ( + Add header )  ğŸ— Add authorization     ğŸ—‘  |       "description": "Get AWS Certified 5",                             
  â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾                               |       "targetDate": "2033-08-04", 
                                               |       "done": false           
                                               |    }  
                                               |    â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
                                                   Text JSON XML HTML | Format Body |
                                                    â˜‘ Enable body evaluation

                                   

--------------------------------------------------------------------------------------------------------------------------------
usernameì€ in28minutesê³  descriptionì€ Get AWS Certifiedì´ë‹¤ ë’¤ì— 5ë¥¼ ë¶™ì—¬ë³´ì
ê·¸ë¦¬ê³  targetDateë„ ì—…ë°ì´íŠ¸í•´ë³´ì 2033ë…„ìœ¼ë¡œ í•˜ë ¤ê³  í•œë‹¤ Sendë¥¼ í´ë¦­í•œë‹¤
                                          |
                                          V
--------------------------------------------------------------------------------------------------------------------------------

ğŸ–‡ Talend API Tester í™”ë©´ ==>    (ë” ìì„¸í•œê±´ í¬ë¡¬ í™•ì¥í”„ë¡œê·¸ë¨ Talend API Tester ì‹¤í–‰í•´ì„œ í™•ì¸..)


  Response
â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
  200                (ì´ˆë¡ ë°”íƒ•)
___________________________________________________________________________________________________

  HEADERS                     | pretty â–¼ |      â—€ | â–¶  BODY                                 | pretty â–¼ |
â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾         |   â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
                                                  |
Vary:	Origin                                      |
Vary:	Access-Control-Request-Method               |     {
Vary:	Access-Control-Request-Headers              |       "id": 1,
Content-Type:	application/json                    |       "username": "in28minutes",
Transfer-Encoding:	chunked                       |       "description": "Get AWS Certified 5",
Date: Sun, 04 Aug 2024 05:45:37 GMT               |       "targetDate": "2033-08-04",
Keep-Alive:	timeout=60                            |       "done": false
Connection:	keep-alive                            |      }                                 
                                                  |                                                                                                                                                 
                                                  |                  
â–¶ COMPLETE REQUEST HEADERS                        |                                              
                                                  |

                                                  lines nums  ğŸ“„ copy              length: 106 bytes                                                    

--------------------------------------------------------------------------------------------------------------------------------

ì¢‹ë‹¤ 200ì´ ë‚˜ì™”ê³  
ê·¸ë¦¬ê³  ì—¬ê¸°ì— ìš”ì²­ì„ ì œì¤„í•´ë³´ì
ë¸Œë¼ìš°ì €ì—ì„œ ì œì¶œí•  ê±°ê³  

------------------------------------------------------------------------------------------------------------------

ğŸŒ http://localhost:8080/users/in28minutes/todos/1 ì‚¬ì´íŠ¸í™”ë©´ ==>

{
  "id": 1,
  "username": "in28minutes",
  "description": "Get AWS Certified 5",
  "targetDate": "2033-08-04",
  "done": false
}

------------------------------------------------------------------------------------------------------------------

ì´ë ‡ê²Œ 5ë¼ê³  ë‚˜ì˜¨ ê±¸ ë³¼ ìˆ˜ìˆë‹¤
ê·¸ë¦¬ê³  ì—…ë°ì´íŠ¸ëœ targetDateë„ ë³¼ ìˆ˜ ìˆì§€
ì¢‹ë‹¤ 
ì´ë ‡ê²Œ PUT ë©”ì„œë“œê°€ ì˜ ì‘ë™í•˜ê³  ìˆê³  


ì´ì œ POST ë©”ì„œë“œë„ ì‘ë™ì‹œì¼œ ë³´ì

POSTëŠ” í”íˆ ìƒˆë¡œìš´ Todoë¥¼ ì‚½ì…í•  ë•Œ ì‚¬ìš©í•œë‹¤
ê·¸ëŸ¼ ë„ˆëŠ”

------------------------------------------------------------------------------------------------------------------

âº sts


âº TodoResource.java



package com.in28minutes.rest.webservices.restfulwebservices.todo;

import java.util.*;

import org.springframework.http.*;
import org.springframework.web.bind.annotation.*;

@RestController
public class TodoResource {

	private TodoService todoService;
	
	public TodoResource(TodoService todoService) {
		this.todoService = todoService;
	}
	
	@GetMapping("/users/{username}/todos")
	public List<Todo> retrieveTodos(@PathVariable String username) {
		return todoService.findByUsername(username);
	}
	
	@GetMapping("/users/{username}/todos/{id}")
	public Todo retrieveTodo(@PathVariable String username,
								   @PathVariable int id) {
		return todoService.findById(id);
	}
	
	@DeleteMapping("/users/{username}/todos/{id}")
	public ResponseEntity<Void> deleteTodo(@PathVariable String username,
								   @PathVariable int id) {
		todoService.deleteById(id);
		return ResponseEntity.noContent().build();
	}
	
	@PutMapping("/users/{username}/todos/{id}")
	public Todo updateTodo(@PathVariable String username,
			@PathVariable int id, @RequestBody Todo todo) {
		todoService.updateTodo(todo);
		return todo;
	}

  //5: Todo createTodo()ë¼ê³  í•´ë³´ì, ê·¸ë¦¬ê³  createTodo()ëŠ” PostMappingì´ ë  ê²ƒì´ë‹¤ 
  //ê·¸ëŸ¼ @PostMapping()ì´ë¼ê³  í•˜ê³  ì„í¬íŠ¸ë¥¼ ì •ë¦¬í•´ë³´ì ê·¸ë¦¬ê³  ì•„ë˜ URLì—ì„œ /{id}ë¥¼ ì‚­ì œí•˜ê² ë‹¤, ì™œëƒë©´ Todoë¥¼ ìƒì„±í•  ë•Œ ë„ˆëŠ” idë¥¼ ëª¨ë¥´ê¸° ë•Œë¬¸ì´ë‹¤ ( ("/users/{username}/todos/{id}") ì˜ {id} ì‚­ì œ.. )
	PostMapping("/users/{username}/todos")
                //5-1: ê·¸ë¦¬ê³  usernameì´ê³  
	public Todo createTodo(@PathVariable String username,

    //5-2: ì—¬ê¸° PathVariable idë„ í•„ìš”í•˜ì§€ ì•Šë‹¤ (@PathVariable int id, ì‚­ì œ) ê±°ê¸° @RequestBodyê°€ ìˆì„ ê²ƒì´ë‹¤
			@RequestBody Todo todo) {

    //5-3: ì—¬ê¸°ì—ëŠ” addTodo()ê°€ ë“¤ì–´ê°€ì•¼ê² ì§€
		todoService.addTodo(todo);
		return todo;
	}
}
------------------------------------------------------------------------------------------------------------------

ì—¬ê¸° ìˆëŠ” addTodo()ë³´ë©´ Todoë¥¼ ì…ë ¥ê°’ìœ¼ë¡œ ë°›ì§€ ì•ŠëŠ”ë‹¤
----------------------------------
âº TodoService.java
...
	public Todo addTodo(String username, String description, LocalDate targetDate, boolean done) {
		Todo todo = new Todo(++todosCount,username,description,targetDate,done);
		todos.add(todo);
		return todo;
	}
----------------------------------
ê·¸ëŸ¼ ìš°ë¦° ì´ íŠ¹ì •í•œ í˜•ì‹ì„ ìœ ì§€í•˜ê² ë‹¤

------------------------------------------------------------------------------------------------------------------

âº sts


âº TodoResource.java



package com.in28minutes.rest.webservices.restfulwebservices.todo;

import java.util.*;

import org.springframework.http.*;
import org.springframework.web.bind.annotation.*;

@RestController
public class TodoResource {

	private TodoService todoService;
	
	public TodoResource(TodoService todoService) {
		this.todoService = todoService;
	}
	
	@GetMapping("/users/{username}/todos")
	public List<Todo> retrieveTodos(@PathVariable String username) {
		return todoService.findByUsername(username);
	}
	
	@GetMapping("/users/{username}/todos/{id}")
	public Todo retrieveTodo(@PathVariable String username,
								   @PathVariable int id) {
		return todoService.findById(id);
	}
	
	@DeleteMapping("/users/{username}/todos/{id}")
	public ResponseEntity<Void> deleteTodo(@PathVariable String username,
								   @PathVariable int id) {
		todoService.deleteById(id);
		return ResponseEntity.noContent().build();
	}
	
	@PutMapping("/users/{username}/todos/{id}")
	public Todo updateTodo(@PathVariable String username,
			@PathVariable int id, @RequestBody Todo todo) {
		todoService.updateTodo(todo);
		return todo;
	}
	
	@PostMapping("/users/{username}/todos")
	public Todo createTodo(@PathVariable String username,
				@RequestBody Todo todo) {

    //6: ì—¬ê¸° ìˆëŠ” addTodo()ëŠ” ì‚¬ì‹¤ ë§ì€ ê°’ì„ ì˜ˆìƒí•˜ê³  ê·¸ê²ƒë“¤ì„ ì¶”ê°€í•´ë³´ì ì²«ì§¸ëŠ” usernameì¸ë°, ì—¬ê¸°ì„œ ì§ì ‘ usernameì„ ë°›ì„ìˆ˜ ìˆì§€ ê·¸ëŸ¼ usernameì´ë¼ ì ì–´ì£¼ê³ 
    //ë‘˜ì§¸ íŒŒë¼ë¯¸í„°ëŠ” descriptionì¸ë° ê·¸ëŸ¼ todo.getDescription()ì´ë¼ê³  í•´ì¤€ë‹¤, ì…‹ì§¸ëŠ” tergetDateì§€ ê·¸ëŸ¼ todo.getTargetDate()ë¥¼ ì¨ì¤€ë‹¤
    //ê·¸ ë‹¤ìŒì€ todo.isDone()ì´ì§€, ê·¸ëŸ¼ username, todo.getDescription(), todo.getTargetDate(), todo.isDone()ì´ ìˆë‹¤
		todoService.addTodo(username, todo.getDescription(), todo.getTargetDate(), todo.isDone());
		return todo;
	}
}

------------------------------------------------------------------------------------------------------------------

ìš°ë¦° ê·¸ê²ƒë“¤ì„ ì¶”ê°€í•´ì£¼ê³  ì‘ë‹µì„ ë°›ì„ ê²ƒì´ë‹¤ ê·¸ëŸ¼ ë„ˆëŠ”
êµ¬ë¬¸ì„ ìƒˆë¡œìš´ ì§€ì—­ ë³€ìˆ˜ë¡œ ì§€ì •í•˜ê¸°ë¥¼ ì„ íƒí•´ë³´ì 

------------------------------------------------------------------------------------------------------------------

âº sts


âº TodoResource.java




package com.in28minutes.rest.webservices.restfulwebservices.todo;

import java.util.*;

import org.springframework.http.*;
import org.springframework.web.bind.annotation.*;

@RestController
public class TodoResource {

	private TodoService todoService;
	
	public TodoResource(TodoService todoService) {
		this.todoService = todoService;
	}
	
	@GetMapping("/users/{username}/todos")
	public List<Todo> retrieveTodos(@PathVariable String username) {
		return todoService.findByUsername(username);
	}
	
	@GetMapping("/users/{username}/todos/{id}")
	public Todo retrieveTodo(@PathVariable String username,
								   @PathVariable int id) {
		return todoService.findById(id);
	}
	
	@DeleteMapping("/users/{username}/todos/{id}")
	public ResponseEntity<Void> deleteTodo(@PathVariable String username,
								   @PathVariable int id) {
		todoService.deleteById(id);
		return ResponseEntity.noContent().build();
	}
	
	@PutMapping("/users/{username}/todos/{id}")
	public Todo updateTodo(@PathVariable String username,
			@PathVariable int id, @RequestBody Todo todo) {
		todoService.updateTodo(todo);
		return todo;
	}
	
	@PostMapping("/users/{username}/todos")
	public Todo createTodo(@PathVariable String username,
				@RequestBody Todo todo) {

  //7: todoService ì´ë¶€ë¶„ ì•ì— ctrl+1ì„ ëˆ„ë¥´ê³  (Assign Statement to new local variable) í´ë¦­ ê·¸ë¦¬ê³  ë³€ìˆ˜ëª…ì„ createdTodoë¼ê³  í•´ì£¼ì
	/	todoService.addTodo(username, todo.getDescription(),
				todo.getTargetDate(), todo.isDone()); */
                    |
                    V
    Todo createdTodo = todoService.addTodo(username, todo.getDescription(),
				todo.getTargetDate(), todo.isDone());

    //7-1: ê·¸ë¦¬ê³  ìš°ë¦¬ëŠ” ì´ createdTodoë¥¼ ë¦¬í„´í•  ê²ƒì´ë‹¤, ê·¸ëŸ¼ ì´ë ‡ê²Œ return createdTodoë¼ê³  í•´ì£¼ì, ì–´ë–»ê²Œ ë˜ëŠ”ì§€ ë³¼ê¹Œ? ì €ì¥í•˜ê³ 
		return createdTodo;
	}
}
------------------------------------------------------------------------------------------------------------------

Talend API Testerë¡œ ê°€ì
ìš°ë¦¬ëŠ” POST í•˜ë ¤ê³  í•˜ê³  
URLì€ /todosê³ , idë¥¼ ì œê³µí•  í•„ìš”ê°€ ì—†ì§€ ê·¸ë¦¬ê³  TodoëŠ” Learn To Dance ì´ë‹¤
ê·¸ë¦¬ê³  Acceptì™€ Content-Typeì€ ê·¸ëŒ€ë¡œ ë‘ê³  Sendë¥¼ í´ë¦­í•´ë³´ì
--------------------------------------------------------------------------------------------------------------------------------

ğŸ–‡ Talend API Tester í™”ë©´ ==>    (ë” ìì„¸í•œê±´ í¬ë¡¬ í™•ì¥í”„ë¡œê·¸ë¨ Talend API Tester ì‹¤í–‰í•´ì„œ í™•ì¸..)

  METHOD                SCHEME :// HOST [ ":" PORT ] [ PATH [ "?" QUERY ]]
  ______________      ____________________________________________________________    ___________________
 | POST     | â–¼  |    |    http://localhost:8080/users/in28minutes/todos/1        |  |  âœˆ Send       | â–½ |
  â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾      â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾    â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
                        â–¶ QUERY PARAMETERS
  HEADERS   â¬‡                   | Form â–¼ |   â—€ | â–¶  BODY                                   | Text â–¼ |
â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾     |   â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
   _______________     __________________      |    
â˜‘ | Accept        | : |application/json  | x   |    {                          
   â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾     â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾      |       "username": "in28minutes",                              
  ______________                               |       "description": "Learn To Dance",                          
 ( + Add header )  ğŸ— Add authorization     ğŸ—‘  |       "targetDate": "2033-08-04",                            
  â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾                               |       "done": false  
                                               |    }            
                                               |      
                                               |    â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
                                                   Text JSON XML HTML | Format Body |
                                                    â˜‘ Enable body evaluation

                                   

--------------------------------------------------------------------------------------------------------------------------------
                                          |
                                          V
--------------------------------------------------------------------------------------------------------------------------------

ğŸ–‡ Talend API Tester í™”ë©´ ==>    (ë” ìì„¸í•œê±´ í¬ë¡¬ í™•ì¥í”„ë¡œê·¸ë¨ Talend API Tester ì‹¤í–‰í•´ì„œ í™•ì¸..)


  Response
â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
  200                (ì´ˆë¡ ë°”íƒ•)
___________________________________________________________________________________________________

  HEADERS                     | pretty â–¼ |      â—€ | â–¶  BODY                                 | pretty â–¼ |
â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾         |   â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
                                                  |
Vary:	Origin                                      |
Vary:	Access-Control-Request-Method               |     {
Vary:	Access-Control-Request-Headers              |       "id": 4,
Content-Type:	application/json                    |       "username": "in28minutes",
Transfer-Encoding:	chunked                       |       "description": "Learn To Dance",
Date: Sun, 04 Aug 2024 06:19:15 GMT               |       "targetDate": "2033-08-04",
Keep-Alive:	timeout=60                            |       "done": false
Connection:	keep-alive                            |      }                                 
                                                  |                                                                                                                                                 
                                                  |                  
â–¶ COMPLETE REQUEST HEADERS                        |                                              
                                                  |

                                                  lines nums  ğŸ“„ copy              length: 103 bytes                                                    

--------------------------------------------------------------------------------------------------------------------------------

ì–´ë–»ê²Œ ë˜ëŠ”ì§€ ë³¼ê¹Œ?
ì‘ë‹µì´ 200ì´ê³ , ë„ˆëŠ” ë³¸ë¬¸ì„ ë°›ì„ ìˆ˜ ìˆë‹¤
ë³¸ë¬¸ì— idê°€ í• ë‹¹ëœ ê±¸ ë³¼ ìˆ˜ ìˆê³  
ê·¸ëŸ¼ idê°€ 4ì´ê³  Todoì˜ ì„¸ë¶€ì •ë³´ê°€ ëŒì•„ì˜¤ê³  ìˆë‹¤ 
ì¢‹ë‹¤




ì´ë ‡ê²Œ Todoë¥¼ ì—…ë°ì´íŠ¸í•˜ê³  ë§Œë“œëŠ” REST APIê°€ ì¤€ë¹„ë˜ì—ˆë‹¤
ê·¸ëŸ¼ ì´ê±¸ ìš°ë¦¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì‚¬ìš©í•´ë³´ì
ë‹¤ìŒë‹¨ê³„ì— ë³´ê² ë‹¤
