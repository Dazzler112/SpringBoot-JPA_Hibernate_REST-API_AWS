

Social Media Application - Resources & Methods
                                                                                                  i localhost:8080/users
в—Џ Users REST API                                                                                   [
  в–  Retrieve all Users                                                                                -  {
    в—‹ GET/users                                                                                             id: 1,
  в–  Create a User                                                                                           name: "Adam",
    в—‹ POST/users                                                                                            birthDate: "2024-05-18T17:16:30.057+0000"
  в–  Retrieve one User                                                                                    },                                                                                                                                                                           
    в—‹ Get/users/{id}->/users/1                                                                        -  {
  в–  Delete a User                                                                                           id: 2,
    в—‹ DELETE/users/{id}->/users/1                                                                           name: "Eve",
  в–  Posts REST API                                                                                          birthDate: "2024-05-18T17:16:30.057+0000"
    в—‹ Retrieve all posts for a User                                                                      },                                    
      в—¦ GET/users/{id}/posts                                                                        -  {
    в—‹ Create a post for a User                                                                              id: 3,
      в—¦ POST/users/{id}/posts                                                                               name: "Jack",
                                                                                                            birthDate: "2024-05-18T17:16:30.057+0000"
                                                                                                        }                                       
                                                                                                    ] 

мќґ кіјм • м•ћл¶Ђл¶„м—ђм„њ м‚¬мљ©мћђ REST APIлҐј л§Ћмќґ мѓќм„±н–€лЉ”лЌ°, 
лЄЁл“  м‚¬мљ©мћђ кІЂмѓ‰, м‚¬мљ©мћђ мѓќм„±, л‹Ёмќј м‚¬мљ©мћђ кІЂмѓ‰ м‚¬мљ©мћђ м‚­м њмЂм§Ђ,
  в–  Posts REST API
мќґм њ кІЊм‹њл¬ј REST API мѓќм„±мќґ л‚Ём•„ мћ€л‹¤ 
    в—‹ Retrieve all posts for a User  
      в—¦ GET/users/{id}/posts 
REST APIлҐј мѓќм„±н•ґм„њ нЉ№м • м‚¬мљ©мћђм—ђ лЊЂн•ґ лЄЁл“  кІЊм‹њл¬јмќ„ кІЂмѓ‰н•  м€ мћ€кІЊ н•л ¤лЉ” кІѓмќґл‹¤
    в—‹ Create a post for a User
     в—¦ POST/users/{id}/posts 
нЉ№м • м‚¬мљ©мћђм—ђ лЊЂн•њ кІЊм‹њл¬ј мѓќм„±лЏ„ к°ЂлЉҐн•кІЊ н•л ¤кі  н•њл‹¤ 



мќґлҐј мњ„н•ґ лЁјм Ђ кІЊм‹њл¬ј м—”н„°н‹°л¶Ђн„° мѓќм„±н•ґліґмћђ
.userнЊЁн‚¤м§Ђм—ђм„њ мѓ€ нЃґлћмЉ¤лҐј мѓќм„±н•њл‹¤ Postлќјкі  н•кі  FinishлҐј л€„лҐёл‹¤
PostлЉ” м—”н„°н‹°м§Ђ?
-----------------------------------------------------------------------------------------------------------------------------


вЏє Post нЃґлћмЉ¤нЊЊмќј


package com.in28minutes.rest.webservices.restfulwebservices.user;

import jakarta.persistence.*;

//1:@EntityлҐј л„Јм–ґм¤Ђл‹¤
@Entity
public class Post {

  //1-1: м—¬кё°м—ђлЉ” IDлҐј л„Јм–ґм•јкІ л‹¤, к°Ѓ кІЊм‹њл¬јм—ђ м •м€ idлҐј м ЂмћҐн•л ¤кі  н•лЉ”лЌ°, 
  //мќґкІѓкіј л№„мЉ·н•кІЊ м •м€ idлҐј л„Јмќ„ к±°л‹€к№Њ User()нЃґлћмЉ¤м—ђ мћ€лЉ” л¶Ђл¶„мќ„ ліµм‚¬н•ґ м—¬кё° л¶™м—¬ л„ЈкІ л‹¤
	@Id
	@GeneratedValue
	private Integer id;

  //1-2: мќґм њ @GeneratedValue м •м€лҐј м¶”к°Ђн–€мњјл‹€ м„¤лЄ…мќ„ м ЂмћҐн•ґм•јкІ м§Ђ
  //private String descriptionмќ„ мћ…л Ґн•њл‹¤
  private String description;

  //1-3: л‹¤мќЊ кІЊн„°м™Ђ м„ён„°лҐј мѓќм„±н•ґліґмћђ (alt + shift + s => м€Џм»·) кІЊн„° м„ён„° мѓќм„±мњјлЎњ к°Ђм„њ лЄЁл‘ђм„ нѓќ, мѓќм„±
  	public Integer getId() {
		return id;
	}

	public void setId(Integer id) {
		this.id = id;
	}

	public String getDescription() {
		return description;
	}

	public void setDescription(String description) {
		this.description = description;
	}

  //1-4: мќґм њ toString л©”м„њл“њлЏ„ мѓќм„±н•кІ л‹¤
	@Override
	public String toString() {
		return "Post [id=" + id + ", description=" + description + "]";
	}

  //мќґм њ Post м—”н„°н‹°к°Ђ м¤Ђл№„лђђл‹¤ 
}

-----------------------------------------------------------------------------------------------------------------------------

м• н”Њл¦¬мјЂмќґм…мќґ мћ¬м‹њмћ‘н•  л•Њк№Њм§Ђ кё°л‹¤л¦¬кі  
H2 мЅм†”лЎњ к°Ђм„њ лЎњк·ёмќён•њл‹¤
----------------------------------------------------------------------------------------------------------------------------------


рџЊЋ localhost:8080/h2-console м‚¬мќґнЉён™”л©ґ ==>

  ______________________
 |English             v |  Preferences  Tools  Help
  вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ
  _______________________________________________________________________
 |  Login (нЊЊл°”нѓ•)                                                        | 
 |вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ|
 |                    ______________________________________________     |
 |  Saved Settings:  | Generic H2 (Embedded)                    v   |    |
 |                    вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ     |
 |                    ______________________________   ____   ______     |
 |  Setting Name :   | Generic H2 (Embedded)        | |Save| |Remove|    |
 |                     вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ   вЂѕвЂѕвЂѕвЂѕ   вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ     |
 |  вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ   |
 |                    ____________________________________________       |
 |  Driver Class:    |org.h2.Driver                               |      |
 |                    вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ       |
 |                    ____________________________________________       |
 |  JDBC URL:        |jdbc:h2:mem:testdb                          |      |
 |                    вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ       |
 |                    ________________________________                   |
 |  User Name:       |sa                              |                  |
 |                    вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ                   | 
 |                    ________________________________                   |
 |  Password:        | Generic H2 (Embedded)          |                  |
 |                    вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ                   |
 |                    _________   _________________                      |                               
 |                   | Connect | | Test Connection |                     |                                       
 |                    вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ   вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ                      |
  вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ

----------------------------------------------------------------------------------------------------------------------------------
Connect нЃґл¦­                                        |
                                                    V
----------------------------------------------------------------------------------------------------------------------------------
H2 Database м•€ ==>

рџ”‹ jdbc:h2:mem:testdb
 + рџ’· POST
 + рџ’· USER_DETAILS
 + рџ“Ѓ INFORMATION_SCHEMA
 + рџЋ« Sequences
 + рџ‘Є Users
 i H2 2.2.224 (2023-09-17)


м—¬кё°м—ђлЏ„ POSTк°Ђ ліґмќёл‹¤
----------------------------------------------------------------------

вЏє H2 Console 
 _____   ______________   _______________   _______
| Run | | Run Selected | | Auto complete | | Clear | SQL statement:
 вЂѕвЂѕвЂѕвЂѕвЂѕ   вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ   вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ   вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ 
 ___________________________________________________________________________________
| SELECT * FROM POST                                                       |
|                                                                                   |                     
|                                                                                   |                     
|                                                                                   |                     
|                                                                                   |                    
|                                                                                   |                     
 вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ
SELECT * FROM TODO;
 ____________________________
|ID       | DESCRIPTION      |   
 вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ
(no row, 2 ms)
 ____
|Edit|
 вЂѕвЂѕвЂѕвЂѕ
----------------------------------------------------------------------------------------------------------------------------------

м§Ђкё€мќЂ м•„л¬ґ кІЊм‹њл¬јлЏ„ м—†л‹¤

мќґм њ кІЊм‹њл¬јмќ„ м‚¬мљ©мћђм—ђкІЊ л§¤н•‘н•ґм•јкІ м§Ђ?

----------------------------------------------------------------------------------------------------------------------------------


вЏє Post нЃґлћмЉ¤нЊЊмќј



package com.in28minutes.rest.webservices.restfulwebservices.user;

import jakarta.persistence.*;

@Entity
public class Post {

	@Id
	@GeneratedValue
	private Integer id;
	
	private String description;

  //2: м—¬кё°м—ђм„њ кІЊм‹њл¬јмќґ нЉ№м • м‚¬мљ©мћђм—ђкІЊ л§¤н•‘лђњл‹¤ private User userлҐј мћ…л Ґн•кі  User м—”н„°н‹°лЎњ лЏЊм•„к°Ђ ліґкІ л‹¤ //2-1: User нЃґлћмЉ¤нЊЊмќјлЎњ..
  //2-2: Postм—ђм„њлЉ” кґЂкі„к°Ђ л°лЊЂмќґл‹¤ л‹¤лЊЂмќјмќґ лђкІ м§Ђ (@ManyToOne м‚¬мљ©) к·ёлџ¬л©ґ importл¬ёмќ„ к°Ђм ёмЁл‹¤ jakarta.persistence.ManyToOneмќ„ к°Ђм ём¤лЉ”кІЊ ліґмќёл‹¤ PostнЃґлћмЉ¤м™Ђ UserнЃґлћмЉ¤лҐј м ЂмћҐн•кі 
	@ManyToOne
	private User user;

	public Integer getId() {
		return id;
	}

	public void setId(Integer id) {
		this.id = id;
	}

	public String getDescription() {
		return description;
	}

	public void setDescription(String description) {
		this.description = description;
	}

	@Override
	public String toString() {
		return "Post [id=" + id + ", description=" + description + "]";
	}
	
}

----------------------------------------------


вЏє User нЃґлћмЉ¤нЊЊмќј



package com.in28minutes.rest.webservices.restfulwebservices.user;

import java.time.*;
import java.util.*;

import jakarta.persistence.*;
import jakarta.validation.constraints.*;

@Entity(name = "user_details")
public class User {

	protected User() {
		
	}
	
	@Id
	@GeneratedValue
	private Integer id;
	
	@Size(min=2, message = "Name should have atleast 2 characters")
//	@JsonProperty("user_name")
	private String name;
	
	@Past(message = "Birth Date should be in the past")
//	@JsonProperty("birth_date")
	private LocalDate birthDate;

//2-1: User м—”н„°н‹°м—ђлЏ„ кІЊм‹њл¬ј лЄ©лЎќмќ„ м ЂмћҐн•ґм•јкІ м§Ђ? м—¬кё°м—ђ private List<Post> postsлҐј мћ…л Ґн•њл‹¤ importл¬ёмќ„ м •л¦¬ Java.util.ListлҐј к°Ђм ём¤кІ л‹¤
//м‚¬мљ©мћђм™Ђ кІЊм‹њл¬јм—ђ кґЂкі„лҐј м„¤м •н•ґм•јкІ м§Ђ, м‚¬мљ©мћђлЉ” кІЊм‹њл¬јкіј м–ґл–¤ кґЂкі„мќјк№Њ? м‚¬мљ©мћђ 1лЄ…мќЂ м—¬лџ¬ кІЊм‹њл¬јмќ„ л‘ м€ мћ€мњјл‹€к№Њ мќјлЊЂл‹¤ кґЂкі„мќґл‹¤
//к·ёлџ¬л‹€к№Њ м‚¬мљ©мћђлЉ” кІЊм‹њл¬јкіј мќјлЊЂл‹¤ кґЂкі„лҐј л§єлЉ”л‹¤ (@OneToMany м–ґл…ён…Њмќґм…мќ„ м‚¬мљ©) ctrl+1мќ„ л€Њлџ¬ jakarta.persistence.OnetoManyлҐј к°Ђм ём¤кё°н•л©ґ лђњл‹¤
//OneToMany м•€м—ђ м†Ќм„±мњјлЎњ л§¤н•‘н•кё°лҐј м„¤м •н•  м€ мћ€л‹¤, мќґ нЉ№м • кґЂкі„лҐј к°Ђм§ЂлЉ” н•„л“њлҐј м„¤м •н•  м€ мћ€л‹¤, к·ёлџ¬л©ґ mappedby= л‹¤мќЊм—ђ Postм—ђм„њ мќґ кґЂкі„лҐј к°Ђм§ЂлЉ” н•„л“њк°Ђ л­”м§Ђ л„Јм–ґм¤Ђл‹¤ м‚¬мљ©мћђ н•„л“њл‹¤
//к·ёлџј PostнЃґлћмЉ¤мќ private User user;мќ "user"лҐј л„Јм–ґ Postм—ђм„њ н•ґл‹№ нЉ№м • кґЂкі„лҐј к°–лЉ” н•„л“њлЎњ м ЂмћҐн•њл‹¤ //2-2: Post нЃґлћмЉ¤нЊЊмќјлЎњ..
	@OneToMany(mappedBy = "user")
	private List<Post> posts;

	public User(Integer id, String name, LocalDate birthDate) {
		super();
		this.id = id;
		this.name = name;
		this.birthDate = birthDate;
	}

	public Integer getId() {
		return id;
	}

	public void setId(Integer id) {
		this.id = id;
	}

	public String getName() {
		return name;
	}

	public void setName(String name) {
		this.name = name;
	}

	public LocalDate getBirthDate() {
		return birthDate;
	}

	public void setBirthDate(LocalDate birthDate) {
		this.birthDate = birthDate;
	}

	@Override
	public String toString() {
		return "User [id=" + id + ", name=" + name + ", birthDate=" + birthDate + "]";
	}
	
}

----------------------------------------------------------------------------------------------------------------------------------

User Beanмќ„ REST API мќ‘л‹µмќ мќјл¶Ђл¶„мњјлЎњ м‚¬мљ©н•кі  мћ€кі , Post BeanлЏ„ REST API мќ‘л‹µмќ мќјл¶Ђл¶„мњјлЎњ м‚¬мљ©н•кі  мћ€л‹¤ 
User Beanм—ђ лЊЂн•ґ кІЊм‹њл¬јмќ„ JSON мќ‘л‹µм—ђ нЏ¬н•Ём‹њн‚¤л ¤лЉ” кІѓмќЂ м•„л‹€л‹¤ 
