

Social Media Application - Resources & Methods

â— Users REST API                                                                                   [
  â–  Retrieve all Users                                                                                -  {
    â—‹ GET/users                                                                                             id: 1,
  â–  Create a User                                                                                           name: "Adam",
    â—‹ POST/users                                                                                            birthDate: "2024-05-18T17:16:30.057+0000"
                                                                                                         },                                                                                                                                                                           
                                                                                                      -  {
                                                                                                            id: 2,
                                                                                                            name: "Eve",
                                                                                                            birthDate: "2024-05-18T17:16:30.057+0000"
                                                                                                         },                                    
                                                                                                     -  {
                                                                                                            id: 3,
                                                                                                            name: "Jack",
                                                                                                            birthDate: "2024-05-18T17:16:30.057+0000"
                                                                                                        }                                       
                                                                                                    ] 

ì§€ë‚œ ì‹œê°„ì—” REST APIë¡œ ì‚¬ìš©ìë¥¼ ìƒì„±í–ˆë‹¤
POST /usersë¡œ ìš”ì²­ì„ ë³´ë‚´ë©´ì„œ ì‚¬ìš©ì ì •ë³´ë„ ì „ë‹¬í•´ì„œ ì‚¬ìš©ìë¥¼ ìƒì„±í–ˆë‹¤
ê·¸ë•Œ ëŒì•„ì˜¨ ê°’ì´ 200ì¸ ê±¸ ë´¤ëŠ”ë° ì´ê±¸ ê°œì„ í•  ë°©ë²•ì´ ìˆì„ê¹Œ? ê·¸ì „ì—




ë¨¼ì € REST APIì˜ ë‹¤ì–‘í•œ ì‘ë‹µ ìƒíƒœë¥¼ ì‚´í´ë³´ê² ë‹¤


Response Status for REST API

â— Return the correct response status                                                                [
  â–  Resource is not found => 404                                                                      -  {
  â–  Server exception => 500                                                                                 id: 1,
  â–  Validation error => 400                                                                                 name: "Adam",
â— Important Response Statuses                                                                               birthDate: "2024-05-18T17:16:30.057+0000"
  â–  200 - Success                                                                                        },                                                                                                                                                                           
  â–  201 - Created                                                                                     -  {
  â–  204 - No Content                                                                                        id: 2,
  â–  401 - Unauthorized (when authorization fails)                                                           name: "Eve",
  â–  400 - Bad Request (such as validation error)                                                            birthDate: "2024-05-18T17:16:30.057+0000"
  â–  404 - Resource Not Found                                                                             },                                    
                                                                                                     -  {
                                                                                                            id: 3,
                                                                                                            name: "Jack",
                                                                                                            birthDate: "2024-05-18T17:16:30.057+0000"
                                                                                                        }                                       
                                                                                                    ]


â— Return the correct response status
REST APIë¥¼ êµ¬í˜„í•  ë•Œ ë§ì´ë‹¤, ì •í™•í•œ ì‘ë‹µ ìƒíƒœë¥¼ ë°˜í™˜í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤
  â–  Resource is not found => 404
ë¦¬ì†ŒìŠ¤ë¥¼ ì°¾ì§€ ëª»í•  ë• ì•„ê¹Œ ì…ë ¥í•œ ë¦¬ì†ŒìŠ¤ê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê±°ì˜€ì„ ë•Œ 404ê°€ ë°˜í™˜ë˜ì—ˆë‹¤

ì§ì ‘ í™•ì¸í•´ë³´ì localhost8080: ê·¸ ë‹¤ìŒ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” URLì„ ì…ë ¥í•´ ë³´ì
------------------------------------------------------------------------------------------------------------------------------

http://localhost:8080/aaaa ì—†ëŠ” ì‚¬ì´íŠ¸ í™”ë©´ ==>


Whitelabel Error Page
This application has no explicit mapping for /error, so you are seeing this as a fallback.

Tue May 21 17:13:11 KST 2024
There was an unexpected error (type=Not Found, status=404).
No static resource aaaa.
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource aaaa.
	at ....
------------------------------------------------------------------------------------------------------------------------------
404ê°€ ë°˜í™˜ëë‹¤
ë¦¬ì†ŒìŠ¤ë¥¼ ì°¾ì§€ ëª»í–ˆë‹¨ ëœ»ì´ë‹¤
ì¢‹ë‹¤ , ì¢‹ì€ ê²°ê³¼ì´ë‹¤
Spring Bootê°€ ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•œ ê²ƒì´ì˜€ë‹¤, Spring Boot ê°€ ì´ëŸ° ì—ëŸ¬ í˜ì´ì§€ë‘ ì—ëŸ¬ ì‘ë‹µì„ ì œê³µí–ˆë‹¤, 
ì´ì™€ ë¹„ìŠ·í•˜ê²Œ

  â–  Server exception => 500   
ë§Œì•½ ì„œë²„ì—ì„œ ì˜ˆì™¸ê°€ ë°œìƒí–ˆë‹¤ë©´ ê·¸ë• 500 ì‘ë‹µ ìƒíƒœë¥¼ ë°˜í™˜í•˜ê¸°ë¥¼ ê¶Œì¥í•œë‹¤ 
  â–  Validation error => 400
ê²€ì¦ ì—ëŸ¬ê°€ ë‚¬ë‹¤ë©´, ì–´ë–¤ ì •ë³´ë¥¼ ì „ë‹¬í–ˆëŠ”ë° í•´ë‹¹ ì •ë³´ê°€ ê²€ì¦ì„ í†µê³¼ ëª»í•˜ë©´ ê·¸ë•Œ ê¶Œì¥ë˜ëŠ” ì‘ë‹µì€ 400ì´ë‹¤

ì´ë ‡ê²Œ REST APIë¥¼ êµ¬í˜„í•  ë•ŒëŠ” ì í•©í•œ ì‘ë‹µ ìƒíƒœë¥¼ ë°˜í™˜í•˜ëŠ” ê²ƒì´ ë¬´ì²™ ì¤‘ìš”í•˜ë‹¤

â— Important Response Statuses
ë‹¤ë¥¸ ì¤‘ìš”í•œ ì‘ë‹µ ìƒíƒœë“¤ì„ ë³´ê² ë‹¤ 
  â–  200 - Success
200ì€ ì„±ê³µì´ë‹¤ 
ì§€ê¸ˆê¹Œì§€ ìš°ë¦¬ê°€ êµ¬í˜„í•œ REST APIëŠ” ê³„ì† 200ì„ ë°˜í™˜í–ˆë‹¤ 
  â–  201 - Created 
201ë„ ìˆëŠ”ë°, POST ìš”ì²­ìœ¼ë¡œ ìƒˆ ë¦¬ì†ŒìŠ¤ë¥¼ ìƒì„±í–ˆì„ ë•Œ ë°˜í™˜í•˜ëŠ” ì‘ë‹µ ìƒíƒœëŠ” 201ì´ë‹¤
  â–  204 - No Content
ë˜ ë‹¤ë¥¸ ì‘ë‹µ ìƒíƒœë¡œëŠ” No contentë„ ìˆëŠ”ë° ì½˜í…ì¸ ë¥¼ ì—…ë°ì´íŠ¸ í•˜ê¸° ìœ„í•´ PUT ìš”ì²­ì„ ë³´ë‚¸ë‹¤ë©´ 
ì½˜í…ì¸ ê°€ ì—†ìŒì„ ì‘ë‹µ ìƒíƒœë¡œ ë³´ë‚´ì•¼ í•  ìƒí™©ë„ ìˆì„ ê²ƒì´ë‹¤ 
  â–  401 - Unauthorized (when authorization fails)
ë˜ í•˜ë‚˜ëŠ” Unauthorizedë„ ìˆë‹¤
ì´ ê³¼ì • ì¤‘ì— ë‚˜ì¤‘ì—” REST APIì— ì¸ì¦ì´ë‘ ì¸ê°€ë„ ë„£ì„ ê²ƒì´ë‹¤
ì‚¬ìš©ìê°€ ìš”ì²­ì— ì˜¬ë°”ë¥¸ ì •ë³´ë¥¼ ì œê³µí•˜ì§€ ì•Šì„ ë•ŒëŠ” 401 ì‘ë‹µ ìƒíƒœë¥¼ ë°˜í™˜í•œë‹¤
  â–  400 - Bad Request (such as validation error)
400ë„ ìˆëŠ”ë° ì´ê±´ ìš”ì²­ì´ ì¢‹ì§€ ì•Šë‹¤ëŠ” ê²ƒì´ë‹¤ ê²€ì¦ ì—ëŸ¬ ê°™ì€ ê²ƒì´ë‹¤
  â–  404 - Resource Not Found
404ëŠ” ì´ë¯¸ ì–˜ê¸°í–ˆì§€, ë¦¬ì†ŒìŠ¤ê°€ ì—†ë‹¤ëŠ” ê±°ê³  500ì€ ì„œë²„ ì—ëŸ¬ì´ë‹¤


REST APIë¥¼ ë§Œë“¤ ë•ŒëŠ” HTTPë¥¼ ì˜ í™œìš©í•´ì•¼ í•œë‹¤ 
URLì„ ì˜ ì„¤ê³„í•´ì•¼ í•œë‹¤ 
ìš”ì²­ ë©”ì†Œë“œë¥¼ ì˜ ì„ íƒí•´ì•¼ í•œë‹¤ 
ì„¸ ë²ˆì§¸ë¡œ ì¤‘ìš”í•œ ê±´ REST APIì—ì„œ ì˜¬ë°”ë¥¸ ì‘ë‹µ ìƒíƒœë¥¼ ë°˜í™˜í•˜ëŠ” ê²ƒì´ë‹¤

ì§€ê¸ˆ ìš°ë¦¬ POST ìš”ì²­ì— ì í•©í•œ ì‘ë‹µ ìƒíƒœëŠ” 201ì´ë‹¤ 

	//POST /users
	@PostMapping("/users")
	public void createUser(@RequestBody User user) {
		service.save(user);
	}
ê·¸ëŸ¬ë©´ ì—¬ê¸°ì„œ ì–´ë–»ê²Œ í•˜ë©´ 201ì„ ë°˜í™˜í•˜ê²Œ í•  ìˆ˜ ìˆì„ê¹Œ?

------------------------------------------------------------------------------------------------------------------------------


âº UserResource í´ë˜ìŠ¤íŒŒì¼



package com.in28minutes.rest.webservices.restfulwebservices.user;

import java.util.*;

import org.springframework.web.bind.annotation.*;

@RestController
public class UserResource {

	private UserDaoService service;
	
	public UserResource(UserDaoService service) {
		this.service = service;
	}
	
	//GET /users
	@GetMapping("/users")
	public List<User> retrieveAllUsers() {
		
		return service.findAll();
	}
	
	//GET /users
	@GetMapping("/users/{id}")
	public User retrieveUser(@PathVariable int id) {
		
		return service.findOne(id);

	}

/*
	//POST /users
	@PostMapping("/users")
	public void createUser(@RequestBody User user) {
		service.save(user);

  //1:ResponseEntityë¥¼ ì´ìš©í•  ê²ƒì´ë‹¤ Spring Frameworkì˜ í´ë˜ìŠ¤ì´ë‹¤, org.springframework.http íŒ¨í‚¤ì§€ì´ë‹¤ ì´ í´ë˜ìŠ¤ ì•ˆì— created()ë¼ëŠ” ë©”ì†Œë“œê°€ ìˆë‹¤, ìƒíƒœë³„ë¡œ ë©”ì†Œë“œê°€ ì¡´ì¬í•œë‹¤ accepted, badRequest, created, noContent, notFoundë“±ì´ ìˆë‹¤
  //ì‘ë‹µ ìƒíƒœë³„ë¡œ ë©”ì†Œë“œê°€ ì—¬ëŸ¬ ê°œ ìˆê³  ì´ ì¤‘ì—ì„œ ë°˜í™˜í•˜ë ¤ëŠ” ê²ƒì— í•´ë‹¹í•˜ëŠ” ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ëœë‹¤ ì§€ê¸ˆì€ createdì— í•´ë‹¹í•˜ëŠ” ìƒíƒœë¥¼ ë°˜í™˜í•˜ê³  ì‹¶ë‹¤, ë¹Œë”ë¥¼ ì´ìš©í•´ CREATED ìƒíƒœë¥¼ ìƒì„±í•´ì•¼ í•œë‹¤, createdë¥¼ ì„ íƒí•´ì„œ ë„£ê² ë‹¤
  //ì¼ë‹¨ ì§€ê¸ˆì€ location ê°’ì„ nullë¡œ í•˜ê³  ì´ê±´ ë‚˜ì¤‘ì— ë‹¤ì‹œ ë°”ê¿”ì£¼ê² ë‹¤, ì¼ë‹¨ì€ ResponseEntity.created(null)ë¡œ í˜¸ì¶œí•´ ì¤€ë‹¤ ê·¸ë¦¬ê³  ë’¤ì— .build()ë¥¼ ì¶”ê°€í•´ ì¤€ë‹¤ ì¶”ê°€í•´ ì¤€ ë‹¤ìŒ ctrl+1ì„ ëˆ„ë¥´ê³  ë©”ì†Œë“œ ë°˜í™˜ê°’ íƒ€ì…ì„ ResponseEntityë¡œ ë°”ê¾¸ê¸°ë¥¼ ì„ íƒí•œë‹¤
	  return ResponseEntity.created(null).build();
  }
*/
                  |  (ResponseEntityë¡œ ë°˜í™˜ê°’ ë°”ê¾¼ ë’¤ì˜ ë©”ì†Œë“œ ìƒíƒœ)
                  V
  //1-1: ì¢‹ë‹¤ ì´ì œ ë°˜í™˜í•˜ëŠ” ê±´ ResponseEntityì´ë‹¤
	//POST /users
	@PostMapping("/users")
  //1-1ê³„ì†: ResponseEntityì˜ íƒ€ì…ì€ Userì—¬ì•¼ ê² ì§€? (ResponseEntity<Object>ë¥¼ <User>ë¡œ ë°”ê¿”ì£¼ê¸°) ì´ê²ƒë„ ë°”ê¿”ì¤€ë‹¤, ê·¸ë¦¬ê³  ì„œë²„ë¥¼ ì¬ê¸°ë™ì‹œí‚¨ë‹¤
	public ResponseEntity<User> createUser(@RequestBody User user) {
		service.save(user);
		
		return ResponseEntity.created(null).build();
	}
}

------------------------------------------------------------------------------------------------------------------------------
ë„ˆê°€ í•˜ë‚˜ ê¸°ì–µí•´ì•¼ í•  ì ì€ ì§€ê¸ˆ ì •ì  ëª©ë¡ì„ í™œìš©í•˜ê³  ìˆë‹¤ëŠ” ê²ƒì´ë‹¤
	static {
		users.add(new User(++usersCount, "Adam", LocalDate.now().minusYears(30)));
		users.add(new User(++usersCount, "Eve", LocalDate.now().minusYears(25)));
		users.add(new User(++usersCount, "Jim", LocalDate.now().minusYears(20)));
	}
ì„œë²„ê°€ ì¬ê¸°ë™ë  ë•Œë§ˆë‹¤ ëª©ë¡ì´ ë¦¬ì…‹ëœë‹¤
ì„œë²„ê°€ ë‹¤ì‹œ ì‹œì‘ë˜ë©´ ëª©ë¡ì—” ì‚¬ìš©ìê°€ 3ëª…ì´ ìˆëŠ” ê²ƒì´ë‹¤

localhost:8080/usersë¥¼ ì‹¤í–‰í•˜ë©´ 3ëª…ì˜ ì •ë³´ê°€ ë‚˜ì˜¨ë‹¤
[
  {
    "id": 1,
    "name": "Adam",
    "birthDate": "1994-05-21"
  },
  {
    "id": 2,
    "name": "Eve",
    "birthDate": "1999-05-21"
  },
  {
    "id": 3,
    "name": "Jim",
    "birthDate": "2004-05-21"
  }
]
ì‚¬ìš©ìë¥¼ ì¶”ê°€í•˜ê² ë‹¤

------------------------------------------------------------------------------------------------------------------------------

ğŸ–‡ Talend API Tester í™”ë©´ ==>    (ë” ìì„¸í•œê±´ í¬ë¡¬ í™•ì¥í”„ë¡œê·¸ë¨ Talend API Tester ì‹¤í–‰í•´ì„œ í™•ì¸..)


  METHOD                SCHEME :// HOST [ ":" PORT ] [ PATH [ "?" QUERY ]]
  ______________      ____________________________________________________________    ___________________
 | POST     | â–¼ |    |    http://localhost:8080/users                             |  |  âœˆ Send       | â–½ |
  â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾      â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾    â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
                        â–¶ QUERY PARAMETERS
  HEADERS   â¬‡                   | Form â–¼ |  â—€ | â–¶  BODY                                   | Text â–¼ |
â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾     |   â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
   ______________     __________________      |    {
â˜‘ | Content-Type | : | application/json | x   |       name: "Ravi",                           
   â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾ 	  â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾      |       birthDate": "1999-05-20"                                
  ______________                              |    }                                
 ( + Add header )                             |                                    
  â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾                              |                                    
  ğŸ— Add authorization         ğŸ—‘              |                                    
                                              |    â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
                                                   Text JSON XML HTML | Format Body |
                                                    â˜‘ Enable body evaluation


------------------------------------------------------------------------------------------------------------------------------
Ravië¥¼ ì¶”ê°€í•˜ê³  ì´ ì •ë³´ ê·¸ëŒ€ë¡œ ì´ URLë¡œ POST ìš”ì²­ì„ ë³´ë‚´ê² ë‹¤ ë³´ë‚´ê¸°ë¥¼ ëˆ„ë¥¸ë‹¤                        |
                                                                                               V
------------------------------------------------------------------------------------------------------------------------------

ğŸ–‡ Talend API Tester í™”ë©´ ==>    (ë” ìì„¸í•œê±´ í¬ë¡¬ í™•ì¥í”„ë¡œê·¸ë¨ Talend API Tester ì‹¤í–‰í•´ì„œ í™•ì¸..)


  Response
â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
  201                (ì´ˆë¡ìƒ‰ ë°”íƒ•)
___________________________________________________________________________________________________

  HEADERS                     | pretty â–¼ |  â—€ | â–¶  BODY                                 | pretty â–¼ |
â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾     |   â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
Content-Length:	0 byte                        |    
Date:	 	Tue, 21 May 2024 09:21:10 GMT         |                                          
Keep-Alive: timeout=60	                      |                                       
Connection:	keep-alive                        |                    NO CONTENT                       
                                              |   
                                              |                                    
                                              |                                    
                                              |


------------------------------------------------------------------------------------------------------------------------------
ì‘ë‹µ ìƒíƒœê°€ 201ë¡œ ë°”ë€ ê±¸ ë³¼ ìˆ˜ ìˆë‹¤ 
POST ë©”ì†Œë“œë¥¼ ì‹¤í–‰í•  ë•Œ ìƒì„± ê´€ë ¨ ì‘ë‹µ ìƒíƒœê°€ ë°˜í™˜ëë‹¤

ì¢‹ë‹¤ ì¡°ê¸ˆ ë” ê°œì„ í•´ ë³´ê² ë‹¤
REST APIë¥¼ ë§Œë“¤ë•Œ ì´ REST APIë¥¼ ì†Œë¹„í•˜ëŠ” ì‚¬ëŒ ì…ì¥ì—ì„œ ìƒê°ì„ í•´ì•¼ í•œë‹¤
ì´ REST APIì˜ ì†Œë¹„ìëŠ” ì‚¬ìš©ìë¥¼ ìƒì„±í•˜ë ¤ê³  í•˜ëŠ”ë° ì‚¬ìš©ìê°€ ìƒì„±ë˜ë©´ 201 ìƒíƒœë¥¼ ë°˜í™˜í•œë‹¤
ì—¬ê¸° ì¶”ê°€ë¡œ ì–´ë–¤ ì‚¬ìš©ìê°€ ìƒì„±ëëŠ”ì§€ ì•Œë ¤ì¤„ ìˆœ ì—†ì„ê¹Œ? ê·¸ ì •ë³´ë¥¼ ë°˜í™˜í•  ìˆ˜ ìˆì„ê¹Œ? 
ì˜ˆë¥¼ ë“¤ì–´ ìƒì„±ëœ ì‚¬ìš©ìëŠ” ì–˜ì´ë‹¤, í•˜ê³  /users/4ë¥¼ ë°˜í™˜í•  ìˆœ ì—†ì„ê¹Œ, ì´ê²ƒì´ë‹¤
/users/4ë¥¼ URLë¡œ ë°˜í™˜í•˜ë©´ ì†Œë¹„ìëŠ” ì—¬ê¸°ì— ìš”ì²­ì„ ë³´ë‚¼ ìˆ˜ ìˆê²Œ ë˜ê² ì§€
localhost:8080/users/4ë¡œ ì¡°íšŒë¥¼ í•  ìˆ˜ ìˆê²Œë§ì´ë‹¤
------------------------------------------------------------------------------------------------------------------------------

ğŸŒ http://localhost:8080/users/4 ì‚¬ì´íŠ¸ í™”ë©´==>


{
"id": 4,
"name": "Ravi",
"birthDate": "1999-05-20"
}

------------------------------------------------------------------------------------------------------------------------------

ì´ URLì„ ë°˜í™˜í•˜ë©´ ì†Œë¹„ìëŠ” ì´ê±¸ í†µí•´ ìƒì„±ëœ ì‚¬ìš©ìì˜ ì •ë³´ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤ 

ê·¸ëŸ¼ ì´ê±´ ì–´ë–»ê²Œ êµ¬í˜„í•˜ë©´ ë ê¹Œ?
ë³´í†µì€ ìƒì„±ëœ ë¦¬ì†ŒìŠ¤ì˜ URLì„ ë°˜í™˜í•  ë•Œ ì‚¬ìš©í•˜ëŠ” HTTP í—¤ë”ê°€ ìˆë‹¤
ë°”ë¡œ location í—¤ë”ì¸ë°, created ë©”ì†Œë“œ, ResponseEntityì˜ created ë©”ì†Œë“œëŠ” ì‚¬ì‹¤ URI locationì„ ì¸ìë¡œ ë°›ëŠ”ë‹¤ 
ë°”ë¡œ êµ¬í˜„í•´ ë³´ë„ë¡ í•˜ê² ë‹¤

------------------------------------------------------------------------------------------------------------------------------



âº UserResource í´ë˜ìŠ¤íŒŒì¼



package com.in28minutes.rest.webservices.restfulwebservices.user;

import java.util.*;

import org.springframework.http.*;
import org.springframework.web.bind.annotation.*;

@RestController
public class UserResource {

	private UserDaoService service;
	
	public UserResource(UserDaoService service) {
		this.service = service;
	}
	
	@GetMapping("/users")
	public List<User> retrieveAllUsers() {
		
		return service.findAll();
	}
	
	@GetMapping("/users/{id}")
	public User retrieveUser(@PathVariable int id) {
		
		return service.findOne(id);

	}

	@PostMapping("/users")
	public ResponseEntity<User> createUser(@RequestBody User user) {
    //2-2: ì´ë¦„ì€ savedUserë¼ê³  í•˜ê² ë‹¤ ê·¸ë¦¬ê³  //2-3: ë‹¤ì‹œ URI locationìœ¼ë¡œ.. 
		User savedUser = service.save(user);

    //2-1:ì—¬ê¸°ì— URL ì „ì²´ë¥¼ ë„£ëŠ” ëŒ€ì‹  í˜„ì¬ ìš”ì²­ì´ ë³´ë‚´ì§€ëŠ” URLì„ í™œìš©í•˜ê² ë‹¤, í˜„ì¬ ìš”ì²­ì€ í•­ìƒ ì´ URLë¡œ(/users) ì˜¨ë‹¤, ì—¬ê¸°ì— /4ë¼ê³  ë¶™ì—¬ì£¼ê³  ì‹¶ë‹¤ ê·¸ëŸ°ë° /4ë¼ê³  ë°”ë¡œ ë¶™ì—¬ì£¼ëŠ” ê²Œ ì•„ë‹ˆë¼ /usersë‹¤ìŒì— ì•„ì´ë”” ê°’ì„ ë¶™ì—¬ì¤˜ì•¼ê² ì§€?, ì´ ì•„ì´ë””ì—” ì‚¬ìš©ìì˜ ì•„ì´ë”” ê°’ì„ ë„£ì–´ì¤˜ì•¼ê² ê³  ì¦‰ user.getID ê°’ì¸ ê±°ë‹¤
    //ê·¸ëŸ¼ /users ë¶€ë¶„ì„ ì·¨ë“í•˜ê³  ê±°ê¸°ì— /{id}ë¥¼ ë¶™ì—¬ì£¼ëŠ” ì‘ì—…ì´ í•„ìš”í•˜ë‹¤ ì´ id ë¶€ë¶„ì€ user.getIDì˜ ê°’ì´ ë“¤ì–´ê°€ì•¼ í•˜ê³  ì, ë°”ë¡œ ì ìš©í•´ ë³´ì
    //ì, ë‹¤ì‹œ ë¨¼ì € í˜„ì¬ ë©”ì†Œë“œì˜ URLì´ í•„ìš”í•˜ë‹¤ ì´ëŸ° ë° ìœ ìš©í•œ Springì´ ì œê³µí•˜ëŠ” ë¹ŒíŠ¸ì¸ ìœ í‹¸ë¦¬í‹° ë©”ì†Œë“œê°€ ìˆëŠ”ë° ServletUriì„ ì…ë ¥í•˜ê³  ctrl+ìŠ¤í˜ì´ìŠ¤ë°”ë¥¼ ëˆ„ë¥´ë©´ í´ë˜ìŠ¤ê°€ ë‚˜ì˜¨ë‹¤ ServletUriComponentsBuilderë¼ê³  ë‚˜ì˜¨ë‹¤ ì•ˆì— ë³´ë©´ fromCurrentRequestë€ ë©”ì†Œë“œê°€ ìˆë‹¤ í˜„ì¬ ìš”ì²­ì— í•´ë‹¹í•˜ëŠ” URLì„ ë°˜í™˜í•œë‹¤. (/users)ì´ ë¶€ë¶„ì€ ì¤€ë¹„ê°€ ëë‹¤, ë³¸ ìš”ì²­ì— í•´ë‹¹í•˜ëŠ” URLì€ ì¤€ë¹„ê°€ ëë‹¤
    //ë‹¤ìŒìœ¼ë¡œ ì¶”ê°€í•  ê±´ ê²½ë¡œì´ë‹¤ path()ë¥¼ ì¶”ê°€í•´ ì¤€ë‹¤ /{id}ë¥¼ ì—¬ê¸°ì— ë„£ì–´ì¤€ë‹¤ í˜„ì¬ ìš”ì²­ì— í•´ë‹¹í•˜ëŠ” URLì— ì´ ë¶€ë¶„ì„ ì¶”ê°€í•˜ê³  ì‹¶ë‹¤, ì´ idë¼ëŠ” ë¶€ë¶„ì€ ë°”ê¿”ì¤˜ì•¼ í•œë‹¤. ìƒì„±ëœ ì‚¬ìš©ìì˜ ì•„ì´ë””ë¡œ ë§ì´ë‹¤ .buildAndExpandë¥¼ ì¶”ê°€í•˜ê³  ê·¸ë¦¬ê³  ì•„ì´ë”” ê°’ì„ ë„£ì–´ì¤˜ì•¼ í•˜ëŠ”ë° service.save(user)ê°€ Userë¥¼ ë°˜í™˜í•œë‹¤ ë°˜í™˜ê°’ì„ ìƒˆ ë³€ìˆ˜ì— ì €ì¥í•˜ê² ë‹¤ //2-2: service.save(user); ì—¬ê¸°ë¡œ..

    //2-3: savedUser.getId()ë¥¼ í˜¸ì¶œí•´ì¤€ë‹¤ ê·¸ë¦¬ê³  ì´ ê°’ì„ URIë¡œ ë³€í™˜í•´ ì¤˜ì•¼í•œë‹¤ ì½”ë“œê°€ ì¢€ ë³µì¡í•´ ë³´ì¼ ìˆ˜ ìˆëŠ”ë° ë¹ ë¥´ê²Œ í•œ ë²ˆ ë³´ì
		// /users/4 => /users /{id},  user.getID
		URI location = ServletUriComponentsBuilder.fromCurrentRequest()
						.path("{id}")
						.buildAndExpand(savedUser.getId())
						.toUri();  

    //2: locationì´ë¼ê³  ì¨ì¤€ ë‹¤ìŒ ctrl + 1 ì„ ëˆŒëŸ¬ locationì´ë¼ëŠ” ì§€ì—­ ë³€ìˆ˜ë¥¼ ìƒì„±í•œë‹¤, ì´ ì •ë³´ë¥¼ ì•Œê³  ì‹¶ìœ¼ë‹ˆ ì´ê±¸ ìƒì„±í•´ì„œ HTTP ì‘ë‹µì— ë‹´ì•„ ë³´ë‚´ì•¼ í•œë‹¤ //2-1: service.save(user); ì•„ë˜ë¡œ ì‘ì„±..
		return ResponseEntity.created(location).build();
	}
}

------------------------------------------------------------------------------------------------------------------------------
ë‹¨ê³„ë³„ë¡œ ë³´ê³  ì´í•´ë¥¼ í•´ ë³´ì
ServletUriComponentsBuilder.fromCurrentRequest() <= í˜„ì¬ ìš”ì²­ì˜ URLì— ì¶”ê°€í•˜ê³  ì‹¶ì€ ê±´ path("/{id}")ì´ë‹¤
ì´ ë³€ìˆ˜ëŠ” ìƒì„±ëœ ì‚¬ìš©ìì˜ ì•„ì´ë””ë¡œ ë°”ê¿”ì£¼ê³  ì‹¶ë‹¤ .buildAndExpand(savedUser.getId())
ê·¸ê±¸ URLë¡œ ë³€í™˜í•˜ê³  ë³€í™˜í•´ì¤˜ì•¼ í•œë‹¤ 
ì—¬ê¸°ì— ë°˜í™˜ëœ locationì´ ìˆê³ , ì´ location ì„ ResponseEntityì— ë‹´ì•„(return ResponseEntity.created(location).build();) ë³´ë‚´ëŠ” ê²ƒì´ë‹¤
ì´ê±¸ ì €ì¥í•˜ë©´ ì„œë²„ê°€ ì¬ê¸°ë™í•œë‹¤
í˜„ì¬ ì‚¬ìš©ìëŠ” 3ëª…ë¿ì´ë‹¤ 
