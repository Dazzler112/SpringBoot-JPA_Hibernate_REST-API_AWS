

ì´ì „ ë‹¨ê³„ì—ì„  í”„ë¡œí•„ì„ ì•Œì•„ë´¤ë‹¤ 
í”„ë¡œí•„ì„ ì‚¬ìš©í•˜ë©´ ë‹¤ì–‘í•œ í™˜ê²½ì— ë§ëŠ” ì—¬ëŸ¬ ì„¤ì •ì„ ë³´ìœ í•  ìˆ˜ ìˆì—ˆë‹¤
ì´ ë‹¨ê³„ì—ì„  ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë³µì¡í•œ ì„¤ì •ì„ ì§€ì •í•˜ëŠ” ë°©ë²•ì„ ì‚´í´ë³¸ë‹¤

ê·¸ëŸ¼, í˜„ì¬ í†µì‹ í•˜ê³  ìˆëŠ” í†µí™” ì„œë¹„ìŠ¤ê°€ ìˆìœ¼ë©° ì´ ì„œë¹„ìŠ¤ì˜ ì—¬ëŸ¬ ê°’ì„ ì„¤ì •í•œë‹¤ê³  ê°€ì •í•˜ì

------------------------------------------------------------------------------------------------------------

âº application.properties


logging.level.org.springframework=debug
spring.profiles.active=dev

#currency-service.url, currency-service.username, currency-service.keyë¥¼ ì„¤ì •í•˜ë ¤ í•œë‹¤
#ë˜í•œ ë‹¤ë¥¸ ì—¬ëŸ¬ ì„œë¹„ìŠ¤ë¥¼ ìœ„í•´ì„œë„ ë‹¤ì–‘í•œ ì„¤ì •ì´ í•„ìš”í•˜ë‹¤ê³  ê°€ì •í•´ ë³´ê² ë‹¤
currency-service.url=
currency-service.username=
currency-service.key=

?
------------------------------------------------------------------------------------------------------------
Spring Bootë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì •ì„ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì€ ë¬´ì—‡ì¼ê¹Œ?
ì—¬ê¸°ì„œ í”„ë¡œí¼í‹° ê°’ì„ ì •ì˜í•˜ê³  Spring Boot ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ í™œìš©í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì€ ë¬´ì—‡ì¼ê¹Œ?
ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìœ„í•´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì •ì„ ë§ì´ ìƒì„±í•˜ë ¤ëŠ” ê²½ìš° Spring Bootì—ì„œ ê¶Œì¥ë˜ëŠ” ë°©ì‹ì€ configuration í”„ë¡œí¼í‹°ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤

í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ ë³´ì


-------------------------------------------------------------------------------------------------------------


âº CurrencyServiceConfiguration í´ë˜ìŠ¤íŒŒì¼



package com.springstudy.springboot.learnspringboot;

import org.springframework.boot.context.properties.*;
import org.springframework.stereotype.*;

//1: ì´ì œ ì—¬ê¸°ì„œ ì •ì˜í•˜ë ¤ëŠ” ë‚´ìš©ì€ ë­˜ê¹Œ? ë‹¤ì‹œ applicagtion.propertiesì•  ì•˜ëŠ” ,url, username, key ê°’ì„ ì •ì˜í•˜ë ¤ í•œë‹¤
//ì—¬ê¸°ì„œëŠ” ì´ ê°’ì„ ì–´ë–»ê²Œ ì •ì˜í•˜ëŠ”ì§€ ì‚´í´ë³´ê² ë‹¤
//currency-service.url=
//currency-service.username=
//currency-service.key=

//2: ìš°ì„  ConfigurationPropertiesë¼ëŠ” ì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•´ì•¼ í•œë‹¤ ì‚¬ìš©í•  ì ‘ë‘ì‚¬ëŠ” currency-serviceì´ë‹¤
//ëª¨ë“  ê°’ì— ê°™ì€ ì ‘ë‘ì‚¬ë¥¼ ì‚¬ìš©í•  ê²ƒì´ë¯€ë¡œ ctrl+spaceë¥¼ ëˆ„ë¥´ë©´ ì—¬ê¸° prefixê°€ ìˆë‹¤, ê·¸ëŸ¬ë©´ prefixë¡œ currency-serviceë¥¼ ì„¤ì •í•˜ë©´ ëœë‹¤
@ConfigurationProperties(prefix = "currency-service")
//3-2: Springìœ¼ë¡œ ì´ë¥¼ ê´€ë¦¬í•  ê²ƒì´ë‹¤ ë”°ë¼ì„œ @Componentë¥¼ ì¶”ê°€í•´ì•¼ í•œë‹¤
//ì´ì œ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì¤€ë¹„ë˜ì—ˆë‹¤, ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ConfigurationPropertiesì™€ ì´ê²ƒë“¤ì„( //currency-service.url=, username=, key= ) ì´í•´í•œë‹¤ ì´ ê°’ì„ ì–´ë””ì—ì„œ ì„¤ì •í• ê¹Œ??
//ë°”ë¡œ application.propertiesì—ì„œ ì„¤ì •í•˜ë©´ ëœë‹¤ //4: application.propertiesë¡œ...
@Component
public class CurrencyServiceConfiguration {

	//3: ê·¸ë ‡ë‹¤ë©´ ë³´ìœ í•  í”„ë¡œí¼í‹°ëŠ” ë¬´ì—‡ì¼ê¹Œ? private String url, username, keyì´ë‹¤
	//ì´ê²ƒì´ CurrencyServiceConfigurationì— ì €ì¥í•  ì„¸ ê°€ì§€ ì†ì„±ì´ë‹¤
	private String url;
	private String username;
	private String key;
	
	//3-1: ì´ì œ ìƒì„±ìì™€ setterë¥¼ ìƒì„±í•´ ë³´ê² ë‹¤, 
	//url,username, keyë¥¼ ì„ íƒí•˜ê³  getter,setterë¥¼ ìƒì„±í•œë‹¤
	//prefix(ì ‘ë‘ì‚¬)ëŠ” currency-serviceë¡œ ì •ì˜ë˜ê³  ëª¨ë“  í”„ë¡œí¼í‹°ë„ ì •ì˜ë˜ì–´ ìˆë‹¤
	//ë˜ ìœ„ë¡œ ê°€ì„œ @Component ì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•´ì•¼ í•œë‹¤ //3-2:CurrencyServiceConfiguration ìœ„ë¡œ component ì–´ë…¸í…Œì´ì…˜ ì¶”ê°€...
	
	public String getUrl() {
		return url;
	}
	public void setUrl(String url) {
		this.url = url;
	}
	public String getUsername() {
		return username;
	}
	public void setUsername(String username) {
		this.username = username;
	}
	public String getKey() {
		return key;
	}
	public void setKey(String key) {
		this.key = key;
	}
	
}

-------------------------------------------------------------------------------------------------------------



-------------------------------------------------------------------------------------------------------------

âº application.properties


logging.level.org.springframework=debug
spring.profiles.active=dev

#urlì€ http://default.in28minutes.comìœ¼ë¡œ í•˜ê³  ë‘ ë²ˆì§¸ëŠ” defaultusername ì„¸ ë²ˆì§¸ëŠ” defaultkeyë¡œ í•œë‹¤ 
currency-service.url=http://default.in28minutes.com
currency-service.username=defaultusername
currency-service.key=defaultkey

-------------------------------------------------------------------------------------------------------------
ì´ì œ application.propertiesì—ëŠ” ì´ëŸ° í”„ë¡œí¼í‹°ê°€ ì„¤ì •ë˜ì–´ ìˆê³ // CurrencyServiceConfigurationì—” CurrencyServiceConfigurationì´ ìˆëŠ”ë° ì´ê²ƒì„ ì—¬ê¸° ìˆëŠ” í”„ë¡œí¼í‹°ì— ë§¤í•‘í•œë‹¤
ì´ì œ ì½”ë“œê°€ ì‘ë™í•˜ëŠ”ì§€, application.propertiesì—ì„œ CurrncyServiceConfigurationìœ¼ë¡œì˜ ë§¤í•‘ì´ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•´ ë³´ê³˜ë‹¤
ë¹ ë¥´ê²Œ í™•ì¸í•  ìˆ˜ ìˆëŠ” í•œ ê°€ì§€ ë°©ë²•ì€ ê°„ë‹¨í•œ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë§Œë“œëŠ” ê²ƒì´ë‹¤
ê·¸ëŸ¼ CouserControllerë¥¼ ë³µì‚¬í•´ì„œ ë¶™ì—¬ ë„£ê³  ì´ë¦„ì„ CurrencyConfigurationControllerë¡œ ì§€ì •í•œë‹¤


-------------------------------------------------------------------------------------------------------------


âº CurrencyConfigurationController í´ë˜ìŠ¤íŒŒì¼



package com.springstudy.springboot.learnspringboot;

import org.springframework.beans.factory.annotation.*;
import org.springframework.web.bind.annotation.*;

@RestController                 
public class CurrencyConfigurationController {
	//3: ì—¬ê¸°ì„œ í•  ì‘ì—…ì€ ìë™ìœ¼ë¡œ ì—°ê²°í•˜ëŠ” ê²ƒì´ë‹¤, ê·¸ëŸ¼ @Autowiredë¼ê³  ì…ë ¥í•˜ê³  private CurrencyServiceConfiguration configuration;ì„ ì…ë ¥í•œë‹¤
	//ì´ì œ ì—¬ê¸°ì„œ ë§Œë“  Beanì„ ìë™ ì—°ê²° í–ˆë‹¤ Springì´ ì´ Bean(CurrencyServiceConfiguration)ì„ ë§Œë“¤ë©´ ì±„ì›Œë„£ê³  ì—¬ê¸°ì„œ ìë™ ì„¤ì •í•œë‹¤
	//ì´ì œ í•  ì¼ì€ ì—¬ê¸°ì„œ ë§Œë“  ê°„ë‹¨í•œ ì„œë¹„ìŠ¤ì˜ ì‘ë‹µìœ¼ë¡œ ì´ë¥¼ ë°˜í™˜í•˜ëŠ” ê²ƒì´ë‹¤ //4: ë‹¤ì‹œ CurrencyServiceConfiguration í´ë˜ìŠ¤ ì•ˆìœ¼ë¡œ..
	@Autowired
	private CurrencyServiceConfiguration configuration;
	
	//1: ì—¬ê¸°ì—ì„  currency-configurationì„ ë°˜í™˜í•˜ê³ 
	@RequestMapping("/currency-configuration")
	//2: ì—¬ê¸°ëŠ” ì´ listë¥¼ ë°˜í™˜í•˜ëŠ” ê²Œ ì•„ë‹ˆë¼ CurrencyServiceConfigurationì„ ë°˜í™˜í•œë‹¤, .
	//ê·¸ë¦¬ê³  Springì—ì„œ ë§Œë“  ì´ CurrencyServiceConfigurationì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ì ¸ì˜¤ë ¤ í•œë‹¤ ì—¬ê¸° @Componenetê°€ ìˆëŠ”ë° Springì´ ì´ê²ƒì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“ ë‹¤
	public CurrencyServiceConfiguration retrieveAllCourses (){
		
		//4: ì´ë¥¼ í†µí•´ ê°’ì„ ì‚´í´ë³¼ ìˆ˜ ìˆëŠ”ë°, ê°’ì€ ì§€ê¸ˆ ì„¤ì •í•´ ë³´ê² ë‹¤ //ì‹¤í–‰í•˜ê³  localhost:8080/currency-configuration ê²€ìƒ‰..
		return configuration;
	}
	
}

-------------------------------------------------------------------------------------------------------------


-------------------------------------------------------------------------------------------------------------

ğŸŸ¢ localhost:8080/currency-configuration ê²€ìƒ‰ê²°ê³¼ :


{
"url": "http://default.in28minutes.com",
"username": "defaultusername",
"key": "defaultkey"
}

ê²€ìƒ‰í•˜ë©´ application.propertiesì—ì„œ ì„¤ì •í•œ ê°’ì´ ì´ë ‡ê²Œ í‘œì‹œëœë‹¤, default.in28minutes.com, defaultusername, defaultkeyê°€ í‘œì‹œëœë‹¤
-------------------------------------------------------------------------------------------------------------

ë‹¤ì‹œ application.propertiesë¡œ ê°€ì„œ

-------------------------------------------------------------------------------------------------------------

âº application.properties


logging.level.org.springframework=debug
spring.profiles.active=dev

#í”„ë¡œí¼í‹°ë¥¼ http://default1.in28minutes.comë¡œ ë³€ê²½í•˜ê³  ì €ì¥í•´ ë³´ê² ë‹¤
currency-service.url=http://default1.in28minutes.com
currency-service.username=defaultusername
currency-service.key=defaultkey

-------------------------------------------------------------------------------------------------------------

ë³€ê²½í›„ ì‚¬ì´íŠ¸ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ë©´

-------------------------------------------------------------------------------------------------------------

ğŸŸ¢ localhost:8080/currency-configuration ê²€ìƒ‰ê²°ê³¼ :


{
"url": "http://default1.in28minutes.com",
"username": "defaultusername",
"key": "defaultkey"
}

ì´ì œ application.propertiesì—ì„œ ë“¤ì–´ì˜¨ ê°’ì´ í‘œì‹œëœë‹¤,
-------------------------------------------------------------------------------------------------------------

í˜„ì¬ application.properties í”„ë¡œí•„ì€ devì¸ë°, ì´ëŸ¬í•œ í”„ë¡œí¼í‹°ë¥¼ deví”„ë¡œí•„ì—ì„œ ì˜¤ë²„ë¼ì´ë”© í•˜ì§€ ì•Šì„ ê²ƒì´ë‹¤
ë”°ë¼ì„œ application-devë¡œ ì„¤ì •ëœ ë””í´íŠ¸ í”„ë¡œí¼í‹°ë¥¼ ì‚¬ìš©í•œë‹¤
ê·¸ëŸ°ë° dev í”„ë¡œí•„ì—ì„œ ë‹¤ë¥¸ í”„ë¡œí¼í‹°ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ?
application-dev.propertiesë¡œ ì´ë™í•˜ì—¬ ì—¬ê¸°ì„œ ì„¤ì •í•˜ë©´ ëœë‹¤

-------------------------------------------------------------------------------------------------------------

âº application-dev.properties


logging.level.org.springframework=trace

#urlì€ dev.in28minutes, usernameì€ devusername, keyëŠ” devkeyë¡œ í•œë‹¤
currency-service.url=http://dev.in28minutes.com
currency-service.username=devusername
currency-service.key=devkey

#ì—¬ê¸°ì„œ í•˜ê³  ìˆëŠ” ì‘ì—…ì€ dev í™˜ê²½ì—ì„œ ë‹¤ë¥¸ ê°’ì„ ì„¤ì •í•˜ê³  ìˆëŠ” ê²ƒì´ë‹¤ ì €ì¥í•˜ê³ 
-------------------------------------------------------------------------------------------------------------

ê·¸ë¦¬ê³  ìƒˆë¡œê³ ì¹¨í•˜ë©´ ì´ì œ deví™˜ê²½ì—ì„œ ë“¤ì–´ì˜¤ëŠ” ê°’ì´ í‘œì‹œëœë‹¤

-------------------------------------------------------------------------------------------------------------

ğŸŸ¢ localhost:8080/currency-configuration ê²€ìƒ‰ê²°ê³¼ :


{
"url": "http://dev.in28minutes.com",
"username": "devusername",
"key": "devkey"
}

-------------------------------------------------------------------------------------------------------------

ì´ì™€ ê°™ì´ ë³µì¡í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì •ì„ ë§Œë“¤ì–´ì•¼ í•œë‹¤ë©´, ê·¸ëŸ¬í•œ ìƒí™©ì—ì„ 
@ConfigurationPropertiesë¥¼ ì‚¬ìš©í•˜ë©´ëœë‹¤,

@ConfigurationProperties(prefix = "currency-service")
@Component
public class CurrencyServiceConfiguration {....

@ConfigurationPropertiesëŠ” ì‚¬ìš©í•˜ê¸° ì•„ì£¼ ì‰¬ìš´ë° Spring ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ê³  @ConfigurationPropertiesë¡œ ì–´ë…¸í…Œì´ì…˜ì„ ë‹¬ë©´ ëœë‹¤

	private String url;
	private String username;
	private String key;

ì—¬ê¸°ì— ì›í•˜ëŠ” ë§Œí¼ í”„ë¡œí¼í‹°ë¥¼ ì…ë ¥í•  ìˆ˜ ìˆë‹¤
ì—¬ê¸°ì— ìˆ˜ë°± ê°œì˜ í”„ë¡œí¼í‹°ë¥¼ ì •ì˜í•´ ë†“ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë³¸ ì ì´ ìˆëŠ”ë°, 
ì´ê²ƒì€ ëª¨ë“  ì• í”Œë¦¬ì¼€ì´ì…˜ ê´€ë ¨ ì„¤ì •ì„ ìœ„í•œ ì¤‘ì•™ì§‘ì¤‘í™”ëœ í´ë˜ìŠ¤ ì—­í• ì„ í•œë‹¤



Spring Bootì˜ ConfigurationPropertiesì™€ í”„ë¡œí•„ì˜ ì¡°í•©ì€ ì •ë§ ê°•ë ¥í•˜ë‹¤ 
ì´ë¥¼ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…˜ì— í•„ìš”í•œ ëª¨ë“  ì„¤ì •ì„ ì™¸ë¶€í™” í•  ìˆ˜ ìˆë‹¤

ì´ ë‹¨ê³„ì—ì„  ConfigurationPropertiesì™€ í”„ë¡œí•„ì— ê´€í•´ ì•Œì•„ë´¤ë‹¤ 
