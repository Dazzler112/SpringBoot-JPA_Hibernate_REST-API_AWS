


Validations with Spring Boot
                                                                                                                                                                  
â— 1: Spring Boot Starter Validation                                                                                                                                                                  
  â–  pom.xml                                                                                                                                                                  
â— 2: Command Bean (Form Backing Object)                                                                                                                                                                  
  â–  2-way binding (todo.jsp & TodoController.java)                                                                                                                                                                  
â— 3: Add Validations to Bean                                                                                                                                                                 
  â–  Todo.java                                                                                                                                                                  
â— 4: Display Validation Errors in the View                                                                                                                                                                  
  â–  Todo.java                                                                                                                                                                      

ì§€ë‚œ ë‹¨ê³„ì—ì„œ ìš°ë¦¬ëŠ” Todo ì–‘ì‹ì— ì»¤ë§¨ë“œ ë¹ˆ ë˜ëŠ” ì–‘ì‹ ë³´ì¡° ê°ì²´ë¥¼ êµ¬í˜„í–ˆê³ , ê·¸ê²Œ ì–‘ë°©í–¥ ë°”ì¸ë”©ì„ êµ¬í˜„í•˜ê³  ìˆë‹¤ê³  í–ˆë‹¤
ê·¸ê±¸ ì¢€ ìì„¸íˆ ì•Œì•„ë³´ì

Add Todo í˜ì´ì§€ë¥¼ ë¡œë”©í•  ë•Œ ìš°ë¦¬ëŠ” Add Todoì— GET ìš”ì²­ì„ ì „ì†¡í•˜ê³  ìˆë‹¤ 
	
//GET, POST
	@RequestMapping(value="add-todo",method=RequestMethod.GET)
	public String showNewTodoPage(ModelMap model) {
		String username = (String)model.get("name");
		Todo todo = new Todo(0, username, "", LocalDate.now().plusYears(1), false);
		model.put("todo", todo);
		return "todo";
	}

ì´ë ‡ê²Œ í˜ì´ì§€ê°€ ë¡œë”©ëœë‹¤ ìš°ë¦° ì—¬ê¸°ì„œ ë­˜ í•˜ê³  ìˆì„ê¹Œ?
ìš°ë¦¬ëŠ” Todoë¥¼ ìƒì„±í•˜ê³  ê·¸ê±¸ 
		Todo todo = new Todo(0, username, "", LocalDate.now().plusYears(1), false);
		model.put("todo", todo);
ì—¬ê¸°ì— ìˆëŠ” ì–‘ì‹ì— ë§¤í•‘í•˜ê³  ìˆë‹¤ 
ê·¸ëŸ¼ ê·¸ê±¸ ì¦ëª…í•´ë³¼ê¹Œ?
ì—¬ê¸°ì„œ ê°’ ëª‡ ê°œë¥¼ ì˜ˆë¡œ ë“¤ì–´ë³´ì

ğŸ”µ ë‹¨ë°©í–¥ ì˜ˆì‹œ
----------------------------------------------------------------------------------------------------


âº TodoController í´ë˜ìŠ¤íŒŒì¼


package com.firstapplication.springboot.myfirstwebapp.todo;

import java.time.*;
import java.util.*;

import org.springframework.stereotype.*;
import org.springframework.ui.*;
import org.springframework.web.bind.annotation.*;

@Controller
public class TodoController {

	
	private TodoService todoService;
	
	public TodoController(TodoService todoService) {
		super();
		this.todoService = todoService;
	}

	@RequestMapping("list-todos")
	public String listAllTodos(ModelMap model) {
		List<Todo> todos = todoService.findByUsername("in28minutes");
		model.addAttribute("todos", todos);
		
		return "listTodos";
	}
	
	//GET, POST
	@RequestMapping(value="add-todo",method=RequestMethod.GET)
	public String showNewTodoPage(ModelMap model) {
		String username = (String)model.get("name");

    //1: ì—¬ê¸°ì„œ "Default Des"ë¼ê³  ì…ë ¥í•´ë³´ê² ë‹¤
    //ì´ë ‡ê²Œ new Todo Beanì— ë„Œ Default Descriptionì„ ì±„ìš°ê³  ìˆë‹¤, ì—¬ê¸°ì„œ ë„ˆê°€ ì–´ë–¤ ê°’ì„ ë„£ì–´ë„ ë„ˆëŠ” ê·¸ê±¸ ì–‘ì‹ì—ì„œ ë³¼ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤ ê·¸ëŸ¼ ëŒì•„ê°€ì„œ Add Todoë¥¼ í´ë¦­í•´ë³´ì
		Todo todo = new Todo(0, username, "Default Desc", LocalDate.now().plusYears(1), false);
		model.put("todo", todo);
		return "todo";
	}
	
	@RequestMapping(value="add-todo",method=RequestMethod.POST)
	public String addNewTodo(ModelMap model, Todo todo) {
		String username = (String)model.get("name");
		todoService.addTodo(username, todo.getDescription(), 
				LocalDate.now().plusYears(1), false);
		
		return "redirect:list-todos";
	}
}


----------------------------------------------------------------------------------------------------
                                                               |
                                                               V
---------------------------------------------------------------------------------------------------------

http://localhost:8087/add-todo í˜ì´ì§€ í™”ë©´ ==>


      Enter Todo Details
                    _____________________   ________
      Description: |Default Desc         | |  ì œì¶œ  |
                    â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾   â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾

---------------------------------------------------------------------------------------------------------

ì´ë ‡ê²Œ Default Descê°€ ë“¤ì–´ì˜¨ ê±¸ ë³¼ ìˆ˜ ìˆë‹¤
ì´ê²Œ ë‹¨ë°©í–¥ ë°”ì¸ë”©ì´ë‹¤, ë„ˆê°€ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì–‘ì‹ì— í‘œì‹œë˜ëŠ” ê°’ìœ¼ë¡œ ë°”ì¸ë”©ë˜ëŠ” ê²ƒì´ë‹¤
ê·¸ê²Œ í•œ ë°©í–¥ì´ê³  


ğŸ”µ ë‘ ë²ˆì§¸ ë°©í–¥ ì˜ˆì‹œ

ë‘ ë²ˆì§¸ ë°©í–¥ì€ ë­˜ê¹Œ? ë‘ë²ˆì§¸ ë°©í–¥ì€ ë„ˆê°€ ì—¬ê¸°ì— ì…ë ¥í•˜ëŠ” ê°’ì´ë‹¤
ê·¸ëŸ¼ Learning DevOpsë¼ê³  ì ì–´ë³´ì
---------------------------------------------------------------------------------------------------------

http://localhost:8087/add-todo í˜ì´ì§€ í™”ë©´ ==>


      Enter Todo Details
                    _____________________   ________
      Description: |Learning DevOps      | |  ì œì¶œ  |
                    â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾   â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾

---------------------------------------------------------------------------------------------------------
ì´ ê°’ë“¤ì€ POST ìš”ì²­ì— ë§¤í•‘ë˜ì–´ì•¼ í•œë‹¤
ìš°ë¦¬ëŠ” POST ìš”ì²­ì„ í•˜ê³  ìˆê³ , ì´ê²ƒì´ Todoì— ì´ë£¨ì–´ì§€ëŠ” ë°”ì¸ë”©ì´ë‹¤, ë‹ˆê°€ Submit(ì œì¶œ)ì„ í´ë¦­í•˜ë©´ 
	
@RequestMapping(value="add-todo",method=RequestMethod.POST)
	public String addNewTodo(ModelMap model, Todo todo) {
		String username = (String)model.get("name");
		todoService.addTodo(username, todo.getDescription(), 
				LocalDate.now().plusYears(1), false);
		
		return "redirect:list-todos";
	}

ì´ Learning DevOpsê°€ Todo ë³€ìˆ˜ì˜ Description í•„ë“œì— ë°”ì¸ë”© ë  ê²ƒì´ë‹¤ ê·¸ëŸ¼ Submitì„ í•´ë³´ì
                                                        |
                                                        V
---------------------------------------------------------------------------------------------------------

http://localhost:8087/list-todos í˜ì´ì§€í™”ë©´==>

      Your Todos
      
      id	Description	                    Taget Date	   Is Done?
      â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
      4	Learn AWS	                        2025-04-29	   false
      -----------------------------------------------------------
      5	Learn DevOps	                    2026-04-29	   false
      -----------------------------------------------------------
      6	Learn Full Stack Development	    2027-04-29     false
      -----------------------------------------------------------
      7 Learning DevOps                   2025-04-29     false
      -----------------------------------------------------------
      _________________
     | Add Todo(ë…¹ë°”íƒ•) |
      â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾

---------------------------------------------------------------------------------------------------------
Learning DevOpsê°€ ì—¬ê¸° ë“¤ì–´ì˜¤ëŠ” ê±¸ ë³¼ ìˆ˜ ìˆë‹¤ 
ì´ë ‡ê²Œ todoService.addTodo(username, todo.getDescription(), LocalDate.now().plusYears(1), false); ì˜ todo.getDescription() ì—¬ê¸° ë°”ì¸ë”© ë˜ê³  ì´ê²Œ Todo ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€ë˜ê³  ê·¸ê±¸ http://localhost:8087/list-todos ì—¬ê¸°ì„œ ë³¼ ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤

ê·¸ë˜ì„œ ì´ê±¸ ì–‘ë°©í–¥ ë°”ì¸ë”©ì´ë¼ê³  ë¶€ë¥¸ë‹¤, ë„ˆì˜ Beanì—ì„œ ì–‘ì‹ìœ¼ë¡œ ë°”ì¸ë”©ë˜ê³ , ë„ˆì˜ ì–‘ì‹ì—ì„œ Beanìœ¼ë¡œ ë°”ì¸ë”© ëœë‹¤
ì–‘ë°©í–¥ ë°”ì¸ë”©ì˜ ì¥ì ì€ ë„ˆì—ê²Œ ë§ì€ ìœ ì—°ì„±ì„ ì¤€ë‹¤ëŠ” ì ì´ë‹¤ 

ë‚˜ì¤‘ì— ë„ˆëŠ” ìš°ë¦¬ê°€ ê²€ì¦ì„ êµ¬í˜„í•  ë•Œ ì˜¤ë¥˜ë¥¼ í‘œì‹œí•˜ëŠ” ê²Œ ì•„ì£¼ ì‰¬ì›Œì§€ëŠ” ê±¸ ë³´ê²Œ ë  ê²ƒì´ë‹¤
ì§€ê¸ˆ ìš°ë¦¬ëŠ” Description í•„ë“œë§Œ ë§¤í•‘í•˜ê³  ìˆì§€ 
ë‚˜ì¤‘ì— ìš°ë¦¬ê°€ Target Date í•„ë“œë¥¼ ë§¤í•‘í•˜ë©´ Target Date í•„ë“œë„ ì‰½ê²Œ ë§¤í•‘í•  ìˆ˜ ìˆê²Œ ëœë‹¤




Validations with Spring Boot
                                                                                                                                                                  
â— 1: Spring Boot Starter Validation                                                                                                                                                                  
  â–  pom.xml                                                                                                                                                                  
â— 2: Command Bean (Form Backing Object)                                                                                                                                                                  
  â–  2-way binding (todo.jsp & TodoController.java)                                                                                                                                                                  
â— 3: Add Validations to Bean                                                                                                                                                                 
  â–  Todo.java                                                                                                                                                                  
â— 4: Display Validation Errors in the View                                                                                                                                                                  
  â–  Todo.java  

ì´ì œ ì–‘ë°©í–¥ ë°”ì¸ë”©ì´ ë¬´ì—‡ì¸ì§€ ì•Œì•˜ê³ , ì´ì œ ë‹¤ìŒë‹¨ê³„ë¡œ ë„˜ì–´ê°€ë³¼ê¹Œ? 
ì¦‰ Beanì— ê²€ì¦ì„ ì¶”ê°€í•˜ê³  ê²€ì¦ ì˜¤ë¥˜ë¥¼ ë·°ì— í‘œì‹œí•˜ëŠ” ë‹¨ê³„ì´ë‹¤
ì–´ë–»ê²Œ ê²€ì¦ì„ Beanì— ì¶”ê°€í•  ìˆ˜ ìˆì„ê¹Œ?
ì•„ì£¼ ì•„ì£¼ ì‰½ë‹¤

ë„ˆëŠ” Todoë¡œ ê°„ë‹¤
TodoíŒŒì¼, ì¦‰ Todo.javaë¥¼ ì—´ ìˆ˜ ìˆê³  ì—¬ê¸°ì„œ ê°„ë‹¨í•œ ì–´ë…¸í…Œì´ì…˜ì„ ì¨ì„œ ê²€ì¦ì„ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤

----------------------------------------------------------------------------------------------------


âº Todo í´ë˜ìŠ¤íŒŒì¼


package com.firstapplication.springboot.myfirstwebapp.todo;

import java.time.*;

import jakarta.validation.constraints.*;

//Database (MySQL)
//Staitc List of todos => Database (H2, MySQL)

public class Todo {

	public Todo(int id, String username, String description, LocalDate targetDate, boolean done) {
		super();
		this.id = id;
		this.username = username;
		this.description = description;
		this.targetDate = targetDate;
		this.done = done;
	}

	private int id;
	private String username;

  //2:ì˜ˆë¥¼ ë“¤ì–´ Descriptionì— ìµœì†Œ ê¸¸ì´ë¥¼ ì„¤ì •í•˜ë ¤ í•œë‹¤ê³  í•´ë³´ì, ê·¸ëŸ¼ ë„Œ @Sizeë¼ê³  í•  ìˆ˜ ìˆê³  ê·¸ëŸ¼ ì´ê²Œ jakarta.validation.constraintsì— êµ¬í˜„ëœ ê±¸ ì•Œ ìˆ˜ ìˆë‹¤ ì´ê±¸ ì„ íƒí•˜ë©´ ë„ˆëŠ” ì—¬ê¸° ì„í¬íŠ¸ê°€ ë˜ëŠ” ê±¸ ë³´ê²Œ ë  ê²ƒì´ë‹¤
	//ì´ë ‡ê²Œ jakarta.validation.constraints.Sizeë¼ê³  ë‚˜ì˜¨ë‹¤ ê·¸ë¦¬ê³  ì—¬ê¸° @Size()ì—ì„œ ë„ˆëŠ” min=ì´ë¼ê³  í•˜ê³ , ì˜ˆë¥¼ ë“¤ì–´ 10ì´ë¼ê³  ì ì„ ìˆ˜ ìˆë‹¤
  //ê·¸ë¦¬ê³  ë„ˆëŠ” ë©”ì‹œì§€ë„ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤, ì´ ê²€ì¦ì´ ì‹¤íŒ¨í•˜ë©´ ì–´ë–»ê²Œ ë˜ëŠ”ì§€ë¥¼ ë§í•œë‹¤ "ìµœì†Œí•œ 10ê¸€ìë¥¼ ì…ë ¥í•˜ì‹­ì‹œì˜¤"ë¼ê³  í•´ë³´ì 
  //âœ… validation ì—¬ëŸ¬ì¢…ë¥˜: ë‹¤ë¥¸ ê²€ì¦ë„ ë§ì´ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤, ë§Œì¼ ë„ˆê°€ ì—¬ê¸°ì„œ @Sizeë¥¼ í´ë¦­í•˜ë©´ Size.classê°€ ì—´ë¦¬ê³  Size.class ìì²´ê°€ ë§ì€ ê±¸ ì§€ì›í•˜ëŠ” ê±¸ ë³¼ ìˆ˜ ìˆë‹¤, min(),max()ë“±ë“± ì•„ì£¼ ë§ë‹¤ â‡„ ì•„ì´ì½˜ì„ í´ë¦­í•˜ë©´ jarë¡œ ê°ˆ ìˆ˜ ìˆê³ , ë‹¤ë¥¸ ê²€ì¦ë„ ì•„ì£¼ ë§ì´ ìˆëŠ”ê±¸ ë³¼ ìˆ˜ ìˆë‹¤ ë‚ ì§œê°€ ë¯¸ë˜ ë‚ ì§œì¸ì§€ í™•ì¸í•  ìˆ˜ ìˆê³ (FutureOfPresent.class), ë­”ê°€ ë¹„ì–´ ìˆì§€ ì•Šì€ì§€(NotBlank.class), nullì´ ì•„ë‹Œì§€ë„(NotNull.calss) í™•ì¸í•  ìˆ˜ ìˆë‹¤ ì´ë ‡ê²Œ ë„ˆëŠ” ë§ì€ ê²€ì¦ì„ êµ¬í˜„í•  ìˆ˜ ìˆê³ , ì´ ëª¨ë“  ê²ƒë“¤ì´ ëª¨ë‘ jakarta Validation APIì—ì„œ ì˜¤ê³ ìˆë‹¤
  //ìš°ë¦° ì´ Spring Boot Starter Validationì„ ì„í¬íŠ¸í•´ì„œ ì´ jarë¥¼ ìš°ë¦¬ í”„ë¡œì íŠ¸ë¡œ ê°€ì ¸ì˜¨ë‹¤ ì´ë ‡ê²Œ ë„ˆê°€ êµ¬í˜„í•  ìˆ˜ ìˆëŠ” ë‹¤ë¥¸ ê²€ì¦ë„ ì•„ì£¼ ë§ê³  ì§€ê¸ˆì€ ê·¸ëƒ¥ ê°„ë‹¨íˆ ì´ Size ê²€ì¦ë§Œ êµ¬í˜„í•´ë³´ë„ë¡ í•˜ê² ë‹¤ @Size(min=10, message="ìµœì†Œí•œ 10ê¸€ìë¥¼ ì…ë ¥í•˜ì‹­ì‹œì˜¤") ë¼ê³  í•´ì£¼ì ì´ëŸ¬ë©´ ì–´ë–»ê²Œ ë˜ëŠ”ì§€ í•œ ë²ˆ ë³¼ê¹Œ?
	@Size(min=10, message="Enter atleast 10 characters")  
  private String description;

	private LocalDate targetDate;
	private boolean done;
	
	public int getId() {
		return id;
	}
	public void setId(int id) {
		this.id = id;
	}
	public String getUsername() {
		return username;
	}
	public void setUsername(String username) {
		this.username = username;
	}
	public String getDescription() {
		return description;
	}
	public void setDescription(String description) {
		this.description = description;
	}
	public LocalDate getTargetDate() {
		return targetDate;
	}
	public void setTargetDate(LocalDate targetDate) {
		this.targetDate = targetDate;
	}
	public boolean isDone() {
		return done;
	}
	public void setDone(boolean done) {
		this.done = done;
	}
	
	@Override
	public String toString() {
		return "Todo [id=" + id + ", username=" + username + ", description=" + description + ", targetDate="
				+ targetDate + ", done=" + done + "]";
	}


}

----------------------------------------------------------------------------------------------------
                                                        |
                                                        V
---------------------------------------------------------------------------------------------------------

http://localhost:8087/list-todos í˜ì´ì§€í™”ë©´==>

      Your Todos
      
      id	Description	                    Taget Date	   Is Done?
      â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
      4	Learn AWS	                        2025-04-29	   false
      -----------------------------------------------------------
      5	Learn DevOps	                    2026-04-29	   false
      -----------------------------------------------------------
      6	Learn Full Stack Development	    2027-04-29     false
      -----------------------------------------------------------
      7 Learning DevOps                   2025-04-29     false
      -----------------------------------------------------------
      _________________
     | Add Todo(ë…¹ë°”íƒ•) |
      â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾

---------------------------------------------------------------------------------------------------------
ê·¸ëŸ¼ Add Todoë¥¼ í´ë¦¬ê°›ê³  10ê¸€ì ë¯¸ë§Œìœ¼ë¡œ ì…ë ¥ì„ í•´ë³´ì      |
                                                        V
---------------------------------------------------------------------------------------------------------


http://localhost:8087/add-todo í˜ì´ì§€ í™”ë©´ ==>


      Enter Todo Details
                    _____________________   ________
      Description: |Learn AWS            | |  ì œì¶œ  |
                    â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾   â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾

---------------------------------------------------------------------------------------------------------
                                                        |
Learn AWSë¼ê³  í•´ë³´ê² ë‹¤ 9ê¸€ìë§Œìˆê³  ì œì¶œì„ í´ë¦­í•œë‹¤         V
---------------------------------------------------------------------------------------------------------

http://localhost:8087/list-todos í˜ì´ì§€í™”ë©´==>

      Your Todos
      
      id	Description	                    Taget Date	   Is Done?
      â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
      4	Learn AWS	                        2025-04-29	   false
      -----------------------------------------------------------
      5	Learn DevOps	                    2026-04-29	   false
      -----------------------------------------------------------
      6	Learn Full Stack Development	    2027-04-29     false
      -----------------------------------------------------------
      7 Learn AWS                         2025-04-29     false
      -----------------------------------------------------------
      _________________
     | Add Todo(ë…¹ë°”íƒ•) |
      â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾

---------------------------------------------------------------------------------------------------------
ê²€ì¦ì´ íŠ¸ë¦¬ê±°ë˜ì§€ ì•Šê³  ìˆë‹¤
ê·¸ëƒ¥ ì–‘ì‹ì— ì¶”ê°€ë˜ê³  ìˆë‹¤

ê²€ì¦ì´ íŠ¸ë¦¬ê±°ë˜ê¸° ì „ì— í•œ ë‹¨ê³„ê°€ ë” ìˆë‹¤


----------------------------------------------------------------------------------------------------


âº TodoController í´ë˜ìŠ¤íŒŒì¼


package com.firstapplication.springboot.myfirstwebapp.todo;

import java.time.*;
import java.util.*;

import org.springframework.stereotype.*;
import org.springframework.ui.*;
import org.springframework.web.bind.annotation.*;

import jakarta.validation.*;

@Controller
public class TodoController {

	
	private TodoService todoService;
	
	public TodoController(TodoService todoService) {
		super();
		this.todoService = todoService;
	}

	@RequestMapping("list-todos")
	public String listAllTodos(ModelMap model) {
		List<Todo> todos = todoService.findByUsername("in28minutes");
		model.addAttribute("todos", todos);
		
		return "listTodos";
	}
	
	//GET, POST
	@RequestMapping(value="add-todo",method=RequestMethod.GET)
	public String showNewTodoPage(ModelMap model) {
		String username = (String)model.get("name");
		Todo todo = new Todo(0, username, "Default Desc", LocalDate.now().plusYears(1), false);
		model.put("todo", todo);
		return "todo";
	}

	@RequestMapping(value="add-todo",method=RequestMethod.POST)

  //3: ë°”ë¡œ @Validë¼ëŠ” ì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•˜ëŠ” ë‹¨ê³„ë‹¤, ì´ë ‡ê²Œ ê·¸ëƒ¥ @Validë¼ëŠ” ì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•˜ê³  ì„í¬íŠ¸ í•  ìˆ˜ ìˆë‹¤
  //ê·¸ëŸ¼ TodoControllerì˜ ìš°ë¦¬ê°€ Beanì— ë°”ì¸ë”©í•˜ëŠ” ê³³ì— @Validì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•œë‹¤ ì´ë ‡ê²Œ í•´ì£¼ë©´ ë°”ì¸ë”©ì´ ì´ë£¨ì–´ì§€ê¸° ì „ì— Todo Beanì„ ê²€ì¦í•˜ê²Œ ëœë‹¤ ì €ì¥í•˜ê³ , ìš°ë¦¬ê°€ ë‹¤ì‹œ ê²€ì¦ìœ¼ë¡œ ê±¸ëŸ¬ë‚¼ìˆ˜ ìˆëŠ”ì§€ í•œë²ˆ ë³´ì
	public String addNewTodo(ModelMap model, Todo todo) {
		String username = (String)model.get("name");
		todoService.addTodo(username, todo.getDescription(), 
				LocalDate.now().plusYears(1), false);
		
		return "redirect:list-todos";
	}
}


----------------------------------------------------------------------------------------------------
                                                        |
                                                        V
---------------------------------------------------------------------------------------------------------

http://localhost:8087/list-todos í˜ì´ì§€í™”ë©´==>

      Your Todos
      
      id	Description	                    Taget Date	   Is Done?
      â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
      4	Learn AWS	                        2025-04-29	   false
      -----------------------------------------------------------
      5	Learn DevOps	                    2026-04-29	   false
      -----------------------------------------------------------
      6	Learn Full Stack Development	    2027-04-29     false
      -----------------------------------------------------------
      _________________
     | Add Todo(ë…¹ë°”íƒ•) |
      â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾

---------------------------------------------------------------------------------------------------------
Add Todoë¥¼ ëˆ„ë¥´ê³  Learnì´ë¼ê³  ì…ë ¥í•˜ê³  ì œì¶œì„ ëˆŒëŸ¬ë³´ì            |
                                                               V
---------------------------------------------------------------------------------------------------------

http://localhost:8087/add-todo í˜ì´ì§€ í™”ë©´ ==>


      Enter Todo Details
                    _____________________   ________
      Description: |Learn                | |  ì œì¶œ  |
                    â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾   â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾

---------------------------------------------------------------------------------------------------------
                                                              |
                                                              V
Whitelabel Error Page
This application has no explicit mapping for /error, so you are seeing this as a fallback.

Mon Apr 29 19:23:52 KST 2024
There was an unexpected error (type=Bad Request, status=400).
Validation failed for object='todo'. Error count: 1
org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public java.lang.String com.firstapplication.springboot.myfirstwebapp.todo.TodoController.addNewTodo(org.springframework.ui.ModelMap,com.firstapplication.springboot.myfirstwebapp.todo.Todo): [Field error in object 'todo' on field 'description': rejected value [Learn]; codes [Size.todo.description,Size.description,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [todo.description,description]; arguments []; default message [description],2147483647,10]; default message [Enter atleast 10 characters]] 
	at 
......
ì´ì œ ê²€ì¦ì´ íŠ¸ë¦¬ê±°ë˜ëŠ” ê±¸ ë³¼ ìˆ˜ ìˆë‹¤
ê·¸ë¦¬ê³  ë©”ì‹œì§€ê°€ ì§ì ‘ ì—¬ê¸°ì— í‘œì‹œëœ ê±¸ ë³¼ ìˆ˜ ìˆë‹¤ [Enter atleast 10 characters]
[ìµœì†Œí•œ 10ê¸€ìë¥¼ ì…ë ¥í•˜ì‹­ì‹œì˜¤] ë¼ê³  ë‚˜ì˜¨ë‹¤ ë„ˆê°€ ì›í•˜ëŠ”ê±´ ì´ê²Œ ì•„ë‹ˆì˜€ì§€?
ì¦‰ ë„ˆê°€ Add Todoë¥¼ í´ë¦­í•˜ê³  Submitì„ í´ë¦­í•˜ë©´ ë­”ê°€ê°€ ì˜ëª» ë˜ì—ˆì„ ë•Œ ìš”ì†Œ ë°”ë¡œ ì˜†ì— ì˜¤ë¥˜ ë©”ì‹œì§€ê°€ í‘œì‹œë˜ì–´ì•¼ í•˜ê² ì§€
ë„ˆëŠ” ì•„ê¹Œ ê·¸ëŸ°ê²Œ ë°œìƒí•˜ëŠ”ê±¸ ì›ì¹˜ ì•Šì•˜ì„ê±°ë‹¤

ê·¸ëŸ¼ ê·¸ê±¸ ì–´ë–»ê²Œ í• ê¹Œ?

----------------------------------------------------------------------------------------------------


âº TodoController í´ë˜ìŠ¤íŒŒì¼


package com.firstapplication.springboot.myfirstwebapp.todo;

import java.time.*;
import java.util.*;

import org.springframework.stereotype.*;
import org.springframework.ui.*;
import org.springframework.web.bind.annotation.*;

import jakarta.validation.*;

@Controller
public class TodoController {

	
	private TodoService todoService;
	
	public TodoController(TodoService todoService) {
		super();
		this.todoService = todoService;
	}

	@RequestMapping("list-todos")
	public String listAllTodos(ModelMap model) {
		List<Todo> todos = todoService.findByUsername("in28minutes");
		model.addAttribute("todos", todos);
		
		return "listTodos";
	}
	
	//GET, POST
	@RequestMapping(value="add-todo",method=RequestMethod.GET)
	public String showNewTodoPage(ModelMap model) {
		String username = (String)model.get("name");
		Todo todo = new Todo(0, username, "Default Desc", LocalDate.now().plusYears(1), false);
		model.put("todo", todo);
		return "todo";
	}
	
	@RequestMapping(value="add-todo",method=RequestMethod.POST)
  //4: ë„ˆëŠ” ë˜ ë‹¤ë¥¸ ì†ì„±ì„ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤ ê·¸ê²Œ ë°”ë¡œ BindingResultë‹¤ ì´ë ‡ê²Œ ë„ˆëŠ” BindingResult ì†ì„±ì„ ì¶”ê°€í•  ìˆ˜ ìˆê³  ê·¸ê±¸ resultë¼ê³  ë¶€ë¥¼ ê²ƒì´ë‹¤
  //ì„í¬íŠ¸ë¥¼ ì •ë¦¬í•˜ê³ , ê·¸ëŸ¬ë©´ BindingResultë„ ì„í¬íŠ¸ë  ê²ƒì´ë‹¤ ê·¸ëŸ¼ ì•„ë˜ë¡œ ê°€ì„œ resultë¥¼ ì‚¬ìš©í•´ë³´ì
	public String addNewTodo(ModelMap model, @Valid Todo todo) {

    //4-1: ê·¸ëŸ¼ ìš°ë¦¬ëŠ” if(result.hasErrors())ë¼ê³  í•´ì£¼ê³ , ì¦‰ ê²€ì¦ ì˜¤ë¥˜ê°€ í•˜ë‚˜ë¼ë„ ìˆìœ¼ë©´ list-todos í˜ì´ì§€ë¡œ ê°€ì§€ ë§ë¼ê³  í•  ê²ƒì´ë‹¤ ê²€ì¦ ì˜¤ë¥˜ê°€ ìˆìœ¼ë©´ todo í˜ì´ì§€ë¡œ ëŒì•„ê°€ë„ë¡ í•´ì•¼ í•œë‹¤ ì´ê±¸ ì €ì¥í•˜ê³  ëŒì•„ê°€ì„œ submitì„ ëˆŒëŸ¬ë³´ì
		if(result.hasErrors()) {
			return "todo";
		}
  
    String username = (String)model.get("name");
		todoService.addTodo(username, todo.getDescription(), 
				LocalDate.now().plusYears(1), false);
		
		return "redirect:list-todos";
	}
}

----------------------------------------------------------------------------------------------------
                                                               |
                                                               V
---------------------------------------------------------------------------------------------------------

http://localhost:8087/add-todo í˜ì´ì§€ í™”ë©´ ==>


      Enter Todo Details
                    _____________________   ________
      Description: |Learn                | |  ì œì¶œ  |
                    â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾   â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
                                                | ì œì¶œ í´ë¦­
                                                V



      Enter Todo Details
                    _____________________   ________
      Description: |Learn                | |  ì œì¶œ  |
                    â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾   â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾

---------------------------------------------------------------------------------------------------------
ì´ì œ ë„ˆëŠ” ìš”ì²­ì„ ì œì¶œí•˜ë©´ ê²€ì¦ ì˜¤ë¥˜ê°€ ìˆìœ¼ë©´ ê·¸ í˜ì´ì§€ë¡œ ëŒì•„ê°€ëŠ” ê±¸ ë³¼ ìˆ˜ ìˆë‹¤

í•˜ì§€ë§Œ ì—¬ê¸°ì— ì˜¤ë¥˜ê°€ í‘œì‹œë˜ì§€ ì•Šê³  ìˆë‹¤
ê·¸ë¦¬ê³  ê·¸ê±´ ë³„ë¡œ ì¢‹ì§€ ì•Šë‹¤ ê·¸ëŸ¼ ì—¬ê¸°ì— ì˜¤ë¥˜ë„ í‘œì‹œí•´ ë³´ì

