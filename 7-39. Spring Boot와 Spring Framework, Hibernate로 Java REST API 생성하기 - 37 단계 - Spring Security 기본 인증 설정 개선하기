

м§Ђл‚њ л‹Ёкі„м—ђм„њ REST APIм—ђ Spring Security м‚¬мљ©мќ„ м„¤м •н–€кі ,
REST APIк°Ђ м„±кіµм ЃмњјлЎњ мќём¦ќлђлЉ” к±ё н™•мќён•  м€ мћ€м—€л‹¤ 
н•м§Ђл§Њ POST мљ”мІ­мќ„ н•л©ґ, м€лҐј л“¤м–ґ localhost:8080/usersлЎњ POST мљ”мІ­мќ„ н•  кІЅмљ° мќём¦ќн—¤лЌ”лҐј м„¤м •н–€м§Ђ

-----------------------------------------------------------------------------------------------------------------

рџ–‡ Talend API Tester н™”л©ґ ==>    (лЌ” мћђм„ён•њк±ґ нЃ¬лЎ¬ н™•мћҐн”„лЎњк·ёлћЁ Talend API Tester м‹¤н–‰н•ґм„њ н™•мќё..)

  METHOD                SCHEME :// HOST [ ":" PORT ] [ PATH [ "?" QUERY ]]
  ______________      ____________________________________________________________    ___________________
 | POST    | в–ј  |    |    http://localhost:8080/users                             |  |  вњ€ Send       | в–Ѕ |
  вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ      вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ    вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ
                        в–¶ QUERY PARAMETERS

  HEADERS   в¬‡                   | Form в–ј |        в—Ђ | в–¶  BODY                                   | Text в–ј |
вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ           |   вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ
   ______________   ___________________________     |   
в‘ | Authorization|:|Basic dXNlcm5hbWU6cG..| рџ§Є | рџ—ќ |    { 
   вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ   вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ     |      "name": "New User",
   ______________   ___________________________     |      "birthDate": "1997-08-11"
в‘ |Content-Type  |:|application/json           |    |     }
   вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ   вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ     |
  ______________                                    |                                  
 ( + Add header )   рџ—ќ Add authorization     рџ—‘      |                                                       
  вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ                                    | 
                                                    |
 вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ   вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ
                                                    |  
                                                    V
(рџ—ќ лҐј нЃґл¦­н•л©ґ л”°лЎњ мќём¦ќ н™”л©ґмќґ л‚мґ)


                  ___________________________________________________________________________
                 |  Authorization                                                            |
                 | _________________________________________________________________________ |
                 |                         _______________                                   |                      
                 |                   Type | Authorization |                                  |
                 |                         вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ                                   |
                 |                         ______________________________                    |                                          
                 |               Username | username                     |                   |             
                 |                         вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ                    |                                 
                 |                         ______________________________                    |                                    
                 |               Password | ********                     |                   | 
                 |                         вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ                    |                                           
                 |                         в–ў show password                                   |                                
                 |                                                                           |             
                 |вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ|                                                                                  
                 |                                                 ___________    ________   |                                
                 |                                                | X Cancel  |  | вњ” Set  |  |                              
                 |                                                 вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ    вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ   |                                 
                  вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ

-----------------------------------------------------------------------------------------------------------------

нЋём§‘мќ„ л€„лҐґл©ґ м‚¬мљ©мћђ мќґл¦„кіј л№„л°ЂлІ€нёк°Ђ м •н™•нћ€ м„¤м •лђм–ґ мћ€кі , 
мЅн…ђмё  нѓЂмћ…мњјлЎњ application/jsonмќ„ ліґл‚ґкі  ліёл¬ёлЏ„ м њлЊЂлЎњ лђм–ґмћ€л‹¤
мќґл¦„мќЂ "New User"лЎњ, мѓќл…„м›”мќјмќЂ мќґл ‡кІЊ лђм–ґ мћ€м§Ђ
м „м†Ўмќ„ л€„лҐґл©ґ   
                                                    |
                                                    V
-----------------------------------------------------------------------------------------------------------------

рџ–‡ Talend API Tester н™”л©ґ ==>    (лЌ” мћђм„ён•њк±ґ нЃ¬лЎ¬ н™•мћҐн”„лЎњк·ёлћЁ Talend API Tester м‹¤н–‰н•ґм„њ н™•мќё..)

  Response
вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ
  401                (л№Ёк°„мѓ‰ л°”нѓ•)
___________________________________________________________________________________________________

  HEADERS                       | pretty в–ј |  в—Ђ | в–¶  BODY                                 | pretty в–ј |
вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ     |   вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ
                                                |
Vary:	Origin                                    |    {                                
Vary:	Access-Control-Request-Method             |     timestamp:"2024-06-13",                                    
Vary:	Access-Control-Request-Headers            |     status: 403,                                     
X-Content-Type-Options:	nosniff                 |     error: "Forbidden",                                
X-XSS-Protection:	0                             |     message: "Forbidden",                                    
Cache-Control:no-cache, no-store, max-age=0,    |     path: "/users"
              must-revalidate                   |    }
Pragma:	no-cache                                |                                            
Expires:	0                                     |                                   
X-Frame-Options:	DENY                          |                                          
WWW-Authenticate:	Basic realm="Realm"           |                                                       
Content-Length:	0 byte                          |                                              
Date:	Thu, 13 Jun 2024 08:25:31 GMT             |                                                     
Keep-Alive:	timeout=60                          |                                                        
Connection:	keep-alive                          |                                                                                
                                                |                                                    
в–¶ COMPLETE REQUEST HEADERS        
                                                     lines nums рџ“„ copy            length: 116 bytes


-----------------------------------------------------------------------------------------------------------------
403 мќ‘л‹µмќґ лЏЊм•„мЁл‹¤
кё€м§Ђлђм—€л‹¤лЉ” лњ»мќёлЌ° м–ґл–»кІЊ л°”лЎњ мћЎмќ„к№Њ?
л°”лЎњ мќґлІ€ л‹Ёкі„м—ђм„њ м‚ґнЋґліґкІЊ лђ  л‚ґмљ©мќґл‹¤


л¬ём њ н•ґкІ° л°©лІ•мќ„ м•Њм•„ліґкё° м „м—ђ  Spring Securityмќ м›ђл¦¬лҐј кі м°Ём›ђмњјлЎњ м‚ґнЋґліґкІ л‹¤

рџ”µ Spring Security м›ђл¦¬

в—ЏSpring Security

в—Џ Filter Chains
  в–  1) All requests should be authenticated
  в–  2) If a request is not authenticated, a web page is shown
  в–  3) CSRF -> POST , PUT


в—Џ Configuration

в—Џ Bean FilterChain

мљ”мІ­мќ„ ліґл‚ј л•Њл§€л‹¤ Spring Securityк°Ђ н•ґл‹№ мљ”мІ­мќ„ к°ЂлЎњ м±€л‹¤
м€лҐј л“¤м–ґ л‹€к°Ђ localhost:8080/usersлЎњ мљ”мІ­мќ„ ліґл‚ґл©ґ Spring Serurityк°Ђ мќґ мљ”мІ­мќ„ к°ЂлЎњм±„м„њ мќјл Ёмќ н•„н„°лҐј м‹¤н–‰н•њл‹¤
Filter Chains
мќґлџ° мќјл Ёмќ н•„н„°лҐј н•„н„° мІґмќёмќґлќјкі  н•лЉ”лЌ°
н•„н„° мІґмќём—ђм„њ н™•мќёмќґ м—¬лџ¬ м°ЁлЎЂ мќґлЈЁм–ґм§„л‹¤
  в–  1) All requests should be authenticated
1лІ€мќЂ лЄЁл“  мљ”мІ­мќґ мќём¦ќлђм–ґм•ј н•њл‹¤лЉ” к±ґлЌ°,
лЄЁл“  мљ”мІ­м—ђ мћђкІ© м¦ќлЄ…мќґ мІЁл¶Ђлђм–ґм•ј кІ м§Ђ к·ёкІЊ мІ« лІ€м§ё н™•мќё м €м°Ёкі  
  в–  2) If a request is not authenticated, a web page is shown
мљ”мІ­мќґ мќём¦ќлђм§Ђ м•Љм•л‹¤л©ґ, мћђкІ© м¦ќлЄ…мќґ м—†к±°л‚ мќём¦ќлђм§Ђ м•Љм•л‹¤л©ґ кё°ліёк°’мњјлЎњ м›№ нЋмќґм§Ђк°Ђ л‚нѓЂл‚њл‹¤
м‹¤м њ лЄЁмЉµмќ„ н™•мќён•ґліґмћђ, лёЊлќјмљ°м ЂлҐј лЄЁл‘ђ л‹«кі  нЃ¬лЎ¬мќ„ л‹¤м‹њ м‹њмћ‘н•ґ ліґкІ л‹¤ 
localhost usersлЎњ к°Ђліґл©ґ 

-----------------------------------------------------------------------------------------------------------------

рџЊЋ http://localhost:8080/login нЋмќґм§Ђ н™”л©ґ ==>


                                              Please sign in
                                               __________________________
                                              |Username                  |
                                               вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ 
                                               __________________________
                                              |Password                  |
                                               вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ
                                               __________________________
                                              |         Sign in          |
                                               вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ
-----------------------------------------------------------------------------------------------------------------
мќґ м›№ нЋмќґм§Ђк°Ђ л‚м¤м§Ђ.

  в–  3) CSRF -> POST , PUT
3лІ€мќЂ н•„н„° мІґмќём—ђм„њ м€н–‰лђлЉ” кІѓ м¤‘ н•л‚к°Ђ CSRFлќјкі  н•лЉ” к±ё н™•мќён•  м€ мћ€кІЊ м„¤м •н•лЉ” к±ґлЌ° 
мќґл ‡кІЊ н•л©ґ POST м™Ђ PUT мљ”мІ­м—ђ мЃн–Ґмќ„ мЈјкІЊ лђњл‹¤

к·ё м™ём—ђлЏ„ н•„н„° мІґмќём—ђм„њ м€н–‰лђлЉ” кІѓл“¤мќґ м•„мЈј л§Ћл‹¤ 


мќґм њ н•„н„° мІґмќёмќ„ м»¤мЉ¤н„°л§€мќґм§•н•ґліј н…ђлЌ°
кё°мЎґ н•„н„° мІґмќём—ђм„њ м€м •н•ґм•ј н•  кІЊ л‘ђк°Ђм§Ђ мћ€л‹¤

рџ”µ н•„н„° мІґмќё м»¤мЉ¤н„°л§€мќґм§• м€м • н•  л‘ђ к°Ђм§Ђ

1.
н•л‚лЉ”
-----------------------------------------------------------------------------------------------------------------

рџЊЋ http://localhost:8080/login нЋмќґм§Ђ н™”л©ґ ==>


                                              Please sign in
                                               __________________________
                                              |Username                  |
                                               вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ 
                                               __________________________
                                              |Password                  |
                                               вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ
                                               __________________________
                                              |         Sign in          |
                                               вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ
-----------------------------------------------------------------------------------------------------------------
м—¬кё°м—ђм„њ л‚нѓЂл‚лЉ” м›№ нЋмќґм§Ђк°Ђ мћ€л‹¤лЉ” м‚¬м‹¤мќёлЌ° 
лЎњк·ёмќё нЋмќґм§Ђк°Ђ л‚м¤л©ґ м›№ м• н”Њл¦¬мјЂмќґм…м—ђ м •л§ђ мў‹м§Ђ 
н•м§Ђл§Њ REST APIмќ кІЅмљ°м—ђлЉ” HTTP кё°ліё мќём¦ќмќґлќјлЉ” к±ё м‚¬мљ©н•л ¤кі  н•л‹€к№Њ м‚¬мљ©мћђ мћђкІ© м¦ќлЄ…мќ„ л¬»лЉ” нЊќм—…м°Ѕмќґ л– м•ј н•њл‹¤

мќґкІЊ н•„н„° мІґмќём—ђм„њ ліЂкІЅн•л ¤лЉ” н•њ к°Ђм§Ђ м‚¬н•­мќґкі 
HTTP мќём¦ќмќ„ м‚¬мљ©н•  л•ЊлЉ” localhost usersлҐј мћ…л Ґн•кІЊ лђл©ґ 

2.
л‘ђ лІ€м§ёлЉ” 
CSRFлҐј н•ґмІґн•ґм„њ POST мљ”мІ­мќ„ ліґл‚ј м€ мћ€кІЊ н•лЉ” кІѓмќґл‹¤, Spring Securityм—ђм„њ кё°мЎґ н•„н„° мІґмќёмќ„ м¤лІ„лќјмќґл“њ н•л ¤л©ґ
мІґмќё м „мІґлҐј л‹¤м‹њ м •мќн•ґм•ј н•њл‹¤

в—Џ Configuration
к·ёлџј мќґм њ Spring м„¤м • нЊЊмќјмќ„ мѓќм„±н•кі  
в—Џ Bean FilterChain
м—¬кё°м—ђ н•„н„° мІґмќёмќ„ м •мќн•  Beanмќ„ мѓќм„±н•кі , 
  в–  1) All requests should be authenticated
  в–  2) If a request is not authenticated, a web page is shown
  в–  3) CSRF -> POST , PUT
н•„н„° мІґмќёмќ„ кµ¬м„±н•лЉ” лЄЁл“  л‹Ёкі„лҐј м •мќн•  кІѓмќґл‹¤


