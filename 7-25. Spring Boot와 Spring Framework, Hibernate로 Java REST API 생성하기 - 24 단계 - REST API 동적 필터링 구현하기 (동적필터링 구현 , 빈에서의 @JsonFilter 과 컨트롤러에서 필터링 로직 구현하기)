

Custommizing REST API Responses - Filtering and more..

â— Serialization: Convert object to stream (example: JSON)                                     _____________________________________
  â–  Most popular JSON Serialization in Java: Jackson                                            localhost:8080/filtering-list
â— How about customizing the REST API response returned by Jackson framework?                  â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
â— 1: Customize filed names in response                                                        [
  â–  @JSONProperty                                                                               {
â— 2: Return only selected fields                                                                  "field2": "value2",
  â–  Filtering                                                                                     "field3": "value3"
  â–  Example: Filter out Password                                                                },
  â–  Two types:                                                                                  {
    â—‹ Static Filtering: Same filtering for a bean across differnt REST API                        "field2": "value22",
      â—¦ @JsonIgnoreProperties, @JsonIgnore                                                        "field3": "value32"
    â—‹ Dynamic Filtering: Customize filtering for a bean for specific REST API                    }
      â—¦ @JsonFilter with FilterProvider                                                        ]
                                                                                              _____________________________________
                                                                                                localhost:8080/filtering
                                                                                              â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾â€¾
                                                                                                {
                                                                                                  "field1": "value1",
                                                                                                  "field2": "value2",
                                                                                                  "field3": "value3"
                                                                                                }


ì´ë²ˆ ì‹œê°„ì—ëŠ” ë™ì  í•„í„°ë§ì„ ì‚´í´ë³´ê² ë‹¤
ì§€ë‚œ ë‹¨ê³„ì—ì„  ì •ì  í•„í„°ë§ì„ ì‚´í´ë´¤ë‹¤, ë‹¤ì–‘í•œ REST APIì˜ ë¹ˆì„ ë™ì¼í•˜ê²Œ í•„í„°ë§í•˜ëŠ” ê²ƒì´ì˜€ë‹¤
------------------------------------------
package com.in28minutes.rest.webservices.restfulwebservices.filtering;

import java.util.*;

import org.springframework.web.bind.annotation.*;

@RestController
public class FilteringController {
	
	@GetMapping("/filtering")
	public SomeBean filtering() {
		return new SomeBean("value1","value2","value3");
	}
	
	@GetMapping("/filtering-list")
	public List<SomeBean> filteringList() {
		return Arrays.asList(new SomeBean("value1","value2","value3"),
				new SomeBean("value4","value5","value6"));
	}
}
------------------------------------------
ê°„ë‹¨íˆ filteringê³¼ filtering-listë¼ëŠ” REST APIë¥¼ ìƒì„±í–ˆê³ ,

------------------------------------------
package com.in28minutes.rest.webservices.restfulwebservices.filtering;

import com.fasterxml.jackson.annotation.*;

//@JsonIgnoreProperties({"filed1", "field2"})
public class SomeBean {

	private String filed1;
	
	private String filed2;
	
	@JsonIgnore
	private String filed3;
	
	public SomeBean(String filed1, String filed2, String filed3) {
		super();
		this.filed1 = filed1;
		this.filed2 = filed2;
		this.filed3 = filed3;
	}
....
------------------------------------------
SomeBean.javaì—ì„œ ì–´ë–¤ í•„í„°ë¥¼ ì„¤ì •í•˜ë“  ë‘ REST API ëª¨ë‘ì— ì ìš©ëë‹¤
ì§€ê¸ˆì€ field3ì— @JasonIgnoreê°€ ì ìš©ë˜ê³  ìˆì–´ì„œ filteringê³¼ filtering-list ëª¨ë‘ field3ëŠ” ì‘ë‹µìœ¼ë¡œ ë³€í™˜í•˜ì§€ ì•ŠëŠ”ë‹¤

----------------------------------------------------------------------------------------------------------

ğŸŒ http://localhost:8080/filtering-list ì‚¬ì´íŠ¸í™”ë©´ ==>

[
  {
    "filed1": "value1",
    "filed2": "value2"
  },
  {
    "filed1": "value4",
    "filed2": "value5"
  }
]

----------------------------------------------------------------------------------------------------------
ì‚¬ì´íŠ¸ë¥¼ ìƒˆë¡œê³ ì¹¨ í•˜ë©´ filtering-listëŠ” ì´ë ‡ê²Œ field1ê³¼ field2ë§Œ ë°˜í™˜í•œë‹¤ 

filteringë„ ë§ˆì°¬ê°€ì§€ë¡œ

----------------------------------------------------------------------------------------------------------

ğŸŒ http://localhost:8080/filtering ì‚¬ì´íŠ¸í™”ë©´ ==>

{
  "filed1": "value1",
  "filed2": "value2"
}

----------------------------------------------------------------------------------------------------------
field1ê³¼ field2ë§Œ ë°˜í™˜í•˜ê³  


ê°™ì€ ë¹ˆì´ë¼ë„ REST APIì— ë”°ë¼ ë‹¤ë¥¸ ì†ì„±ì„ ë°˜í™˜í•˜ê³  ì‹¶ì„ ìˆ˜ë„ ìˆë‹¤

ê·¸ê±´ ì–´ë–»ê²Œ êµ¬í˜„í• ê¹Œ?
ê·¸ê²Œ ë°”ë¡œ ë™ì  í•„í„°ë§ì´ë‹¤, ë™ì  í•„í„°ë§ì„ ì‚´í´ë³´ê¸° ì „ì— SomeBean.javaë¡œ ê°€ì„œ

----------------------------------------------------------------------------------------------------------


âº SomeBean í´ë˜ìŠ¤íŒŒì¼


package com.in28minutes.rest.webservices.restfulwebservices.filtering;

import com.fasterxml.jackson.annotation.*;

//@JsonIgnoreProperties({"filed1", "field2"})
public class SomeBean {

	private String filed1;
	
	private String filed2;

  //1: @JasonIgnoreë¥¼ ì£¼ì„ í¼ë¦¬í•´ ì„í¬íŠ¸ë¥¼ ì •ë¦¬í•˜ê³  ì €ì¥í•œë‹¤
//	@JsonIgnore
	private String filed3;
	
	public SomeBean(String filed1, String filed2, String filed3) {
		super();
		this.filed1 = filed1;
		this.filed2 = filed2;
		this.filed3 = filed3;
	}

	public String getFiled1() {
		return filed1;
	}

	public String getFiled2() {
		return filed2;
	}

	public String getFiled3() {
		return filed3;
	}

	@Override
	public String toString() {
		return "SomeBean [filed1=" + filed1 + ", filed2=" + filed2 + ", filed3=" + filed3 + "]";
	}
	
}
----------------------------------------------------------------------------------------------------------
                                                                                |
                                                                                V
----------------------------------------------------------------------------------------------------------

ğŸŒ http://localhost:8080/filtering ì‚¬ì´íŠ¸í™”ë©´ ==>

{
  "filed1": "value1",
  "filed2": "value2",
  "filed3": "value3"
}

----------------------------------------------------------------------------------------------------------
ì´ì œ filteringì„ ì‹¤í–‰í•˜ë©´ ëª¨ë“  ì‘ë‹µì´ ë°˜í™˜ëœë‹¤, filtering-listë„                    |
                                                                                 V
----------------------------------------------------------------------------------------------------------

ğŸŒ http://localhost:8080/filtering-list ì‚¬ì´íŠ¸í™”ë©´ ==>

[
  {
    "filed1": "value1",
    "filed2": "value2",
    "filed3": "value3"
  },
  {
    "filed1": "value4",
    "filed2": "value5",
    "filed3": "value6"
  }
]

----------------------------------------------------------------------------------------------------------
ë§ˆì°¬ê°€ì§€ê³  ë‘ REST API ëª¨ë‘ ì„¸ í•„ë“œ ì „ë¶€ ì‘ë‹µì´ ë°˜í™˜ëœë‹¤, ì´ì œ íŠ¹ì • REST APIì˜ ë¹ˆì— ëŒ€í•œ 
í•„í„°ë§ì„ ì»¤ìŠ¤í…€í•´ë³¼ ê²ƒì´ë‹¤
ê°€ë ¹, filteringê³¼ filtering-listë¼ëŠ” ë‘ REST APIê°€ ìˆì„ë•Œ 
-------------------------

localhost:8080/filtering==>

{
  "filed1": "value1",
  "filed3": "value3"
}
-------------------------
filteringìœ¼ë¡œëŠ” field1ê³¼ field3ì„ ì‘ë‹µìœ¼ë¡œ ë°›ì„ ê²ƒì´ë‹¤

-------------------------

localhost:8080/filtering-list==>

[
  {
    "field2": "value2",
    "field3": "value3"
  },
  {
    "field2": "value22",
    "field3": "value32"
  }
]
-------------------------
í•˜ì§€ë§Œ filtering-listë¡œëŠ” field2ì™€ field3ì„ ì‘ë‹µìœ¼ë¡œ ë°›ì„ ê²ƒì´ë‹¤
ê°™ì€ ë¹ˆì´ë¼ë„ REST APIì— ë”°ë¼ í•„í„°ë§ ë¡œì§ì´ ë‹¬ë¼ì§€ëŠ” ê²ƒì´ë‹¤

êµ¬í˜„ ë°©ë²•ì„ ì•Œì•„ë³´ê² ë‹¤, REST APIë§ˆë‹¤ ë‹¤ë¥¸ ì‘ì—…ì„ í•˜ë„ë¡ í•´ì•¼ í•˜ë‹ˆ ë¹ˆì— í•„í„°ë§ì„ ì •ì˜í•  ìˆœ ì—†ë‹¤ (SomeBeaní´ë˜ìŠ¤íŒŒì¼..)
í•„í„°ë§ ë…¼ë¦¬ëŠ” REST APIì— ì •ì˜í•´ì•¼ í•œë‹¤ 
ê·¸ë˜ì„œ ì´ REST APIë©”ì„œë“œì—ëŠ” (FilteringController í´ë˜ìŠ¤íŒŒì¼..)ë°ì´í„°ë¿ ì•„ë‹ˆë¼ í•„í„°ë§ ë°©ì‹ë„ ì •ì˜í•  ê²ƒì´ë‹¤
ì´ë•Œ MappingJacksonValue ë¼ëŠ” í´ë˜ìŠ¤ê°€ ë„ì›€ì´ ëœë‹¤
ë„ˆê°€ ì»¨ë²„í„°, ì¦‰ Jackson ì»¨ë²„í„°ì— íŠ¹ì •í•œ ì§ë ¬í™” ëª…ë ¹ì„ ë„˜ê¸°ê³  ì‹¶ì€ ê²½ìš°ì— MappingJacksonValueë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤

ê·¸ëŸ¬ë‹ˆ ì—¬ê¸°ì—

----------------------------------------------------------------------------------------------------------


âº FilteringController í´ë˜ìŠ¤íŒŒì¼


package com.in28minutes.rest.webservices.restfulwebservices.filtering;

import java.util.*;

import org.springframework.web.bind.annotation.*;

@RestController
public class FilteringController {
	
	@GetMapping("/filtering") //field2

  //2-4: public SomeBean filtering() => public MappingJacksonVaule filtering() ë¡œ ë°”ë€œ
	public MappingJacksonVaule filtering() {  //
    //2-1ê³„ì†: Extract Local Variableë¡œ ìƒì„±ëœ someBean ë³€ìˆ˜
		SomeBean someBean = new SomeBean("value1","value2","value3");

    //2: MappingJacksonValue mappingJacksonValue = new MappingJacksonValue(); ì´ì²˜ëŸ¼ ì ê³ , ë°˜í™˜í•˜ê³ í”ˆ ê°’ì„ ì•„ë¬´ê±°ë‚˜ ë„˜ê¸°ë©´ ëœë‹¤
    //2-2: someBeanì„ ì´ìš©í•´ í•„í„°ë§í•˜ë ¤ê³  MappingJacksonValueë¥¼ ì‚¬ìš©í•œ ê²ƒì´ë‹¤, ì„í¬íŠ¸ë¥¼ ì •ë¦¬í•˜ë©´ import org.springframework.http.converter.json.MappingJacksonValue;ê°€ ì…ë ¥ëœë‹¤
    //ì´ì œ mappingJacksonValueë¥¼ ë°˜í™˜í•˜ê² ë‹¤ //2-3: ì•„ë˜ returnì— mappingJacksonValueë¡œ ë°”ê¿”ì£¼ê¸°..
		MappingJacksonValue mappingJacksonValue = new MappingJacksonValue(someBean);
		
    //2-1: ì—¬ê¸°ì„œ ë§ˆìš°ìŠ¤ ìš°í´ë¦­ì„ í•  ê²ƒì´ë‹¤ new SomeBean("value1","value2","value3")ë¥¼ ì„ íƒí–ˆë‹¤ ìš°í´ë¦­ìœ¼ë¡œ Refactor > Extract Local Variableì„ í´ë¦­ ì´ë¦„ì€ ê·¸ëŒ€ë¡œ someBeanìœ¼ë¡œ í•˜ê² ë‹¤
		//return new SomeBean("value1","value2","value3");
                                  |
                                  V
    //2-1 ê³„ì†: ê·¸ëŸ° ë‹¤ìŒ ê´„í˜¸ ì•ˆì— someBeanì„ ë„˜ê¸°ë©´ ëœë‹¤ //2-2: new MappingJacksonValue();ì— someBeanì„ ë„£ì–´ì£¼ê¸°
    //2-3: mappingJacksonValueë¡œ ë°˜í™˜, ctrl+1ë¡œ ë©”ì„œë“œ ë°˜í™˜ íƒ€ì…ì„ MappingJacksonVauleë¡œ ë°”ê¾¸ê³  ì €ì¥ //2-4: ë°˜í™˜íƒ€ì…ì´ SomeBean => MappingJacksonVauleë¡œ ë°”ê»´ ìˆì„ê±°ì„..
		return mappingJacksonValue;
	}
	
	@GetMapping("/filtering-list")	//field1
	public List<SomeBean> filteringList() {
		return Arrays.asList(new SomeBean("value1","value2","value3"),
				new SomeBean("value4","value5","value6"));
	}
}

----------------------------------------------------------------------------------------------------------
ì´ì œ ë‹¤ì‹œ ìš°ë¦¬ì˜ ìš”ì²­í˜ì´ì§€ë¡œ ëŒì•„ê°€ì„œ                                                      |
localhost:8080/filteringìœ¼ë¡œ ê°€ë³´ì                                                       V
----------------------------------------------------------------------------------------------------------

ğŸŒ http://localhost:8080/filtering ì‚¬ì´íŠ¸í™”ë©´ ==>

{
  "filed1": "value1",
  "filed2": "value2",
  "filed3": "value3"
}

----------------------------------------------------------------------------------------------------------
ë³€í•œ ê±´ ì—†ë‹¤

í•˜ì§€ë§Œ ì´ì œëŠ” í•„í„°ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆê²Œ ëë‹¤
MappingJacksonValue í´ë˜ìŠ¤ ë•ì— í•„í„° ì„¤ì •ì´ ê°€ëŠ¥í•´ì¡Œê±°ë“ 

----------------------------------------------------------------------------------------------------------



âº FilteringController í´ë˜ìŠ¤íŒŒì¼


package com.in28minutes.rest.webservices.restfulwebservices.filtering;

import java.util.*;

import org.springframework.http.converter.json.*;
import org.springframework.web.bind.annotation.*;

@RestController
public class FilteringController {
	
	@GetMapping("/filtering") //field2
	public MappingJacksonValue filtering() {
		SomeBean someBean = new SomeBean("value1","value2","value3");
		
		MappingJacksonValue mappingJacksonValue = new MappingJacksonValue(someBean);

    //3-2:ë³´ë‹¤ì‹œí”¼ íƒ€ì…ì€ SimpleBeanPropertyFilterì§€, SimpleBeanPropertyFilter filter = SimpleBeanPropertyFilter.filterOutAllExcept(null); ì²˜ëŸ¼ í•„í„°ë§ ë°©ì‹ì„ ì •ì˜í•˜ê² ë‹¤ field1ê³¼ field3ë§Œ í‘œì‹œí•˜ê³  ì‹¶ìœ¼ë‹ˆ ("field1", "field3")ì²˜ëŸ¼ ì ì–´ì¤€ë‹¤ ì €ì¥í•˜ê² ë‹¤
		SimpleBeanPropertyFilter filter = SimpleBeanPropertyFilter.filterOutAllExcept("field1", "field3");
  
    //3-1: ì´ì œ ì ìš©í•  filtersë¥¼ ì •ì˜í•  FilterProviderë¥¼ ìƒì„±í•´ì•¼ í•œë‹¤ í•„í„°ëŠ” FilterProvider filters; ì—¬ê¸°ì— ì •ì˜í•´ì£¼ë©´ ë˜ëŠ”ë°
    // FilterProviderëŠ” ì—¬ëŸ¬ í•„í„°ë¥¼ ì •ì˜í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤ ì§€ê¸ˆì€ í•„í„° 1ê°œë§Œ ì¶”ê°€í•˜ì, FilterProvider filters = new SimpleFilterProvider();ë¥¼ ì…ë ¥í•˜ê² ë‹¤ ë³´ë‹¤ ì‹œí”¼ import com.fasterxml.jackson.databind.ser.impl.SimpleFilterProvider; ë„ í•¨ê»˜ ì…ë ¥ëë‹¤
    //ì´ì œ SimpleFilterProvider()ì— ìƒˆ í•„í„°ë¥¼ ìƒì„±í•´ ì¶”ê°€í•˜ë©´ ëœë‹¤.addFilter()ë¥¼ ì¨ì„œ ì´ë¦„ì„ ì¶”ê°€í•˜ê² ë‹¤ "SomeBeanFilter", filter ì²˜ëŸ¼
    //SimpleFilterProvider ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•´ í•„í„°ë¥¼ ì¶”ê°€í•˜ê³  ìˆëŠ” ê²ƒì´ë‹¤, ì´ì œ filterë¥¼ ì •ì˜í•´ì£¼ë©´ ëœë‹¤ ctrl+1ë¡œ Create local variable 'filter'ë¥¼ ì„ íƒí•˜ê² ë‹¤//3-2:ìƒì„±ëœ ë³€ìˆ˜ë¡œ..
		FilterProvider filters = new SimpleFilterProvider().addFilter("SomeBeanFilter", filter);
  
    //3: mappingJacksonValue.setFilters(filters);ë¥¼ ì…ë ¥í•˜ê² ë‹¤, filtersì˜ ê°’ì´ ì •ì˜ë˜ì§€ ì•Šì•˜ìœ¼ë‹ˆ ì§€ê¸ˆ ì •ì˜í•œë‹¤, ctrl+1ì„ ëˆŒëŸ¬ create local variable 'filters'ë¥¼ ì„ íƒ
    mappingJacksonValue.setFilters(filters);

		return mappingJacksonValue;
	}
	
	@GetMapping("/filtering-list")	//field1
	public List<SomeBean> filteringList() {
		return Arrays.asList(new SomeBean("value1","value2","value3"),
				new SomeBean("value4","value5","value6"));
	}
}

----------------------------------------------------------------------------------------------------------
ë‹¤ì‹œ ìš”ì²­ í˜ì´ì§€ì—ì„œ ìš”ì²­ì„ ë³´ë‚´ë©´...                                                      |
                                                                                        V
----------------------------------------------------------------------------------------------------------

ğŸŒ http://localhost:8080/filtering ì‚¬ì´íŠ¸í™”ë©´ ==>

{
  "filed1": "value1",
  "filed2": "value2",
  "filed3": "value3"
}

----------------------------------------------------------------------------------------------------------
ì´ëŸ°.. ì•„ì§ í•„í„°ë§ì´ ì ìš©ë˜ì§€ ì•ŠëŠ”ë‹¤ 
ë³´ë‹¤ì‹œí”¼ ì•„ì§ ì‘ë™í•˜ì§€ ì•ŠëŠ”ë‹¤ 
ì™œì¼ê¹Œ?
-------------------------
	@GetMapping("/filtering") //field2
	public MappingJacksonValue filtering() {
		SomeBean someBean = new SomeBean("value1","value2","value3");
		
		MappingJacksonValue mappingJacksonValue = new MappingJacksonValue(someBean);
		SimpleBeanPropertyFilter filter = SimpleBeanPropertyFilter.filterOutAllExcept("field1", "field3");
		FilterProvider filters = new SimpleFilterProvider().addFilter("SomeBeanFilter", filter);
		mappingJacksonValue.setFilters(filters);
		
		return mappingJacksonValue;
	}
-------------------------
ì•„ì§ ì´ í•„í„°ë¥¼ ë¹ˆì— ì •ì˜í•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì´ë‹¤ (("SomeBeanFilter"))

ì—¬ê¸°ì— ì½”ë“œë¥¼ ì‘ì„±í•˜ê³  ë‚˜ì„œ SomeBeanì— @JsonFilterë¥¼ ì •ì˜í•´ì•¼ í•œë‹¤

----------------------------------------------------------------------------------------------------------



âº SomeBean í´ë˜ìŠ¤íŒŒì¼


package com.in28minutes.rest.webservices.restfulwebservices.filtering;

//@JsonIgnoreProperties({"filed1", "field2"})

//4:@JsonFilter("SomeBeanFilter")ì²˜ëŸ¼ ì ê² ë‹¤, 
//"SomeBeanFilter"ë¼ëŠ” ì´ë¦„ì´ FilteringControllerí´ë˜ìŠ¤íŒŒì¼ì˜ filtering()ë©”ì†Œë“œì˜ new SimpleFilterProvider().addFilter("SomeBeanFilter", filter); "SomeBeanFilter"ë¼ëŠ” ì´ë¦„ê³¼ ê°™ì•„ì•¼ í•œë‹¤
//ì¢‹ë‹¤ ì €ì¥í›„ ìƒˆë¡œê³ ì¹¨ í•´ë³´ì
@JsonFilter("SomeBeanFilter")
public class SomeBean {

	private String filed1;
	
	private String filed2;
	
//	@JsonIgnore
	private String filed3;
	
	public SomeBean(String filed1, String filed2, String filed3) {
		super();
		this.filed1 = filed1;
		this.filed2 = filed2;
		this.filed3 = filed3;
	}

	public String getFiled1() {
		return filed1;
	}

	public String getFiled2() {
		return filed2;
	}

	public String getFiled3() {
		return filed3;
	}

	@Override
	public String toString() {
		return "SomeBean [filed1=" + filed1 + ", filed2=" + filed2 + ", filed3=" + filed3 + "]";
	}
	
}
----------------------------------------------------------------------------------------------------------
                                                                                        |
                                                                                        V
----------------------------------------------------------------------------------------------------------

ğŸŒ http://localhost:8080/filtering ì‚¬ì´íŠ¸í™”ë©´ ==>

{
  "field1": "value1",
  "field3": "value3"
}
----------------------------------------------------------------------------------------------------------
ì¢‹ë‹¤ ë³´ë‹¤ì‹œí”¼ field2ê°€ í•„í„°ë§ëë‹¤

-------------------------
	@GetMapping("/filtering") //field2
	public MappingJacksonValue filtering() {
    //ì„¤ëª…1: ì—¬ê¸°ì„  ë¹ˆì„ ì •ì˜í–ˆë‹¤, ì´ ë¹ˆì—ëŠ” ë°˜í™˜í•˜ë ¤ëŠ” ë°ì´í„°ê°€ ë“¤ì–´ìˆì§€ 
		SomeBean someBean = new SomeBean("value1","value2","value3");

    //ì„¤ëª…2: ì•„ë˜ì— ì •ì˜í•œ ê±´ í•„í„°ë§ ë¡œì§ì´ë‹¤, í•„í„°ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ MappingJacksonValueë¥¼ ì´ìš©í–ˆê³  MappingJacksonValue ê°’ì„ ë°˜í™˜í–ˆë‹¤
    //Mapping.jacksonValueë¥¼ ì´ìš©í•˜ë©´ ë°ì´í„° ì™¸ì— ì§ë ¬í™” ë…¼ë¦¬ë„ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤
		MappingJacksonValue mappingJacksonValue = new MappingJacksonValue(someBean);

    //ì„¤ëª…3: ì§ë ¬í™” ë¡œì§ì„ ì¶”ê°€í•˜ê¸° ìœ„í•´ filterë¥¼ ì •ì˜í•´ì•¼ í–ˆë‹¤ ì—¬ê¸°ì„œ SimpleBeanPropertyFilterë¥¼ ì´ìš©í–ˆì§€
    //field1ê³¼ field3ë§Œ ì‘ë‹µìœ¼ë¡œ ë°˜í™˜ë˜ê²Œë§ì´ë‹¤ filterë¡œ ê·¸ê±¸ ì •ì˜í•œ ê²ƒì´ë‹¤
		SimpleBeanPropertyFilter filter = SimpleBeanPropertyFilter.filterOutAllExcept("field1", "field3");

    //ì„¤ëª…4: ì´ì–´ì„œ ì´ filterë¥¼ ì •ì˜í•˜ëŠ” filterProviderë¥¼ ìƒì„±í–ˆê³ , ì¤€ë¹„ëœ filterë¥¼ mappingJackson.setFilters(filter);ì²˜ëŸ¼ ë„˜ê²¼ë‹¤
    //ë¹ˆ ë¿ë§Œ ì•„ë‹ˆë¼ ì§ë ¬í™” ë¡œì§ê¹Œì§€ í•¨ê»˜ ë°˜í™˜í•˜ê³  ìˆëŠ” ê±°ë‹¤, ê·¸ë¦¬ê³  ë³´ë‹¤ì‹œí”¼ field1ê³¼ field3ë§Œ ì‘ë‹µìœ¼ë¡œ ë°›ëŠ”ë‹¤
		FilterProvider filters = new SimpleFilterProvider().addFilter("SomeBeanFilter", filter);
		mappingJacksonValue.setFilters(filters);
		
		return mappingJacksonValue;
	}
-------------------------


ì´ì œ ë‹¤ìŒì— ìˆëŠ” ë‘ ë²ˆì§¸ ë©”ì„œë“œ(filteringList())ë¥¼ ë³´ê² ë‹¤ 
ì—¬ê¸°ì„  field2ì™€ field3ë§Œ ë°˜í™˜í•˜ê³  field1ì€ ë°˜í™˜í•˜ì§€ ì•Šì„ ê²ƒì´ë‹¤ ì–´ë–»ê²Œ ì •ì˜í• ê¹Œ?
ì‰½ë‹¤.

----------------------------------------------------------------------------------------------------------


âº FilteringController í´ë˜ìŠ¤íŒŒì¼


package com.in28minutes.rest.webservices.restfulwebservices.filtering;

import java.util.*;

import org.springframework.http.converter.json.*;
import org.springframework.web.bind.annotation.*;

import com.fasterxml.jackson.databind.ser.*;
import com.fasterxml.jackson.databind.ser.impl.*;

@RestController
public class FilteringController {
	
	@GetMapping("/filtering") //field2
	public MappingJacksonValue filtering() {
		SomeBean someBean = new SomeBean("value1","value2","value3");
		
		MappingJacksonValue mappingJacksonValue = new MappingJacksonValue(someBean);
		SimpleBeanPropertyFilter filter = SimpleBeanPropertyFilter.filterOutAllExcept("field1", "field3");
		FilterProvider filters = new SimpleFilterProvider().addFilter("SomeBeanFilter", filter);
		mappingJacksonValue.setFilters(filters);
		
		return mappingJacksonValue;
	}

	@GetMapping("/filtering-list")	//field2, field3
  //5-1: ê°€ì¥ ë¨¼ì € ë°˜í™˜ íƒ€ì…ì„ MappingJacksonValueë¡œ ë°”ê¾¸ê² ë‹¤ (public List<SomeBean> filteringList() ì—ì„œ public MappingJacksonValue filteringList()ë¡œ ë³€ê²½)
  //List<SomeBean>ëŒ€ì‹  MappingJacksonValueë¥¼ ë°˜í™˜í•œë‹¤, ì´ì œ MappingJacksonValue ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•´ë³´ì//5-2: ë³¸ë¬¸ ì•ˆìœ¼ë¡œ ê°€ì„œ list ë³€ìˆ˜ ì•„ë˜ì— ì‘ì„±..
	public MappingJacksonValue filteringList() {
  //5:ì¢‹ë‹¤ Arrays.asList(new SomeBean("value1","value2","value3"), new SomeBean("value4","value5","value6")); ì´ë ‡ê²Œ ë“œë˜ê·¸ í•´ì„œ ë³€ìˆ˜ë¥¼ ì¶”ì¶œí•´ ë³´ì Extract Local Variable ì„ íƒ ì´ë¦„ì€ listë¡œ í•˜ê² ë‹¤
  //listë¼ëŠ” ë³€ìˆ˜ì™€ ê·¸ ì™¸ì˜ ì½”ë“œë“¤ì´ ìˆë‹¤ 
		List<SomeBean> list = Arrays.asList(new SomeBean("value1","value2","value3"),
				new SomeBean("value4","value5","value6"));

    //5-2:ìœ„ì— ìˆëŠ” MappingJacksonValue mappingJacksonValue = new MappingJacksonValue(someBean);ì¤„ì„ ë³µì‚¬í•´ì„œ ë¶™ì—¬ë„£ê³  (someBean)ì„ (list)ë¡œ ìˆ˜ì •í•˜ê² ë‹¤
    MappingJacksonValue mappingJacksonValue = new MappingJacksonValue(list);
  
    /*5-4: ìœ„ì˜ ë©”ì†Œë“œì—ì„œ 
    //SimpleBeanPropertyFilter filter = SimpleBeanPropertyFilter.filterOutAllExcept("field1", "field3");
    //	FilterProvider filters = new SimpleFilterProvider().addFilter("SomeBeanFilter", filter);
		//mappingJacksonValue.setFilters(filters);
    ì´ ì„¸ì¤„ì„ ë³µì‚¬í•´ ì—¬ê¸° ë„£ê² ë‹¤
    */
    //ì´ì œ filterOutAllExcept("field1", "field3"); => ("field2", "field3")ìœ¼ë¡œ ë°”ê¿”ì¤€ë‹¤ ê·¸ë¦¬ê³  ì €ì¥...
		SimpleBeanPropertyFilter filter = SimpleBeanPropertyFilter.filterOutAllExcept("field2", "field3");
		FilterProvider filters = new SimpleFilterProvider().addFilter("SomeBeanFilter", filter);
		mappingJacksonValue.setFilters(filters);

    //5-3: ë°˜í™˜ ê°’ë„ return mappingJacksonValue; ì²˜ëŸ¼ ë°”ê¾¸ê³  , mappingJacksonValue ì¤€ë¹„ë¥¼ ë§ˆì³¤ë‹¤ ì´ì œ í•„í„°ë§ ë¡œì§ì„ ì •ì˜í•´ë³´ì//5-4: MappingJacksonValue mappingJacksonValue ì•„ë˜ì— ì‘ì„±..
    return mappingJacksonValue;
	}
}
----------------------------------------------------------------------------------------------------------
ìš”ì²­ì„ ì‹¤í–‰í•˜ë©´                                                                |
                                                                              V
----------------------------------------------------------------------------------------------------------

ğŸŒ http://localhost:8080/filtering-list ì‚¬ì´íŠ¸í™”ë©´ ==>

[
  {
    "field2": "value2",
    "field3": "value3"
  },
  {
    "field2": "value5",
    "field3": "value6"
  }
]

----------------------------------------------------------------------------------------------------------
ì´ë ‡ê²Œ field1ì€ í‘œì‹œë˜ì§€ ì•ŠëŠ”ë‹¤ 

filteringì—ì„œëŠ” field2ê°€ í‘œì‹œë˜ì§€ ì•Šì•˜ì§€?
----------------------------------------------------------------------------------------------------------

ğŸŒ http://localhost:8080/filtering ì‚¬ì´íŠ¸í™”ë©´ ==>

{
  "field1": "value1",
  "field3": "value3"
}
----------------------------------------------------------------------------------------------------------




ì´ë ‡ê²Œ ë‘ ë©”ì„œë“œì—ì„œ ì„œë¡œ ë‹¤ë¥¸ í•„í„°ë§ ë¡œì§ì„ êµ¬í˜„í–ˆë‹¤
ë„ˆë„ ë´¤ë‹¤ì‹œí”¼ ì½”ë“œì— ì•½ê°„ì˜ ì¤‘ë³µì´ ìˆë‹¤, 
íŠ¹íˆ filterë¥¼ ìƒì„±í•˜ëŠ” ì½”ë“œì— 
		SimpleBeanPropertyFilter filter = SimpleBeanPropertyFilter.filterOutAllExcept("field1", "field3");
		FilterProvider filters = new SimpleFilterProvider().addFilter("SomeBeanFilter", filter);
		mappingJacksonValue.setFilters(filters);
ì¤‘ë³µë˜ëŠ” ë¶€ë¶„ì´ ë§ì•˜ë‹¤

ì´ê±¸ ë¦¬íŒ©í† ë§í•´ì„œ ì¤‘ë³µì„ ì œê±°í•˜ëŠ” ê±´ ì‹¤ìŠµ ì‚¼ì•„ í•œë²ˆ í•´ë´ë¼






ì´ë²ˆ ë‹¨ê³„ì™€ ì§€ë‚œ ë‹¨ê³„ì—ì„  ì •ì  í•„í„°ë§ê³¼ ë™ì  í•„í„°ë§ì´ë¼ëŠ” ë‘ í•„í„°ë§ ìœ í˜•ì„ ì‚´í´ë³´ê³ 
ê·¸ê±¸ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì„ ì‚´í´ë´¤ë‹¤
