

ì´ë²ˆ ë‹¨ê³„ì—ì„  MySQLì„ Docker ì»¨í…Œì´ë„ˆë¡œ ì‹¤í–‰í•´ë³´ê³  REST APIë¥¼ MySQL DBì— ì—°ê²°í•´ ë³´ê² ë‹¤

dockerë¥¼ ì„¤ì¹˜í•˜ì˜€ìœ¼ë©´
cmdì—ì„œ 
docker versionì„ ì…ë ¥í•˜ë©´ í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ê°€ ë‚˜íƒ€ë‚œë‹¤

ğŸ”µ Docker ë²„ì „ í™•ì¸ë° ìƒíƒœ í™•ì¸

-------------------------------------------------------------------------------------------

âº cmd ì°½ >

C:\Users\LG>docker version
Client:
 Cloud integration: v1.0.35+desktop.13
 Version:           26.1.1
 API version:       1.45
 Go version:        go1.21.9
 Git commit:        4cf5afa
 Built:             Tue Apr 30 11:48:43 2024
 OS/Arch:           windows/amd64
 Context:           default

Server: Docker Desktop 4.30.0 (149282)
 Engine:
  Version:          26.1.1
  API version:      1.45 (minimum version 1.24)
  Go version:       go1.21.9
  Git commit:       ac2de55
  Built:            Tue Apr 30 11:48:28 2024
  OS/Arch:          linux/amd64
  Experimental:     false
 containerd:
  Version:          1.6.31
  GitCommit:        e377cd56a71523140ca6ae87e30244719194a521
 runc:
  Version:          1.1.12
  GitCommit:        v1.1.12-0-g51d5e94
 docker-init:
  Version:          0.19.0
  GitCommit:        de40ad0
-------------------------------------------------------------------------------------------

í„°ë¯¸ë„ì´ë‚˜ ëª…ë ¹ í”„ë¡¬í”„íŠ¸ì—ì„œ ì´ëŸ° í™”ë©´ì´ ë³´ì´ì§€ ì•Šìœ¼ë©´ ì–¼ë¥¸ Dockerë¥¼ ì‹¤í–‰í•´ë¼
ê·¸ëŸ¬ë©´ MySQL ì»¨í…Œì´ë„ˆë¥¼ Docker ì»¨í…Œì´ë„ˆë¡œ ì‹¤í–‰í•  ì¤€ë¹„ê°€ ëœ ê²ƒì´ë‹¤ 

ğŸ”µ Docker ì»¨í…Œì´ë„ˆë¡œ MySQL ì‹¤í–‰

MySQLì„ Docker ì»¨í…Œì´ë„ˆë¡œ ì‹¤í–‰í•˜ëŠ” ëª…ë ¹ë¬¸ì€ ê½¤ ê¸¸ë‹¤
-------------------------------------------------------------------------------------------

ğŸ”µ Launch MySQL as Docker Container

docker run --detach --env MYSQL_ROOT_PASSWORD=dummypassword --env MYSQL_USER=social-media-user --env MYSQL_PASSWORD=dummypassword --env MYSQL_DATABASE=social-media-database --name mysql --publish 3306:3306 mysql:8-oracle
-------------------------------------------------------------------------------------------

ê°•ì˜ ì‚¬ì´íŠ¸ì—ì„œ ì´ ëª…ë ¹ë¬¸ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ë‘ì—ˆë‹¤

ì´ì „ ê°•ì˜ë¡œ ê°€ì„œ ëª…ë ¹ë¬¸ì„ ë³µì‚¬í•˜ê³  ë³µì‚¬í•œ ëª…ë ¹ë¬¸ì„ ì‚¬ìš©í•´ì„œ MySQLì„ Docker ì»¨í…Œì´ë„ˆë¡œ ì‹¤í–‰í•˜ë©´ ëœë‹¤

ëª…ë ¹í”„ë¡¬í”„íŠ¸ì— ë¶™ì—¬ë„£ê¸°í•´ì„œ ì‹¤í–‰í•˜ê² ë‹¤

-------------------------------------------------------------------------------------------

âº cmd ì°½ >

C:\Users\LG>docker run --detach --env MYSQL_ROOT_PASSWORD=dummypassword --env MYSQL_USER=social-media-user --env MYSQL_PASSWORD=dummypassword --env MYSQL_DATABASE=social-media-database --name mysql --publish 3306:3306 mysql:8-oracle
Unable to find image 'mysql:8-oracle' locally
8-oracle: Pulling from library/mysql
07bc88e18c4a: Pull complete
1a9c1668bf49: Pull complete
1021dda8eecf: Pull complete
fb61b56acac1: Pull complete
0bca83908a5b: Pull complete
165e8b3d37ca: Pull complete
3e1b086f1295: Pull complete
dba651668484: Pull complete
ed90f5355e12: Pull complete
0412f59ab2b5: Pull complete
Digest: sha256:aa021e164da6aacbefc59ed0b933427e4835636be380f3b6523f4a6c9564e1f0
Status: Downloaded newer image for mysql:8-oracle
c1e898818d562d605b2f36c7c7a6249cb19ae0273ae55cee934d23467da73a94

-------------------------------------------------------------------------------------------
ì—”í„°ë¥¼ ëˆ„ë¥´ë©´ ë¡œì»¬ì—ì„œ 'mysql:8-oracle'ì´ë¯¸ì§€ë¥¼ ì°¾ì„ìˆ˜ ì—†ì' ì´ë¼ê³  í‘œì‹œë  í…ë° 
MySQL ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë°›ê³  ìˆë‹¤ ë‹¤ìš´ë¡œë“œëŠ” ì•½ 1ë¶„ ì •ë„ ê±¸ë¦´ ê²ƒì´ë‹¤, ì¸í„°ë„· ì†ë„ì— ë”°ë¼ ë‹¤ë¥´ê² ì§€

ì´ë¯¸ì§€ê°€ ë‹¤ìš´ë¡œë“œë˜ê³  ìƒˆ ì»¨í…Œì´ë„ˆë„ ìƒì„±ëë‹¤ 


docker í•œì¹¸ ë„ê³  container í•œì¹¸ ë„ê³  lsë¥¼ ì…ë ¥í•˜ë©´

-------------------------------------------------------------------------------------------

âº cmd ì°½ >

C:\Users\LG>docker container ls
CONTAINER ID   IMAGE            COMMAND                   CREATED         STATUS         PORTS                               NAMES
c1e898818d56   mysql:8-oracle   "docker-entrypoint.sâ€¦"   5 minutes ago   Up 5 minutes   0.0.0.0:3306->3306/tcp, 33060/tcp   mysql

-------------------------------------------------------------------------------------------

ëª¨ë“  ì»¨í…Œì´ë„ˆë¥¼ ëª©ë¡ìœ¼ë¡œ ë³´ì—¬ì¤€ë‹¤ 
ì‹¤í–‰ ì¤‘ì¸ ì»¨í…Œì´ë„ˆê°€ ë‚˜ì˜¤ì§€ 
MySQLì— ì†í•œ ì´ ì»¨í…Œì´ë„ˆê°€ ì—¬ê¸°ì„œ ì‹¤í–‰ ì¤‘ì´ë‹¤

ì´ì œ ì´ ëª…ë ¹ë¬¸ì„ ìª¼ê°œì„œ ì¢€ ë” íŒŒí—¤ì³ë³´ì
-------------------------------------------------------------------------------------------
docker run --detach --env MYSQL_ROOT_PASSWORD=dummypassword --env MYSQL_USER=social-media-user --env MYSQL_PASSWORD=dummypassword --env MYSQL_DATABASE=social-media-database --name mysql --publish 3306:3306 mysql:8-oracle
-------------------------------------------------------------------------------------------

ì´ ëª…ë ¹ë¬¸ì€ ì¢€ ë³µì¡í•´ ë³´ì´ì§€ë§Œ ì„¸ë¶„í•˜ë©´ ì•„ì£¼ ì‰½ë‹¤

-------------------------------------------------------------------------------------------

docker run --detach
--env MYSQL_ROOT_PASSWORD=dummypassword
--env MYSQL_USER=social-media-user 
--env MYSQL_PASSWORD=dummypassword 
--env MYSQL_DATABASE=social-media-database 
--name mysql 
--publish 3306:3306 
mysql:8-oracle

-------------------------------------------------------------------------------------------
í™˜ê²½ ë³€ìˆ˜ë¥¼ ë‹¤ìŒ ì¤„ë¡œ ê°€ì ¸ì™€ë³´ê² ë‹¤, ì»¨í…Œì´ë„ˆì— ì´ë¦„ì„ ë¶™ì´ê³  íŠ¹ì • í¬íŠ¸ì— í¼ë¸”ë¦¬ì‹±í•˜ê³  ìˆì§€, ì´ë¯¸ì§€ ì´ë¦„ì´ ë‚˜ì˜¤ê³ 

mysql:8-oracle << ì—¬ê¸° ìˆëŠ” ê²ƒì´ ì´ë¯¸ì§€ ì´ë¦„ì¸ë° 
mysql:8-oracleì´ MySQL ì´ë¯¸ì§€ì˜ ì™„ì „í•œ ì´ë¦„ì´ì ë²„ì „ì´ë‹¤ 
MySQLì˜ 8-oracle ì´ë¼ëŠ” ì´ íŠ¹ì • íƒœê·¸ëŠ” ì•„ë¬´ ìš´ì˜ì²´ì œì—ì„œë‚˜ ì‹¤í–‰ë  ìˆ˜ ìˆë‹¤
Linux, Windows, Macì—ì„œë„ ì‹¤í–‰ëœë‹¤, ê·¸ë˜ì„œ MySQLì˜ ì´ íŠ¹ì • íƒœê·¸ë¥¼ ì„ íƒí•œ ê²ƒì´ë‹¤

MySQLì„ ì‹¤í–‰í•  ë•Œ ë£¨íŠ¸ ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ëŠ” ë­ê³ , ìƒì„±í•˜ë ¤ëŠ” ì‚¬ìš©ì IDëŠ” ë­”ì§€ ë˜ ì‚¬ìš©ì IDì˜ ë¹„ë°€ë²ˆí˜¸ëŠ” ë­”ì§€, 
=>--env MYSQL_ROOT_PASSWORD=dummypassword
  --env MYSQL_USER=social-media-user 
  --env MYSQL_PASSWORD=dummypassword 

ìƒì„±í•˜ë ¤ëŠ” DBëŠ” ë­”ì§€ë¥¼ ì„¤ì •í•´ì¤˜ì•¼ í•˜ê³  
=> --env MYSQL_DATABASE=social-media-database 

ì»¨í…Œì´ë„ˆì— ì–´ë–¤ ì´ë¦„ì„ ë¶™ì´ê³  ì‹¶ì€ì§€
=> --name mysql

ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•  í¬íŠ¸ëŠ” ë­”ì§€ë„ ì„¤ì •í•´ì•¼ í•˜ì§€
=> --publish 3306:3306 


ê´€ë¦¬ì ë¹„ë°€ ë²ˆí˜¸ë¥¼ dummypasswordë¡œ ì„¤ì •í•˜ê³  ìˆê³  --env MYSQL_ROOT_PASSWORD=dummypassword
MySQL ì‚¬ìš©ìë¥¼ social-media-userë¡œ, social-media-userì˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ dummypasswordë¡œ ìƒì„±í•˜ê³  ìˆë‹¤
ì´ ë‘ ê°€ì§€ ìê²© ì¦ëª…ì„ ì‚¬ìš©í•´ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ DBë¡œ ì—°ê²°í•  ìˆ˜ ìˆê³ 
=> --env MYSQL_USER=social-media-user 
   --env MYSQL_PASSWORD=dummypassword 

social-media-database  ë¼ëŠ” DBë¥¼ ìƒì„±í•˜ê³  ìˆë‹¤ 
ì´ë¦„ì€ ì»¨í…Œì´ë„ˆ ì´ë¦„ì„ ë§í•˜ì§€ --name mysql 

docker container lsì—ì„œ ì´ë¦„ì„ ì‚´í´ë³´ë©´ mysqlì´ë¼ê³  ë‚˜ì™€ìˆì§€?
------------------------------------
C:\Users\LG>docker container ls
CONTAINER ID   IMAGE            COMMAND                   CREATED         STATUS         PORTS                               NAMES
c1e898818d56   mysql:8-oracle   "docker-entrypoint.sâ€¦"   5 minutes ago   Up 5 minutes   0.0.0.0:3306->3306/tcp, 33060/tcp   mysql
------------------------------------
mysqlì´ë¼ëŠ” ì´ë¦„ì€ --name mysql  ì—¬ê¸°ì„œ ì˜¨ ê²ƒì´ë‹¤, ì´ê±¸ 3306í¬íŠ¸ì—ì„œ ì‹¤í–‰í•˜ë ¤ëŠ” ê²ƒì´ê³  => --publish 3306:3306 
ìš´ì˜ì²´ì œì—ì„œ ë­”ê°€ë¥¼ ì‹¤í–‰í•˜ë ¤ê³  í•  ë•Œë§ˆë‹¤ í¬íŠ¸ë¥¼ í• ë‹¹í•´ì¤˜ì•¼ í•œë‹¤
ì´ ì»¨í…Œì´ë„ˆëŠ” 3306í¬íŠ¸ì—ì„œ ì‹¤í–‰ë˜ê³  ìˆì§€
PORTS
0.0.0.0:3306->3306/tcp, 33060/tcp

ì´ì œ MySQL ì»¨í…Œì´ë„ˆê°€ ì‘ë™í•˜ê³  ìˆë‹¤ 
ì´ì œ í•  ì¼ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì´ ì»¨í…Œì´ë„ˆë¡œ ì—°ê²°í•˜ëŠ” ê±°ë‹¤
ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì–´ë–»ê²Œ ì—°ê²°í• ê¹Œ?


ğŸ”µ MySQL ì»¨í…Œì´ë„ˆì™€ ì• í”Œë¦¬ì¼€ì´ì…˜ ì—°ê²° í•˜ê¸°

ì´ë•Œ ê°€ì•¼ í•  ê³³ì´ application.propertiesì´ë‹¤
ì—¬ê¸°ì„œ í•´ì•¼ í•  ì¼ì€ H2 DBë¡œ ì—°ê²°í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ MySQL DBë¡œ ì—°ê²°í•˜ëŠ” ê²ƒì´ë‹¤

-------------------------------------------------------------------------------------------

âº application.properties íŒŒì¼


spring.application.name=restful-web-services

logging.level.org.springframework=info

management.endpoints.web.exposure.include=*

#1: ì´ì œ ì—¬ê¸° ì´ ë¶€ë¶„ë§Œ ì£¼ì„ ì²˜ë¦¬í•˜ê² ë‹¤, H2 DBë¡œ ì—°ê²°í•˜ë ¤ëŠ” ê²Œ ì•„ë‹ˆì§€
#spring.datasource.url=jdbc:h2:mem:testdb

spring.jpa.defer-datasource-initialization=true

spring.jpa.show-sql=true

#2: ìš°ë¦¬ëŠ” MySQL DBë¡œ ì—°ê²°í•˜ë ¤ëŠ” ê±°ê¸° ë•Œë¬¸ì´ë‹¤ spring.datasource.url=ì„ ì…ë ¥í•˜ê³  ì—¬ê¸°ì— MySQL DBë¡œ ì—°ê²°ë˜ëŠ” URLì„ ë„£ì–´ì•¼ê² ì§€
spring.datasource.url=

#2-1:ë°ì´í„° ì†ŒìŠ¤ë¡œ ì—°ê²°í•  ì‚¬ìš©ì IDì™€ ë¹„ë°€ë²ˆí˜¸ë„ ìˆì–´ì•¼ í•œë‹¤ datasource.username=ë¼ê³  ì…ë ¥í•˜ê³  ë¹„ë°€ë²ˆí˜¸ë„ í•„ìš”í•˜ë‹¤
spring.datasource.username=

#2-2: datasource.password= ì…ë ¥
spring.datasource.password=
-------------------------------------------------------------------------------------------

docker run --detach
--env MYSQL_ROOT_PASSWORD=dummypassword
--env MYSQL_USER=social-media-user 
--env MYSQL_PASSWORD=dummypassword 
--env MYSQL_DATABASE=social-media-database 
--name mysql 
--publish 3306:3306 
mysql:8-oracle
ì´ì œ ì´ ëª…ë ¹ë¬¸ì„ ì—¬ê¸°ì„œ ë³µì‚¬í•´ì„œ ì•„ë˜ë¡œ ë‚´ë¦¬ê³  ctrl+/ ë¥¼ ëˆŒëŸ¬ì„œ
ì´ë¶€ë¶„ ë“¤ì„ ì£¼ì„ ì²˜ë¦¬í•œë‹¤


-------------------------------------------------------------------------------------------

âº application.properties íŒŒì¼


spring.application.name=restful-web-services

logging.level.org.springframework=info

management.endpoints.web.exposure.include=*

#spring.datasource.url=jdbc:h2:mem:testdb

spring.jpa.defer-datasource-initialization=true

spring.jpa.show-sql=true

#3-2: ê·¸ë¦¬ê³  ì‚¬ìš©í•  URLì€ JDBC URL ì´ë‹¤ MySQLë¡œ ì—°ê²°í•˜ë ¤ëŠ” ê±°ì§€ jdbc:mysql:ì„ ì…ë ¥í•˜ê³  DBê°€ ì‹¤í–‰ë˜ëŠ” í¬íŠ¸ëŠ” ë­ì§€? ë¡œì»¬í˜¸ìŠ¤íŠ¸ 3306 í¬íŠ¸ì—ì„œ ì‹¤í–‰ëœë‹¤
#localhost:3306ì„ ì…ë ¥í•˜ê³  ë‹¤ìŒ ìŠ¬ë˜ì‹œê°€ ì˜¤ê³  DB ì´ë¦„ì´ ì˜¨ë‹¤, DB ì´ë¦„ì€ MYSQL_DATABASEì˜ ê°’, ì¦‰ social-media-databaseì§€ ì—¬ê¸° mysql:ë‹¤ìŒì—ëŠ” //ë¥¼ ë„£ì–´ì•¼ í•˜ì§€ ì´ë ‡ê²Œ ì…ë ¥í•˜ëŠ” ê±´ ì‹ ê²½ ì•ˆ ì¨ë„ ëœë‹¤ ì´ ë¶€ë¶„ë„ ì´ì „ ê°•ì˜ì— ë„£ì–´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ë‘˜ ê²ƒì´ë‹¤ ì›í•œë‹¤ë©´ 
/*
spring.datasource.url=jdbc:mysql://localhost:3306/social-media-database
spring.datasource.username=social-media-user
spring.datasource.password=dummypassword 
*/
#ì—¬ê¸° ì´ í”„ë¡œí¼í‹° ê°’ì„ ë³µì‚¬í•´ë„ ëœë‹¤
spring.datasource.url=jdbc:mysql://localhost:3306/social-media-database

#3: ì‚¬ìš©í•˜ë ¤ëŠ” ì‚¬ìš©ì ì´ë¦„ì€ social-media-userì´ê³ 
spring.datasource.username=social-media-user

#3-1: ì‚¬ìš©í•  ë¹„ë°€ë²ˆí˜¸ëŠ” dummypassword ì´ë‹¤
spring.datasource.password=dummypassword 

-------------------------------------------------------------------------------------------

ì´ì œ ì„¸ ê°€ì§€ í”„ë¡œí¼í‹°ë¥¼ ì„¤ì •í–ˆë‹¤, spring.datasource.urlê³¼ spring.datasource.username ê·¸ë¦¬ê³  spring.datasource.passwordì§€

