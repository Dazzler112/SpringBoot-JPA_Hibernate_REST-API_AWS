

мќґлІ€ л‹Ёкі„лЉ” DBм—ђ м—°кІ°, м‚­м њ, м—…лЌ°мќґнЉё, м¶”к°ЂлҐј н•ґліґкІ л‹¤ к·ёлџј м‹њмћ‘н•ґ ліґкІ л‹¤
мљ°л¦¬мќ TodoControllerJpa нЃґлћмЉ¤лЎњ к°Ђліґмћђ
л№„н™њм„±н™”лђњ TodoControllerлЉ” ліЂкІЅн•м§Ђ м•Љм•лЉ”м§Ђ н™•мќён•кі  list-todos л‹¤мќЊ л©”м„њл“њлЎњ к°Ђліґмћђ
л‹¤мќЊ л©”м„њл“њлЉ” showNewTodoPage()мќґкі 

----------------------------------------------------------------------------------------------------------------------



вЏє TodoControllerJpa нЃґлћмЉ¤нЊЊмќј




package com.firstapplication.springboot.myfirstwebapp.todo;

import java.time.*;
import java.util.*;

import org.springframework.security.core.*;
import org.springframework.security.core.context.*;
import org.springframework.stereotype.*;
import org.springframework.ui.*;
import org.springframework.validation.*;
import org.springframework.web.bind.annotation.*;

import jakarta.validation.*;

@Controller
@SessionAttributes("name")
public class TodoControllerJpa {

	public TodoControllerJpa(TodoService todoService, TodoRepository todoRepository) {
		super();
		this.todoService = todoService;
		this.todoRepository = todoRepository;
	}
	
	private TodoService todoService;
	

	private TodoRepository todoRepository;
	
	@RequestMapping("list-todos")
	public String listAllTodos(ModelMap model) {
		String username = getLoggedInUsername(model);
		
		List<Todo> todos = todoRepository.findByUsername(username);
		model.addAttribute("todos", todos);
		
		return "listTodos";
	}

	
	//GET, POST

  //1: м—¬кё°м„њ ServiceлҐј м‚¬мљ©н•м§Ђ м•Љкё° л•Њл¬ём—ђ мЃн–Ґмќ„ л°›м§Ђ м•Љкі  мћ€л‹¤, к·ёлџј addNewTodo()л©”м„њл“њлЎњ к°Ђліґмћђ //1-1: addNewTodo()л©”м„њл“њлЎњ..
	@RequestMapping(value="add-todo",method=RequestMethod.GET)
	public String showNewTodoPage(ModelMap model) {
		String username = getLoggedInUsername(model);
		Todo todo = new Todo(0, username, "", LocalDate.now().plusYears(1), false);
		model.put("todo", todo);
		return "todo";
	}

  //1-1: мќґ л©”м„њл“њлЉ” л„€к°Ђ мѓ€лЎњмљґ TodoлҐј м¶”к°Ђн•  л•Њ нём¶њлђлЉ” л©”м„њл“њмќґл‹¤, л§ЋмќЂ кІѓл“¤мќґ м—¬кё°м„њ м‹¤н–‰лђлЉ” к±ё ліј м€ мћ€кі 
	@RequestMapping(value="add-todo",method=RequestMethod.POST)
	public String addNewTodo(ModelMap model, @Valid Todo todo, BindingResult result) {
		
		if(result.hasErrors()) {
			return "todo";
		}
		
		String username = getLoggedInUsername(model);
  //1-3:к·ёлџј м—¬кё°м„њ todoлЎњ мњ мћ…лђлЉ” к°’мќё todoлҐј м“°кі , мќґм–ґм„њ .setUsername()мќґлќјкі  н•кі  usernameмќ„ л„Јм–ґм¤„ кІѓмќґл‹¤, мќґл ‡кІЊ мљ°л¦¬лЉ” Todo Beanм—ђ л“¤м–ґк°ЂлЉ” лЄЁл“  к°’мќ„ м„¤м •н•кі  мћ€л‹¤ м™њм§Ђ?
  //м™њ мљ°л¦¬лЉ” лЄЁл“  к°’мќ„ Todo Beanм—ђ л„Јкі  мћ€мќ„к№Њ? м™њлѓђл©ґ TodoRepositoryлЉ” лЄЁл“  м†Ќм„±мќ„ л°›лЉ” л©”м„њл“њк°Ђ м—†кё° л•Њл¬ёмќґл‹¤, TodoRepositoryмќ save() л©”м„њл“њлЉ” todoлҐј мћ…л Ґк°’мњјлЎњ л°›мќ„ к±°кі  к·ёлџј мљ°л¦¬лЉ” лЄЁл“  к°’мќ„ м„¤м •н•ґм„њ todoм—ђ л„Јкі , todoRepositorty.save()н•кі  н•ґм¤Ђл‹¤ 
  todo.setUsername(username);
  todoRepository.save(todo);

  //1-4:мќґм њ мќґ м•„лћлҐј м‚­м њн•  м€ мћ€л‹¤, к·ёк±ґ лЌ” мќґмѓЃ н•„мљ”н•м§Ђ м•Љкі  мќґк±ё м ЂмћҐн•њл‹¤
  //1-4 кі„м†Ќ: м—¬кё°м„њ мљ°л¦° usernameмќ„ todoм—ђ м„¤м •н•ґ л„Јкі  к·ёк±ё м ЂмћҐн•кі  мћ€л‹¤ м•ћм—ђм„њ мљ°л¦¬к°Ђ л©”м„њл“њлҐј мћ‘м„±н• л•ЊлЉ” к°њлі„ м†Ќм„±мќ„ нЊЊлќјлЇён„°лЎњ л°›м•л‹¤, вќ— рџ”µк¶ЊмћҐ л°©м‹ќ: н•м§Ђл§Њ todoRsponsitoryм—ђм„њ к¶ЊмћҐлђлЉ” м ЂмћҐ л°©м‹ќмќЂ todoлҐј м¬л°”лҐё к°’мњјлЎњ м±„мљ°кі  к°„л‹Ёнћ€ save()л©”м„њл“њлҐј нём¶њн•лЉ” л°©м‹ќмќґл‹¤ вќ— мљ°л¦° м—¬кё°м„њ к·ёк±ё н•кі мћ€кі  к·ёлџј м›№м‚¬мќґнЉёлЎњ к°Ђм„њ Add TodoлҐј нЃґл¦­н•ґліґмћђ 
  //1-2: л°©кё€ н™•мќён•њ к±ґ LocalDate.now().plusYears(1)мќґл‹¤, м‚¬мљ©мћђк°Ђ м„ нѓќн•њ к°’мќ„ м‚¬мљ©н•м§Ђ м•Љкі  н•л“њмЅ”л”©лђњ к°’мќ„ м‚¬мљ©н•кі  мћ€л‹¤ мќґк±ё ліЂкІЅн•ґліґмћђ
  //к·ёлџј todo.getTargetDate()лҐј мЌЁм•јн•кі  , falseлЏ„ todo.isDone()мќґлќјкі  н•ґм¤Ђл‹¤, к·ёлџј мќґм њ м„¤м •лђм§Ђ м•ЉмќЂ к±ґ usernameлїђмќґл‹¤ л‹¤лҐё лЄЁл“  к°’мќЂ todoм—ђм„њ м„ нѓќлђкі  мћ€л‹¤
//		todoService.addTodo(username, todo.getDescription(), 
//				todo.getTargetDate(), todo.isDone());
		
		return "redirect:list-todos";
	}
	
	@RequestMapping("delete-todo")
	public String deleteTodo(@RequestParam int id) {
		//Delete todo
		todoService.deleteById(id);
		
		return "redirect:list-todos";

	}
	
	
	@RequestMapping(value="update-todo", method=RequestMethod.GET)
	public String showUpdateTodoPage(@RequestParam int id, ModelMap model) {
		Todo todo = todoService.findById(id);
		model.addAttribute("todo",todo);
		return "todo";

	}
	
	@RequestMapping(value="update-todo",method=RequestMethod.POST)
	public String updateTodo(ModelMap model, @Valid Todo todo, BindingResult result) {
		
		if(result.hasErrors()) {
			return "todo";
		}
		
		String username = getLoggedInUsername(model);
		todo.setUsername(username);
		todoService.updateTodo(todo);
		
		return "redirect:list-todos";
	}
	
	private String getLoggedInUsername(ModelMap model) {
		Authentication authentication = 
				SecurityContextHolder.getContext().getAuthentication();
		
		return authentication.getName();
	}
	
}

----------------------------------------------------------------------------------------------------------------------
                                                                      |
                                                                      V
----------------------------------------------------------------------------------------------------------------------


http://localhost:8087/list-todos нЋмќґм§Ђн™”л©ґ ==>

вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ
in28Minutes   Home Todos                         (лІ мќґм§Ђ? л°”нѓ•)                                           Logout                                            
_______________________________________________________________________________________________________________


      Your Todos

      Description	                      Taget Date	   Is Done?
      вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ
                                                                                     _______________      _______________
      Get AWS Certified                       2025-05-12	   false            | Delete(л…ёл°”нѓ•) |   | Update (л…№л°”нѓ•) |
                                                                                     вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ      вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ
      ---------------------------------------------------------------------------------------------------------
                                                                                     _______________      _______________
      Get Azure Certified	              2026-05-12	   false            | Delete(л…ёл°”нѓ•) |   | Update (л…№л°”нѓ•) |
                                                                                     вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ      вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ
      ---------------------------------------------------------------------------------------------------------
                                                                                     _______________      _______________   
      Get GCP Certified	                      2025-05-12           false            | DELETE(л…ёл°”нѓ•) |   | Update (л…№л°”нѓ•) |
                                                                                     вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ      вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ
      ---------------------------------------------------------------------------------------------------------
                                                                                     _______________      _______________
      Get Fullstack Certified                 2025-05-12	   false            | Delete(л…ёл°”нѓ•) |   | Update (л…№л°”нѓ•) |
                                                                                     вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ      вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ
      ---------------------------------------------------------------------------------------------------------
      _________________
     | Add Todo(л…№л°”нѓ•) |
      вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ

----------------------------------------------------------------------------------------------------------------------
Add TodoлҐј нЃґл¦­н•ґліґмћђ                                                                      |
                                                                                          V
----------------------------------------------------------------------------------------------------------------------

http://localhost:8087/add-todo нЋмќґм§Ђ н™”л©ґ ==>


вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ
in28Minutes   Home Todos                         (лІ мќґм§Ђ? л°”нѓ•)                                           Logout                                            
_______________________________________________________________________________________________________________

      Enter Todo Details
                    _______________________   
      Description  |Learn to Dance         |     
                    вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ   
                    _______________________   
      Target Date  |2025-06-30             |     
                    вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ   

       ________     
      | м њ  м¶њ |
       вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ
----------------------------------------------------------------------------------------------------------------------
м€лҐј л“¤м–ґ Learn to Danceлќјкі  н•ґліґмћђ к·ёл¦¬кі  лЄ©н‘њ л‚ м§њлҐј 2025л…„ 6м›” 30мќјлЎњ н•ґліґмћђ                |
                                                                                           V
----------------------------------------------------------------------------------------------------------------------


http://localhost:8087/list-todos нЋмќґм§Ђн™”л©ґ ==>

вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ
in28Minutes   Home Todos                         (лІ мќґм§Ђ? л°”нѓ•)                                           Logout                                            
_______________________________________________________________________________________________________________


      Your Todos

      Description	                      Taget Date	   Is Done?
      вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ
                                                                                     _______________      _______________
      Learn to Dance                       2025-06-30	   false            | Delete(л…ёл°”нѓ•) |   | Update (л…№л°”нѓ•) |
                                                                                     вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ      вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ
      ---------------------------------------------------------------------------------------------------------
                                                                                     _______________      _______________
      Get AWS Certified                       2025-05-12	   false            | Delete(л…ёл°”нѓ•) |   | Update (л…№л°”нѓ•) |
                                                                                     вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ      вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ
      ---------------------------------------------------------------------------------------------------------
                                                                                     _______________      _______________
      Get Azure Certified	              2026-05-12	   false            | Delete(л…ёл°”нѓ•) |   | Update (л…№л°”нѓ•) |
                                                                                     вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ      вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ
      ---------------------------------------------------------------------------------------------------------
                                                                                     _______________      _______________   
      Get GCP Certified	                      2025-05-12           false            | DELETE(л…ёл°”нѓ•) |   | Update (л…№л°”нѓ•) |
                                                                                     вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ      вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ
      ---------------------------------------------------------------------------------------------------------
                                                                                     _______________      _______________
      Get Fullstack Certified                 2025-05-12	   false            | Delete(л…ёл°”нѓ•) |   | Update (л…№л°”нѓ•) |
                                                                                     вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ      вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ
      ---------------------------------------------------------------------------------------------------------
      _________________
     | Add Todo(л…№л°”нѓ•) |
      вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ

----------------------------------------------------------------------------------------------------------------------
Learn to Danceк°Ђ л‚м¤кі  2025л…„ 6м›” 30мќјмќґ л‚м™”л‹¤ мў‹л‹¤

мѓ€лЎњмљґ TodoлҐј м¶”к°Ђн•лЉ” л©”м„њл“њлҐј мќґл ‡кІЊ м™„м„±н–€кі  мќґм њ Todo м‚­м њлЎњ л„м–ґк°Ђліґмћђ

----------------------------------------------------------------------------------------------------------------------



вЏє TodoControllerJpa нЃґлћмЉ¤нЊЊмќј




package com.firstapplication.springboot.myfirstwebapp.todo;

import java.time.*;
import java.util.*;

import org.springframework.security.core.*;
import org.springframework.security.core.context.*;
import org.springframework.stereotype.*;
import org.springframework.ui.*;
import org.springframework.validation.*;
import org.springframework.web.bind.annotation.*;

import jakarta.validation.*;

@Controller
@SessionAttributes("name")
public class TodoControllerJpa {

	public TodoControllerJpa(TodoService todoService, TodoRepository todoRepository) {
		super();
		this.todoService = todoService;
		this.todoRepository = todoRepository;
	}
	
	private TodoService todoService;
	

	private TodoRepository todoRepository;
	
	@RequestMapping("list-todos")
	public String listAllTodos(ModelMap model) {
		String username = getLoggedInUsername(model);
		
		List<Todo> todos = todoRepository.findByUsername(username);
		model.addAttribute("todos", todos);
		
		return "listTodos";
	}

	
	//GET, POST
	@RequestMapping(value="add-todo",method=RequestMethod.GET)
	public String showNewTodoPage(ModelMap model) {
		String username = getLoggedInUsername(model);
		Todo todo = new Todo(0, username, "", LocalDate.now().plusYears(1), false);
		model.put("todo", todo);
		return "todo";
	}
	
	@RequestMapping(value="add-todo",method=RequestMethod.POST)
	public String addNewTodo(ModelMap model, @Valid Todo todo, BindingResult result) {
		
		if(result.hasErrors()) {
			return "todo";
		}
		
		String username = getLoggedInUsername(model);
		todo.setUsername(username);
		todoRepository.save(todo);
		
//		todoService.addTodo(username, todo.getDescription(), 
//				todo.getTargetDate(), todo.isDone());
		
		return "redirect:list-todos";
	}

	@RequestMapping("delete-todo")
	public String deleteTodo(@RequestParam int id) {
		//Delete todo

    //2: Todoм‚­м њлЉ” м •л§ђ м‰Ѕл‹¤ л‘к°™мќЂ л©”м†Њл“њлҐј м“°л©ґ лђњл‹¤, todoRepository.deleteById() лќјкі  н•кі  idлҐј л„Јм–ґмЈјл©ґ лђњл‹¤, к·ёл¦¬кі  мќґк±ґ м‚­м њн•  м€ мћ€л‹¤, м ЂмћҐн•кі  м›№м‚¬мќґнЉёлҐј мѓ€лЎњкі м№Ён•ґліґмћђ
    todoRepository.deleteById(id);

//		todoService.deleteById(id);
		
		return "redirect:list-todos";

	}
	
	
	@RequestMapping(value="update-todo", method=RequestMethod.GET)
	public String showUpdateTodoPage(@RequestParam int id, ModelMap model) {
		Todo todo = todoService.findById(id);
		model.addAttribute("todo",todo);
		return "todo";

	}
	
	@RequestMapping(value="update-todo",method=RequestMethod.POST)
	public String updateTodo(ModelMap model, @Valid Todo todo, BindingResult result) {
		
		if(result.hasErrors()) {
			return "todo";
		}
		
		String username = getLoggedInUsername(model);
		todo.setUsername(username);
		todoService.updateTodo(todo);
		
		return "redirect:list-todos";
	}
	
	private String getLoggedInUsername(ModelMap model) {
		Authentication authentication = 
				SecurityContextHolder.getContext().getAuthentication();
		
		return authentication.getName();
	}
	
}

----------------------------------------------------------------------------------------------------------------------
                                                                                           |
                                                                                           V
----------------------------------------------------------------------------------------------------------------------


http://localhost:8087/list-todos нЋмќґм§Ђн™”л©ґ ==>

вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ
in28Minutes   Home Todos                         (лІ мќґм§Ђ? л°”нѓ•)                                           Logout                                            
_______________________________________________________________________________________________________________


      Your Todos

      Description	                      Taget Date	   Is Done?
      вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ
                                                                                     _______________      _______________
      Get AWS Certified                       2025-05-12	   false            | Delete(л…ёл°”нѓ•) |   | Update (л…№л°”нѓ•) |
                                                                                     вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ      вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ
      ---------------------------------------------------------------------------------------------------------
                                                                                     _______________      _______________
      Get Azure Certified	              2026-05-12	   false            | Delete(л…ёл°”нѓ•) |   | Update (л…№л°”нѓ•) |
                                                                                     вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ      вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ
      ---------------------------------------------------------------------------------------------------------
                                                                                     _______________      _______________   
      Get GCP Certified	                      2025-05-12           false            | DELETE(л…ёл°”нѓ•) |   | Update (л…№л°”нѓ•) |
                                                                                     вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ      вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ
      ---------------------------------------------------------------------------------------------------------
                                                                                     _______________      _______________
      Get Fullstack Certified                 2025-05-12	   false            | Delete(л…ёл°”нѓ•) |   | Update (л…№л°”нѓ•) |
                                                                                     вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ      вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ
      ---------------------------------------------------------------------------------------------------------
      _________________
     | Add Todo(л…№л°”нѓ•) |
      вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ

----------------------------------------------------------------------------------------------------------------------
к·ёл¦¬кі  мќґкІѓл“¤ м¤‘м—ђ н•л‚лҐј м‚­м њн•  м€ мћ€л‹¤                                           |
AWSлҐј м‚­м њн•л©ґ AWSк°Ђ м‚­м њлђм—€кі                                                    V
----------------------------------------------------------------------------------------------------------------------


http://localhost:8087/list-todos нЋмќґм§Ђн™”л©ґ ==>

вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ
in28Minutes   Home Todos                         (лІ мќґм§Ђ? л°”нѓ•)                                           Logout                                            
_______________________________________________________________________________________________________________


      Your Todos

      Description	                      Taget Date	   Is Done?
      вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ
                                                                                     _______________      _______________   
      Get GCP Certified	                      2025-05-12           false            | DELETE(л…ёл°”нѓ•) |   | Update (л…№л°”нѓ•) |
                                                                                     вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ      вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ
      ---------------------------------------------------------------------------------------------------------
                                                                                     _______________      _______________
      Get Fullstack Certified                 2025-05-12	   false            | Delete(л…ёл°”нѓ•) |   | Update (л…№л°”нѓ•) |
                                                                                     вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ      вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ
      ---------------------------------------------------------------------------------------------------------
      _________________
     | Add Todo(л…№л°”нѓ•) |
      вЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕвЂѕ

----------------------------------------------------------------------------------------------------------------------
AzureлҐј м‚­м њн•л©ґ AzureлЏ„ м‚­м њлђм—€л‹¤
м›ђн•њл‹¤л©ґ л‚лЁём§ЂлЏ„ м‚­м њн•  м€ мћ€кі 
мќґл ‡кІЊ м‚­м њ кё°лЉҐлЏ„ л§€мі¤л‹¤

